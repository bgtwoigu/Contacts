<html>
<head>
  <title>Deep in MTK Turnkey Solution Logging Tools 2</title>
  <basefont face="Microsoft YaHei" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/301769 (zh-CN); Windows/6.3.9600 (Win64);"/>
  <style>
    body, td {
      font-family: Microsoft YaHei;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="416"/>
<h1>Deep in MTK Turnkey Solution Logging Tools 2</h1>

<div>
<span><div style="box-sizing: border-box; color: #353630; font-family: RionaSans, Helvetica, 微軟雅黑, &apos; microsoft yahei&apos;, song, pmingliu, sans-serif; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: #ffffff;"><a href="https://onlinesso.mediatek.com/_layouts/15/mol/topic/ext/Topic.aspx?mappingId=844fde79-3e58-4f1f-bba7-cf0be27cee45#" shape="rect" style="box-sizing: border-box; color: #663399; text-decoration: none; position: absolute; top: -2000px; overflow: hidden; height: 1px; width: 1px; display: block; background-color: transparent;">Turn on more accessible mode</a><br clear="none"/></div><div style="box-sizing: border-box; color: #353630; font-family: RionaSans, Helvetica, 微軟雅黑, &apos; microsoft yahei&apos;, song, pmingliu, sans-serif; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: #ffffff;"><a accesskey="Y" shape="rect" style="box-sizing: border-box; color: #663399; text-decoration: none; position: absolute; top: -2000px; overflow: hidden; height: 1px; width: 1px; display: block; background-color: transparent;">Skip Ribbon Commands</a><br clear="none"/></div><div style="box-sizing: border-box; color: #353630; font-family: RionaSans, Helvetica, 微軟雅黑, &apos; microsoft yahei&apos;, song, pmingliu, sans-serif; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: #ffffff;"><a shape="rect" style="box-sizing: border-box; color: #663399; text-decoration: none; position: absolute; top: -2000px; overflow: hidden; height: 1px; width: 1px; display: block; background-color: transparent;">Skip to main content</a><br clear="none"/></div><div style="box-sizing: border-box; color: #353630; font-family: RionaSans, Helvetica, 微軟雅黑, &apos; microsoft yahei&apos;, song, pmingliu, sans-serif; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: #ffffff;"><a href="https://onlinesso.mediatek.com/_layouts/15/mol/topic/ext/Topic.aspx?mappingId=844fde79-3e58-4f1f-bba7-cf0be27cee45#" shape="rect" style="box-sizing: border-box; color: #663399; text-decoration: none; position: absolute; top: -2000px; overflow: hidden; height: 1px; width: 1px; display: block; background-color: transparent;">Turn off Animations</a><br clear="none"/></div><div style="box-sizing: border-box; color: #353630; font-family: RionaSans, Helvetica, 微軟雅黑, &apos; microsoft yahei&apos;, song, pmingliu, sans-serif; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: #ffffff;"><div style="box-sizing: border-box;"><div style="box-sizing: border-box; float: left; width: 1841px; position: relative;"><div style="box-sizing: border-box; padding-right: 15px; padding-left: 15px; margin-right: auto; margin-left: auto; width: 1170px;"><div style="box-sizing: border-box; float: left; margin-right: 0px; margin-left: 0px;"><a href="https://onlinesso.mediatek.com/" shape="rect" style="box-sizing: border-box; color: #777777; text-decoration: none; float: left; height: 50px; padding: 15px; font-size: 18px; margin-left: -15px; background-color: transparent;"><img alt="MediaTek On-Line" src="https://onlinesso.mediatek.com/_layouts/15/mol/ui/ext/images/MenuLogo.png" style="box-sizing: border-box; border: 0px; -webkit-tap-highlight-color: transparent; vertical-align: middle; max-width: 100%; display: block;"></img></a><br clear="none"/></div><div style="box-sizing: border-box; display: block !important; visibility: visible !important; padding-right: 0px; padding-left: 0px; overflow: visible !important; border-top-width: 0px; border-color: #e7e7e7; box-shadow: none; width: auto; padding-bottom: 0px; height: 0px; max-height: 340px; margin-right: 0px; margin-left: 0px;"><div style="box-sizing: border-box; padding: 0px 15px; margin: 8px 0px; border: 0px #e7e7e7; box-shadow: none; width: auto; float: left !important;"><div style="box-sizing: border-box; margin-bottom: 0px; display: inline-block; vertical-align: middle;"> </div> </div><div style="box-sizing: border-box;"><ul style="box-sizing: border-box; margin: 0px -15px 0px 0px; padding-left: 0px; list-style: none; float: right !important;"><li style="box-sizing: border-box; position: relative; display: block; float: left;" title="账号"><a href="https://onlinesso.mediatek.com/_layouts/15/mol/ui/ext/currentuserprofile.aspx" shape="rect" style="box-sizing: border-box; color: #777777; text-decoration: none; position: relative; display: block; padding: 0px; margin: 0px; border-left-width: 1px; border-left-style: solid; border-left-color: #cccccc; overflow: hidden; white-space: nowrap; text-overflow: ellipsis; word-wrap: normal; background-color: transparent;"><img src="https://onlinesso.mediatek.com/_layouts/15/mol/ui/ext/images/icons/Menu-05.png?v=2015032202" style="box-sizing: border-box; border: 0px; -webkit-tap-highlight-color: transparent; vertical-align: middle; max-width: none; padding: 5px 10px 0px;"></img></a><p style="box-sizing: border-box; margin: 0px 2px; text-align: center;"><small style="box-sizing: border-box; font-size: 12px;">账号</small></p></li><li style="box-sizing: border-box; position: relative; display: block; float: left;" title="下载"><a href="https://onlinesso.mediatek.com/_layouts/15/mol/download/ext/downloadcenter.aspx" shape="rect" style="box-sizing: border-box; color: #777777; text-decoration: none; position: relative; display: block; padding: 0px; margin: 0px; border-left-width: 1px; border-left-style: solid; border-left-color: #cccccc; overflow: hidden; white-space: nowrap; text-overflow: ellipsis; word-wrap: normal; background-color: transparent;"><img src="https://onlinesso.mediatek.com/_layouts/15/mol/ui/ext/images/icons/Menu-07.png?v=2015032202" style="box-sizing: border-box; border: 0px; -webkit-tap-highlight-color: transparent; vertical-align: middle; max-width: none; padding: 5px 10px 0px;"></img></a><p style="box-sizing: border-box; margin: 0px 2px; text-align: center;"><small style="box-sizing: border-box; font-size: 12px;">下载</small></p></li><li style="box-sizing: border-box; position: relative; display: block; float: left;" title="应用"><a href="https://onlinesso.mediatek.com/_layouts/15/mol/ui/ext/allapps.aspx" shape="rect" style="box-sizing: border-box; color: #777777; text-decoration: none; position: relative; display: block; padding: 0px; margin: 0px; border-left-width: 1px; border-left-style: solid; border-left-color: #cccccc; overflow: hidden; white-space: nowrap; text-overflow: ellipsis; word-wrap: normal; background-color: transparent;"><img src="https://onlinesso.mediatek.com/_layouts/15/mol/ui/ext/images/icons/Menu-01.png?v=2015032202" style="box-sizing: border-box; border: 0px; -webkit-tap-highlight-color: transparent; vertical-align: middle; max-width: none; padding: 5px 10px 0px;"></img></a><p style="box-sizing: border-box; margin: 0px 2px; text-align: center;"><small style="box-sizing: border-box; font-size: 12px;">应用</small></p></li><li style="box-sizing: border-box; position: relative; display: block; float: left;" title="帮助"><a href="https://onlinesso.mediatek.com/UserManual/UserManual.aspx" shape="rect" style="box-sizing: border-box; color: #777777; text-decoration: none; position: relative; display: block; padding: 0px; margin: 0px; border-left-width: 1px; border-left-style: solid; border-left-color: #cccccc; overflow: hidden; white-space: nowrap; text-overflow: ellipsis; word-wrap: normal; background-color: transparent;"><img src="https://onlinesso.mediatek.com/_layouts/15/mol/ui/ext/images/icons/Menu-11.png?v=2015032202" style="box-sizing: border-box; border: 0px; -webkit-tap-highlight-color: transparent; vertical-align: middle; max-width: none; padding: 5px 10px 0px;"></img></a><p style="box-sizing: border-box; margin: 0px 2px; text-align: center;"><small style="box-sizing: border-box; font-size: 12px;">帮助</small></p></li><li style="box-sizing: border-box; position: relative; display: block; float: left;" title="中文"><a href="https://onlinesso.mediatek.com/_layouts/15/mol/topic/ext/Topic.aspx?mappingId=844fde79-3e58-4f1f-bba7-cf0be27cee45#" shape="rect" style="box-sizing: border-box; color: #777777; text-decoration: none; position: relative; display: block; padding: 0px; margin: 0px; border-left-width: 1px; border-left-style: solid; border-left-color: #cccccc; overflow: hidden; white-space: nowrap; text-overflow: ellipsis; word-wrap: normal; background-color: transparent;"><img src="https://onlinesso.mediatek.com/_layouts/15/mol/ui/ext/images/icons/lang-zh-h.png?v=2015032202" style="box-sizing: border-box; border: 0px; -webkit-tap-highlight-color: transparent; vertical-align: middle; max-width: none; padding: 5px 10px 0px;"></img></a><p style="box-sizing: border-box; margin: 0px 2px; text-align: center;"><small style="box-sizing: border-box; font-size: 12px;">中文</small></p></li><li style="box-sizing: border-box; position: relative; display: block; float: left;" title="English"><a href="https://onlinesso.mediatek.com/_layouts/15/mol/ui/ext/languageswitch.aspx?val=English&amp;target=%2fEnglish%2f_layouts%2f15%2fmol%2ftopic%2fext%2fTopic.aspx%3fmappingId%3d844fde79-3e58-4f1f-bba7-cf0be27cee45" shape="rect" style="box-sizing: border-box; color: #777777; text-decoration: none; position: relative; display: block; padding: 0px; margin: 0px; border-left-width: 1px; border-left-style: solid; border-left-color: #cccccc; overflow: hidden; white-space: nowrap; text-overflow: ellipsis; word-wrap: normal; background-color: transparent;"><img src="https://onlinesso.mediatek.com/_layouts/15/mol/ui/ext/images/icons/lang-en.png?v=2015032202" style="box-sizing: border-box; border: 0px; -webkit-tap-highlight-color: transparent; vertical-align: middle; max-width: none; padding: 5px 10px 0px;"></img></a><p style="box-sizing: border-box; margin: 0px 2px; text-align: center;"><small style="box-sizing: border-box; font-size: 12px;">English</small></p></li><li style="box-sizing: border-box; position: relative; display: block; float: left;" title="反馈"><a href="https://onlinesso.mediatek.com/_layouts/15/mol/discussion/ext/MyFeedback.aspx" shape="rect" style="box-sizing: border-box; color: #777777; text-decoration: none; position: relative; display: block; padding: 0px; margin: 0px; border-left-width: 1px; border-left-style: solid; border-left-color: #cccccc; overflow: hidden; white-space: nowrap; text-overflow: ellipsis; word-wrap: normal; background-color: transparent;"><img src="https://onlinesso.mediatek.com/_layouts/15/mol/ui/ext/images/icons/Menu-09.png?v=2015032202" style="box-sizing: border-box; border: 0px; -webkit-tap-highlight-color: transparent; vertical-align: middle; max-width: none; padding: 5px 10px 0px;"></img></a><p style="box-sizing: border-box; margin: 0px 2px; text-align: center;"><small style="box-sizing: border-box; font-size: 12px;">反馈</small></p></li><li style="box-sizing: border-box; position: relative; display: block; float: left;" title="订阅"><a href="https://onlinesso.mediatek.com/_layouts/15/mol/subscription/ext/myalert.aspx" shape="rect" style="box-sizing: border-box; color: #777777; text-decoration: none; position: relative; display: block; padding: 0px; margin: 0px; border-left-width: 1px; border-left-style: solid; border-left-color: #cccccc; overflow: hidden; white-space: nowrap; text-overflow: ellipsis; word-wrap: normal; background-color: transparent;"><img src="https://onlinesso.mediatek.com/_layouts/15/mol/ui/ext/images/icons/Menu-02.png?v=2015032202" style="box-sizing: border-box; border: 0px; -webkit-tap-highlight-color: transparent; vertical-align: middle; max-width: none; padding: 5px 10px 0px;"></img></a><p style="box-sizing: border-box; margin: 0px 2px; text-align: center;"><small style="box-sizing: border-box; font-size: 12px;">订阅</small></p></li><li style="box-sizing: border-box; position: relative; display: block; float: left;" title="注销"><a href="https://onlinesso.mediatek.com/_layouts/15/mol/portal/ext/signout.aspx" shape="rect" style="box-sizing: border-box; color: #777777; text-decoration: none; position: relative; display: block; padding: 0px; margin: 0px; border-left-width: 1px; border-left-style: solid; border-left-color: #cccccc; overflow: hidden; white-space: nowrap; text-overflow: ellipsis; word-wrap: normal; background-color: transparent;"><img src="https://onlinesso.mediatek.com/_layouts/15/mol/ui/ext/images/icons/Menu-06.png?v=2015032202" style="box-sizing: border-box; border: 0px; -webkit-tap-highlight-color: transparent; vertical-align: middle; max-width: none; padding: 5px 10px 0px;"></img></a><p style="box-sizing: border-box; margin: 0px 2px; text-align: center;"><small style="box-sizing: border-box; font-size: 12px;">注销</small></p></li></ul></div></div></div></div></div></div><div style="box-sizing: border-box; overflow: visible; position: relative; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; height: 931px; width: 1841px; background-color: rgba(255, 255, 255, 0.847656);"><div style="box-sizing: border-box; min-height: 91.9%; position: relative;"><div style="box-sizing: border-box; padding-bottom: 35px;"><div style="box-sizing: border-box; padding-top: 19px;"><div style="box-sizing: border-box; margin-right: auto; margin-left: auto;"><div style="box-sizing: border-box;"><a name="mainContent" shape="rect" style="box-sizing: border-box; color: #337ab7; text-decoration: none; background-color: transparent;"></a><div style="box-sizing: border-box; min-width: 1042px; width: 960px; margin-right: auto; margin-left: auto;"><table border="0" cellpadding="0" cellspacing="0" style="box-sizing: border-box; border-width: 0px; border-spacing: 0px; border-collapse: collapse; background-color: transparent;" width="100%"><tr style="box-sizing: border-box;"><td colspan="1" rowspan="1" style="box-sizing: border-box; padding: 0px;" valign="top"><span style="color: #353630;"><span style="font-size: 14px;"><span style="font-family: RionaSans, Helvetica, 微軟雅黑, &apos;"><span style="box-sizing: border-box;"><span style="box-sizing: border-box;"><a href="https://onlinesso.mediatek.com/" shape="rect" style="box-sizing: border-box; color: #663399; text-decoration: none; background-color: transparent;" target="_self">MediaTek On-Line</a>&gt; <a href="https://onlinesso.mediatek.com/_layouts/15/mol/topic/ext/TopicHome.aspx" shape="rect" style="box-sizing: border-box; color: #663399; text-decoration: none; background-color: transparent;" target="_self">Quick Start</a>&gt; <span style="box-sizing: border-box;">Deep in MTK Turnkey Solution Logging Tools</span></span></span></span></span></span></td></tr></table></div><div style="box-sizing: border-box;"><h3 style="box-sizing: border-box; margin: 20px auto 10px; font-weight: bold; font-family: RionaSans, Helvetica, 微軟雅黑, &apos; microsoft yahei&apos;, song, pmingliu, sans-serif; color: #353630; font-size: 24px; text-transform: uppercase;">QUICK START</h3><hr style="box-sizing: content-box; border: 0px none; height: 0.1875em; margin: 0px 0.1875em; background-color: #00a1de;"/><div style="box-sizing: border-box; text-align: center; font-size: 18px; color: #0099cc; padding: 32px;"><span style="font-family: RionaSans, Helvetica, 微軟雅黑, &apos;"><span style="box-sizing: border-box;">Deep in MTK Turnkey Solution Logging Tools</span></span></div><div style="box-sizing: border-box; margin-right: -15px; margin-left: 0px;"><div style="box-sizing: border-box;"><div style="box-sizing: border-box; position: relative; min-height: 1px; padding-right: 15px; padding-left: 15px; float: left; width: 404.234px;"><ul style="box-sizing: border-box; margin: 0px; list-style: none; padding: 0px;"><li style="box-sizing: border-box;"><div style="box-sizing: border-box; text-align: center; cursor: default !important; background: #0099cc;"><span style="color: #353630;"><span style="font-size: 14px;"><span style="font-family: RionaSans, Helvetica, 微軟雅黑, &apos;"><span style="box-sizing: border-box; color: #ffffff; font-weight: bold; display: block; overflow: hidden; white-space: nowrap; text-overflow: ellipsis; width: 180px;">基础知识</span></span></span></span></div></li><li style="box-sizing: border-box; cursor: pointer; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: #dedede; border-right-width: 1px; border-right-style: solid; border-right-color: #bbbbbb; border-left-width: 1px; border-left-style: solid; border-left-color: #bbbbbb; margin: 0px; background: #f8f8f8;"><div style="box-sizing: border-box; display: block; overflow: hidden; white-space: nowrap; text-overflow: ellipsis; width: 335px; padding-left: 9px; padding-right: 9px;"><span style="color: #353630;"><span style="font-size: 14px;"><span style="font-family: RionaSans, Helvetica, 微軟雅黑, &apos;"><span style="box-sizing: border-box; font-size: 20px; padding-right: 3px;">1</span>Logging 概述</span></span></span></div></li><li style="box-sizing: border-box; cursor: pointer; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: #dedede; border-right-width: 0px; border-left-width: 1px; border-left-style: solid; border-left-color: #bbbbbb; margin: 0px; background: #ffffff;"><div style="box-sizing: border-box; display: block; overflow: hidden; white-space: nowrap; text-overflow: ellipsis; width: 335.906px; padding-left: 9px; padding-right: 9px;"><span style="color: #353630;"><span style="font-size: 14px;"><span style="font-family: RionaSans, Helvetica, 微軟雅黑, &apos;"><span style="box-sizing: border-box; font-size: 20px; padding-right: 3px;">2</span>Kernel Log</span></span></span></div></li><li style="box-sizing: border-box; cursor: pointer; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: #dedede; border-right-width: 1px; border-right-style: solid; border-right-color: #bbbbbb; border-left-width: 1px; border-left-style: solid; border-left-color: #bbbbbb; margin: 0px; background: #f8f8f8;"><div style="box-sizing: border-box; display: block; overflow: hidden; white-space: nowrap; text-overflow: ellipsis; width: 335px; padding-left: 9px; padding-right: 9px;"><span style="color: #353630;"><span style="font-size: 14px;"><span style="font-family: RionaSans, Helvetica, 微軟雅黑, &apos;"><span style="box-sizing: border-box; font-size: 20px; padding-right: 3px;">3</span>Android Log</span></span></span></div></li><li style="box-sizing: border-box; cursor: pointer; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: #dedede; border-right-width: 1px; border-right-style: solid; border-right-color: #bbbbbb; border-left-width: 1px; border-left-style: solid; border-left-color: #bbbbbb; margin: 0px; background: #f8f8f8;"><div style="box-sizing: border-box; display: block; overflow: hidden; white-space: nowrap; text-overflow: ellipsis; width: 335px; padding-left: 9px; padding-right: 9px;"><span style="color: #353630;"><span style="font-size: 14px;"><span style="font-family: RionaSans, Helvetica, 微軟雅黑, &apos;"><span style="box-sizing: border-box; font-size: 20px; padding-right: 3px;">4</span>Logging Tools</span></span></span></div></li><li style="box-sizing: border-box;"><div style="box-sizing: border-box; text-align: center; cursor: default !important; background: #0099cc;"><span style="color: #353630;"><span style="font-size: 14px;"><span style="font-family: RionaSans, Helvetica, 微軟雅黑, &apos;"><span style="box-sizing: border-box; color: #ffffff; font-weight: bold; display: block; overflow: hidden; white-space: nowrap; text-overflow: ellipsis; width: 180px;">深入解析</span></span></span></span></div></li><li style="box-sizing: border-box; cursor: pointer; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: #dedede; border-right-width: 1px; border-right-style: solid; border-right-color: #bbbbbb; border-left-width: 1px; border-left-style: solid; border-left-color: #bbbbbb; margin: 0px; background: #f8f8f8;"><div style="box-sizing: border-box; display: block; overflow: hidden; white-space: nowrap; text-overflow: ellipsis; width: 335px; padding-left: 9px; padding-right: 9px;"><span style="color: #353630;"><span style="font-size: 14px;"><span style="font-family: RionaSans, Helvetica, 微軟雅黑, &apos;"><span style="box-sizing: border-box; font-size: 20px; padding-right: 3px;">5</span>kmsg</span></span></span></div></li><li style="box-sizing: border-box; cursor: pointer; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: #dedede; border-right-width: 1px; border-right-style: solid; border-right-color: #bbbbbb; border-left-width: 1px; border-left-style: solid; border-left-color: #bbbbbb; margin: 0px; background: #f8f8f8;"><div style="box-sizing: border-box; display: block; overflow: hidden; white-space: nowrap; text-overflow: ellipsis; width: 335px; padding-left: 9px; padding-right: 9px;"><span style="color: #353630;"><span style="font-size: 14px;"><span style="font-family: RionaSans, Helvetica, 微軟雅黑, &apos;"><span style="box-sizing: border-box; font-size: 20px; padding-right: 3px;">6</span>dmesg</span></span></span></div></li><li style="box-sizing: border-box; cursor: pointer; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: #dedede; border-right-width: 1px; border-right-style: solid; border-right-color: #bbbbbb; border-left-width: 1px; border-left-style: solid; border-left-color: #bbbbbb; margin: 0px; background: #f8f8f8;"><div style="box-sizing: border-box; display: block; overflow: hidden; white-space: nowrap; text-overflow: ellipsis; width: 335px; padding-left: 9px; padding-right: 9px;"><span style="color: #353630;"><span style="font-size: 14px;"><span style="font-family: RionaSans, Helvetica, 微軟雅黑, &apos;"><span style="box-sizing: border-box; font-size: 20px; padding-right: 3px;">7</span>UART Log</span></span></span></div></li><li style="box-sizing: border-box; cursor: pointer; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: #dedede; border-right-width: 1px; border-right-style: solid; border-right-color: #bbbbbb; border-left-width: 1px; border-left-style: solid; border-left-color: #bbbbbb; margin: 0px; background: #f8f8f8;"><div style="box-sizing: border-box; display: block; overflow: hidden; white-space: nowrap; text-overflow: ellipsis; width: 335px; padding-left: 9px; padding-right: 9px;"><span style="color: #353630;"><span style="font-size: 14px;"><span style="font-family: RionaSans, Helvetica, 微軟雅黑, &apos;"><span style="box-sizing: border-box; font-size: 20px; padding-right: 3px;">8</span>last_kmsg</span></span></span></div></li><li style="box-sizing: border-box; cursor: pointer; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: #dedede; border-right-width: 1px; border-right-style: solid; border-right-color: #bbbbbb; border-left-width: 1px; border-left-style: solid; border-left-color: #bbbbbb; margin: 0px; background: #f8f8f8;"><div style="box-sizing: border-box; display: block; overflow: hidden; white-space: nowrap; text-overflow: ellipsis; width: 335px; padding-left: 9px; padding-right: 9px;"><span style="color: #353630;"><span style="font-size: 14px;"><span style="font-family: RionaSans, Helvetica, 微軟雅黑, &apos;"><span style="box-sizing: border-box; font-size: 20px; padding-right: 3px;">9</span>Logcat</span></span></span></div></li><li style="box-sizing: border-box; cursor: pointer; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: #dedede; border-right-width: 1px; border-right-style: solid; border-right-color: #bbbbbb; border-left-width: 1px; border-left-style: solid; border-left-color: #bbbbbb; margin: 0px; background: #f8f8f8;"><div style="box-sizing: border-box; display: block; overflow: hidden; white-space: nowrap; text-overflow: ellipsis; width: 335px; padding-left: 9px; padding-right: 9px;"><span style="color: #353630;"><span style="font-size: 14px;"><span style="font-family: RionaSans, Helvetica, 微軟雅黑, &apos;"><span style="box-sizing: border-box; font-size: 20px; padding-right: 3px;">10</span>DDMS</span></span></span></div></li><li style="box-sizing: border-box; cursor: pointer; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: #dedede; border-right-width: 1px; border-right-style: solid; border-right-color: #bbbbbb; border-left-width: 1px; border-left-style: solid; border-left-color: #bbbbbb; margin: 0px; background: #f8f8f8;"><div style="box-sizing: border-box; display: block; overflow: hidden; white-space: nowrap; text-overflow: ellipsis; width: 335px; padding-left: 9px; padding-right: 9px;"><span style="color: #353630;"><span style="font-size: 14px;"><span style="font-family: RionaSans, Helvetica, 微軟雅黑, &apos;"><span style="box-sizing: border-box; font-size: 20px; padding-right: 3px;">11</span>MTKLogger</span></span></span></div></li></ul></div><div style="box-sizing: border-box; position: relative; min-height: 1px; padding-right: 15px; padding-left: 15px; float: left; width: 1212.7px; border-right-width: 1px; border-right-style: solid; border-right-color: #dddddd;"><div style="box-sizing: border-box; overflow: hidden; padding-right: 10px; position: relative; word-wrap: break-word !important; word-break: break-all !important; display: block;"><div style="box-sizing: border-box;"><div style="box-sizing: border-box;"><p style="box-sizing: border-box; margin: 0px 0px 10px;"><span style="color: #353630;"><span style="font-size: 14px;"><span style="font-family: RionaSans, Helvetica, 微軟雅黑, &apos;"><span style="box-sizing: border-box;"><span style="box-sizing: border-box; font-family: 微软雅黑;">在开发Linux device Driver或者跟踪调试内核行为的时候经常要通过Log API来trace整个过程，Kernel API printk() 是整个Kernel Log机制的基础API，几乎所有的Log方式都是基于printk来实现的。</span></span></span></span></span></p><p style="box-sizing: border-box; margin: 0px 0px 10px;"><span style="color: #353630;"><span style="font-size: 14px;"><span style="font-family: RionaSans, Helvetica, 微軟雅黑, &apos;"><span style="box-sizing: border-box;"><span style="box-sizing: border-box; font-family: 微软雅黑;">利用printk，我们可以像开发C应用中printf接口一样印log，最简单的方式，我们只要把需要打印的内容传给printk函数就可以了，如下：</span></span></span></span></span></p><blockquote dir="ltr" style="box-sizing: border-box; padding: 10px 20px; margin: 0px 0px 20px; font-size: 17.5px; border-left-width: 5px; border-left-style: solid; border-left-color: #eeeeee;"><p style="box-sizing: border-box; margin: 0px;"><span style="color: #353630;"><span style="font-family: RionaSans, Helvetica, 微軟雅黑, &apos;"><span style="box-sizing: border-box;"><em style="box-sizing: border-box;"><span style="box-sizing: border-box; background-color: #ffff99; color: #000080; font-family: Courier New;">printk(&quot;This is just an example!!&quot;);</span></em></span></span></span></p></blockquote><p style="box-sizing: border-box; margin: 0px 0px 10px;"><span style="color: #353630;"><span style="font-size: 14px;"><span style="font-family: RionaSans, Helvetica, 微軟雅黑, &apos;"><span style="box-sizing: border-box;"><span style="box-sizing: border-box; font-family: 微软雅黑;">当然使用printk还有一些需要注意的地方，在详细讲述之前我们先分析一下printk()实现，其流程大致如下图所示：</span></span></span></span></span></p><div style="box-sizing: border-box; margin: 0px 0px 10px;"><div><img src="Deep in MTK Turnkey Solution Logging Tools 2_files/Image.png" type="image/png"/></div></div><div style="box-sizing: border-box;"><span style="color: #353630;"><span style="font-size: 14px;"><span style="font-family: RionaSans, Helvetica, 微軟雅黑, &apos;"><span style="box-sizing: border-box;"><span style="box-sizing: border-box; font-family: 微软雅黑;">从上图可以看出，printk的流程大致可以分为两步：</span></span></span></span></span></div><div style="box-sizing: border-box;"><ol style="box-sizing: border-box; margin-top: 0px; margin-bottom: 10px;"><li style="box-sizing: border-box;"><div style="box-sizing: border-box;"><span style="color: #353630;"><span style="font-size: 14px;"><span style="font-family: RionaSans, Helvetica, 微軟雅黑, &apos;"><span style="box-sizing: border-box;"><span style="box-sizing: border-box; font-family: 微软雅黑;">将所有Log输出到内核的Log buffer，该Log Buffer是一个循环缓冲区，其地址可以在内核中用log_buf变量访问。</span></span></span></span></span></div></li><li style="box-sizing: border-box;"><div style="box-sizing: border-box;"><span style="color: #353630;"><span style="font-size: 14px;"><span style="font-family: RionaSans, Helvetica, 微軟雅黑, &apos;"><span style="box-sizing: border-box;"><span style="box-sizing: border-box; font-family: 微软雅黑;">根据设定的Log级别决定是否将Log输出到Console。</span></span></span></span></span></div></li></ol></div><p style="box-sizing: border-box; margin: 0px 0px 10px;"><span style="color: #353630;"><span style="font-size: 14px;"><span style="font-family: RionaSans, Helvetica, 微軟雅黑, &apos;"><span style="box-sizing: border-box;"><span style="box-sizing: border-box; font-family: 微软雅黑;">所以我们打印的log会走向两个位置：</span></span></span></span></span></p><div style="box-sizing: border-box;"><ol style="box-sizing: border-box; margin-top: 0px; margin-bottom: 10px;"><li style="box-sizing: border-box;"><div style="box-sizing: border-box;"><span style="color: #353630;"><span style="font-size: 14px;"><span style="font-family: RionaSans, Helvetica, 微軟雅黑, &apos;"><span style="box-sizing: border-box;"><span style="box-sizing: border-box; font-family: 微软雅黑;"><strong style="box-sizing: border-box; font-weight: bold;">Log Buffer</strong>，该Buffer的内容可以在user space通过/proc/kmsg来访问。</span></span></span></span></span></div></li><li style="box-sizing: border-box;"><div style="box-sizing: border-box;"><span style="color: #353630;"><span style="font-size: 14px;"><span style="font-family: RionaSans, Helvetica, 微軟雅黑, &apos;"><span style="box-sizing: border-box;"><span style="box-sizing: border-box; font-family: 微软雅黑;"><strong style="box-sizing: border-box; font-weight: bold;">Console</strong>，Console的实现可以有很多，目前我们用到的有UART Console和RAM Console。拿UART Console来说，通向UART Console的log会在对应的UART端口打印出来。而RAM Console也是我们一种重要的Debug手段。</span></span></span></span></span></div></li></ol></div><p style="box-sizing: border-box; margin: 0px 0px 10px;"><span style="color: #353630;"><span style="font-size: 14px;"><span style="font-family: RionaSans, Helvetica, 微軟雅黑, &apos;"><span style="box-sizing: border-box;"><span style="box-sizing: border-box; font-family: 微软雅黑;">对于console log，不可避免的对系统的性能有损失，尤其是像UART Log这种收到硬件传输效率影响的。所以对于console log设置了两道关卡。第一个是对Log级别进行过滤，只能输出高优先级的log；第二个是为UART Console设置单独的开关，在不必要的时候可以将其关闭以提高系统性能。</span></span></span></span></span></p><p style="box-sizing: border-box; margin: 0px 0px 10px;"><span style="color: #353630;"><span style="font-size: 14px;"><span style="font-family: RionaSans, Helvetica, 微軟雅黑, &apos;"><span style="box-sizing: border-box;"><span style="box-sizing: border-box; font-family: 微软雅黑;">在这里我们提到了Log Level的概念，那什么是Log Level呢？</span></span></span></span></span></p><p style="box-sizing: border-box; margin: 0px 0px 10px;"><span style="color: #353630;"><span style="font-size: 14px;"><span style="font-family: RionaSans, Helvetica, 微軟雅黑, &apos;"><span style="box-sizing: border-box;"><span style="box-sizing: border-box; color: #000000; font-family: 微软雅黑; font-size: x-large;"><strong style="box-sizing: border-box; font-weight: bold;">LOG 优先级</strong></span></span></span></span></span></p><p style="box-sizing: border-box; margin: 0px 0px 10px;"><span style="color: #353630;"><span style="font-size: 14px;"><span style="font-family: RionaSans, Helvetica, 微軟雅黑, &apos;"><span style="box-sizing: border-box;"><span style="box-sizing: border-box; font-family: 微软雅黑;">Log Level，也叫做Log优先级，为了能够区分各个Log的重要程度，printk机制设计了若干Log级别以作区分。当我们读取log buffer （adb shell cat /proc/kmsg）的时候可以看到如下的log，在每一行Log的前面有一对尖角号，里面包含一个数字，这个数字即为这行Log优先级。</span></span></span></span></span></p><p style="box-sizing: border-box; margin: 0px 0px 10px;"><span style="color: #353630;"><span style="font-size: 14px;"><span style="font-family: RionaSans, Helvetica, 微軟雅黑, &apos;"><span style="box-sizing: border-box;"><span style="box-sizing: border-box; color: #0000ff;">&lt;6&gt;[  641.908202] (0)[130:healthd]healthd: battery l=26 l2=50 v=3859 t=30.0 h=2<br clear="none" style="box-sizing: border-box;"/> &lt;4&gt;[  641.908685] (0)[64:bat_thread_kthr][0x4]=0x9b [0x5]=0x4 [0x6]=0x70<br clear="none" style="box-sizing: border-box;"/> &lt;6&gt;[  641.914564] (0)[130:healthd]healthd: battery l=26 l2=50 v=3859 t=30.0 h=2<br clear="none" style="box-sizing: border-box;"/> &lt;4&gt;[  643.716514] (0)[0:swapper/0][printk_delayed:start]<br clear="none" style="box-sizing: border-box;"/> &lt;4&gt;[  643.717113] (0)[0:swapper/0][WDK], local_bit:0x0, cpu:0,RT[643706704575]<br clear="none" style="box-sizing: border-box;"/> &lt;4&gt;[  643.717120] (0)[0:swapper/0][WDK], local_bit:0x1, cpu:0, check bit0x:1,RT[6<br clear="none" style="box-sizing: border-box;"/> &lt;4&gt;[  643.717127] (0)[0:swapper/0][WDK]: kick Ex WDT,RT[643706714498]<br clear="none" style="box-sizing: border-box;"/> &lt;4&gt;[  643.717134] (0)[0:swapper/0][thread:86][RT:643706722652] 2013-01-01 00<br clear="none" style="box-sizing: border-box;"/> &lt;4&gt;[  643.721143] (0)[0:swapper/0][printk_delayed:done]<br clear="none" style="box-sizing: border-box;"/> &lt;7&gt;[  644.916496] (0)[0:swapper/0][ccci/ctl] (1)get_txpower(0): 16<br clear="none" style="box-sizing: border-box;"/> &lt;7&gt;[  644.916520] (0)[0:swapper/0][ccci/ctl] (1)get_txpower(1): 16<br clear="none" style="box-sizing: border-box;"/> &lt;7&gt;[  644.916540] (0)[0:swapper/0][ccci/ctl] (1)get_txpower(2): 16<br clear="none" style="box-sizing: border-box;"/> &lt;6&gt;[  644.916663] (0)[96:flush-179:0][BLOCK_TAG] BDI_Flush statistic in timeline<br clear="none" style="box-sizing: border-box;"/> &lt;6&gt;[  644.916682] (0)[96:flush-179:0][BLOCK_TAG] BDI_Flush [(PID):cnt] -- (  96</span></span></span></span></span></p><p style="box-sizing: border-box; margin: 0px 0px 10px;"><span style="color: #353630;"><span style="font-size: 14px;"><span style="font-family: RionaSans, Helvetica, 微軟雅黑, &apos;"><span style="box-sizing: border-box;"><span style="box-sizing: border-box; font-family: 微软雅黑;">完整的8个级别的定义可以参考下表，值越小级别越高：</span></span></span></span></span></p><p style="box-sizing: border-box; margin: 0px 0px 10px;"><br clear="none"/></p><table border="1" style="box-sizing: border-box; border-width: 0px; border-spacing: 0px; border-collapse: collapse; font-size: 1em; display: inline; background-color: transparent; width: 105px;"><tr style="box-sizing: border-box;"><td colspan="1" rowspan="1" style="box-sizing: border-box; padding: 2px; vertical-align: top; border: 1px solid #c6c6c6; width: NaN%;"><div style="box-sizing: border-box;"><span style="color: #353630;"><span style="box-sizing: border-box; font-family: 微软雅黑;"><strong style="box-sizing: border-box; font-weight: bold;">宏定义</strong></span></span></div></td><td colspan="1" rowspan="1" style="box-sizing: border-box; padding: 2px; vertical-align: top; border: 1px solid #c6c6c6; width: NaN%;"><div style="box-sizing: border-box;"><span style="color: #353630;"><span style="box-sizing: border-box; font-family: 微软雅黑;"><strong style="box-sizing: border-box; font-weight: bold;">级别</strong></span></span></div></td><td colspan="1" rowspan="1" style="box-sizing: border-box; padding: 2px; vertical-align: top; border: 1px solid #c6c6c6; width: Infinity%;"><div style="box-sizing: border-box;"><span style="color: #353630;"><span style="box-sizing: border-box; font-family: 微软雅黑;"><strong style="box-sizing: border-box; font-weight: bold;">描述</strong></span></span></div></td></tr><tr style="box-sizing: border-box;"><td colspan="1" rowspan="1" style="box-sizing: border-box; padding: 2px; vertical-align: top; border: 1px solid #c6c6c6;"><div style="box-sizing: border-box;"><span style="color: #353630;"><span style="box-sizing: border-box; font-family: 微软雅黑;"><strong style="box-sizing: border-box; font-weight: bold;">KERN_EMERG</strong></span></span></div></td><td colspan="1" rowspan="1" style="box-sizing: border-box; padding: 2px; vertical-align: top; border: 1px solid #c6c6c6;"><div style="box-sizing: border-box;"><span style="color: #353630;"><span style="box-sizing: border-box; font-family: 微软雅黑;">&quot;&lt;0&gt;&quot;</span></span></div></td><td colspan="1" rowspan="1" style="box-sizing: border-box; padding: 2px; vertical-align: top; border: 1px solid #c6c6c6;"><div style="box-sizing: border-box;"><span style="color: #353630;"><span style="box-sizing: border-box; font-family: 微软雅黑;">紧急信息，此信息会引起系统崩溃</span></span></div></td></tr><tr style="box-sizing: border-box;"><td colspan="1" rowspan="1" style="box-sizing: border-box; padding: 2px; vertical-align: top; border: 1px solid #c6c6c6;"><div style="box-sizing: border-box;"><span style="color: #353630;"><span style="box-sizing: border-box; font-family: 微软雅黑;"><strong style="box-sizing: border-box; font-weight: bold;">KERN_ALERT</strong></span></span></div></td><td colspan="1" rowspan="1" style="box-sizing: border-box; padding: 2px; vertical-align: top; border: 1px solid #c6c6c6;"><div style="box-sizing: border-box;"><div style="box-sizing: border-box;"><span style="color: #353630;"><span style="box-sizing: border-box; font-family: 微软雅黑;">&quot;&lt;1&gt;&quot;</span></span></div></div></td><td colspan="1" rowspan="1" style="box-sizing: border-box; padding: 2px; vertical-align: top; border: 1px solid #c6c6c6;"><div style="box-sizing: border-box;"><span style="color: #353630;"><span style="box-sizing: border-box; font-family: 微软雅黑;">提示要马上采取某些行动</span></span></div></td></tr><tr style="box-sizing: border-box;"><td colspan="1" rowspan="1" style="box-sizing: border-box; padding: 2px; vertical-align: top; border: 1px solid #c6c6c6;"><div style="box-sizing: border-box;"><span style="color: #353630;"><span style="box-sizing: border-box; font-family: 微软雅黑;"><strong style="box-sizing: border-box; font-weight: bold;">KERN_CRIT</strong></span></span></div></td><td colspan="1" rowspan="1" style="box-sizing: border-box; padding: 2px; vertical-align: top; border: 1px solid #c6c6c6;"><div style="box-sizing: border-box;"><div style="box-sizing: border-box;"><span style="color: #353630;"><span style="box-sizing: border-box; font-family: 微软雅黑;">&quot;&lt;2&gt;&quot;</span></span></div></div></td><td colspan="1" rowspan="1" style="box-sizing: border-box; padding: 2px; vertical-align: top; border: 1px solid #c6c6c6;"><div style="box-sizing: border-box;"><span style="color: #353630;"><span style="box-sizing: border-box; font-family: 微软雅黑;">关键信息，通常有严重的软件或者硬件问题发生了</span></span></div></td></tr><tr style="box-sizing: border-box;"><td colspan="1" rowspan="1" style="box-sizing: border-box; padding: 2px; vertical-align: top; border: 1px solid #c6c6c6;"><div style="box-sizing: border-box;"><span style="color: #353630;"><span style="box-sizing: border-box; font-family: 微软雅黑;"><strong style="box-sizing: border-box; font-weight: bold;">KERN_ERR</strong></span></span></div></td><td colspan="1" rowspan="1" style="box-sizing: border-box; padding: 2px; vertical-align: top; border: 1px solid #c6c6c6;"><div style="box-sizing: border-box;"><div style="box-sizing: border-box;"><span style="color: #353630;"><span style="box-sizing: border-box; font-family: 微软雅黑;">&quot;&lt;3&gt;&quot;</span></span></div></div></td><td colspan="1" rowspan="1" style="box-sizing: border-box; padding: 2px; vertical-align: top; border: 1px solid #c6c6c6;"><div style="box-sizing: border-box;"><span style="color: #353630;"><span style="box-sizing: border-box; font-family: 微软雅黑;">通常用来报告错误，例如设备驱动通常会用来报告硬件操作失败等</span></span></div></td></tr><tr style="box-sizing: border-box;"><td colspan="1" rowspan="1" style="box-sizing: border-box; padding: 2px; vertical-align: top; border: 1px solid #c6c6c6;"><div style="box-sizing: border-box;"><span style="color: #353630;"><span style="box-sizing: border-box; font-family: 微软雅黑;"><strong style="box-sizing: border-box; font-weight: bold;">KERN_WARNING</strong></span></span></div></td><td colspan="1" rowspan="1" style="box-sizing: border-box; padding: 2px; vertical-align: top; border: 1px solid #c6c6c6;"><div style="box-sizing: border-box;"><div style="box-sizing: border-box;"><span style="color: #353630;"><span style="box-sizing: border-box; font-family: 微软雅黑;">&quot;&lt;4&gt;&quot;</span></span></div></div></td><td colspan="1" rowspan="1" style="box-sizing: border-box; padding: 2px; vertical-align: top; border: 1px solid #c6c6c6;"><div style="box-sizing: border-box;"><span style="color: #353630;"><span style="box-sizing: border-box; font-family: 微软雅黑;">警告信息，用来警告那些并不会造成严重的系统异常的问题</span></span></div></td></tr><tr style="box-sizing: border-box;"><td colspan="1" rowspan="1" style="box-sizing: border-box; padding: 2px; vertical-align: top; border: 1px solid #c6c6c6;"><div style="box-sizing: border-box;"><span style="color: #353630;"><span style="box-sizing: border-box; font-family: 微软雅黑;"><strong style="box-sizing: border-box; font-weight: bold;">KERN_NOTICE</strong></span></span></div></td><td colspan="1" rowspan="1" style="box-sizing: border-box; padding: 2px; vertical-align: top; border: 1px solid #c6c6c6;"><div style="box-sizing: border-box;"><div style="box-sizing: border-box;"><span style="color: #353630;"><span style="box-sizing: border-box; font-family: 微软雅黑;">&quot;&lt;5&gt;&quot;</span></span></div></div></td><td colspan="1" rowspan="1" style="box-sizing: border-box; padding: 2px; vertical-align: top; border: 1px solid #c6c6c6;"><div style="box-sizing: border-box;"><span style="color: #353630;"><span style="box-sizing: border-box; font-family: 微软雅黑;">用于正常但是值得注意的情况，比如大量安全相关的log</span></span></div></td></tr><tr style="box-sizing: border-box;"><td colspan="1" rowspan="1" style="box-sizing: border-box; padding: 2px; vertical-align: top; border: 1px solid #c6c6c6;"><div style="box-sizing: border-box;"><span style="color: #353630;"><span style="box-sizing: border-box; font-family: 微软雅黑;"><strong style="box-sizing: border-box; font-weight: bold;">KERN_INFO</strong></span></span></div></td><td colspan="1" rowspan="1" style="box-sizing: border-box; padding: 2px; vertical-align: top; border: 1px solid #c6c6c6;"><div style="box-sizing: border-box;"><div style="box-sizing: border-box;"><span style="color: #353630;"><span style="box-sizing: border-box; font-family: 微软雅黑;">&quot;&lt;6&gt;&quot;</span></span></div></div></td><td colspan="1" rowspan="1" style="box-sizing: border-box; padding: 2px; vertical-align: top; border: 1px solid #c6c6c6;"><div style="box-sizing: border-box;"><span style="color: #353630;"><span style="box-sizing: border-box; font-family: 微软雅黑;">信息，许多驱动程序都会在硬件启动的时候使用这个级别打印Log</span></span></div></td></tr><tr style="box-sizing: border-box;"><td colspan="1" rowspan="1" style="box-sizing: border-box; padding: 2px; vertical-align: top; border: 1px solid #c6c6c6;"><div style="box-sizing: border-box;"><span style="color: #353630;"><span style="box-sizing: border-box; font-family: 微软雅黑;"><strong style="box-sizing: border-box; font-weight: bold;">KERN_DEBUG</strong></span></span></div></td><td colspan="1" rowspan="1" style="box-sizing: border-box; padding: 2px; vertical-align: top; border: 1px solid #c6c6c6;"><div style="box-sizing: border-box;"><div style="box-sizing: border-box;"><span style="color: #353630;"><span style="box-sizing: border-box; font-family: 微软雅黑;">&quot;&lt;7&gt;&quot;</span></span></div></div></td><td colspan="1" rowspan="1" style="box-sizing: border-box; padding: 2px; vertical-align: top; border: 1px solid #c6c6c6;"><div style="box-sizing: border-box;"><span style="color: #353630;"><span style="box-sizing: border-box; font-family: 微软雅黑;">用于调试信息的打印</span></span></div></td></tr></table><p style="box-sizing: border-box; margin: 0px 0px 10px;"><br clear="none"/></p><p style="box-sizing: border-box; margin: 0px 0px 10px;"><span style="color: #353630;"><span style="font-size: 14px;"><span style="font-family: RionaSans, Helvetica, 微軟雅黑, &apos;"><span style="box-sizing: border-box;"><span style="box-sizing: border-box; color: #000000; font-family: 微软雅黑; font-size: large;"><strong style="box-sizing: border-box; font-weight: bold;">那优先级是怎么应用的呢？</strong></span></span></span></span></span></p><p style="box-sizing: border-box; margin: 0px 0px 10px;"><span style="color: #353630;"><span style="font-size: 14px;"><span style="font-family: RionaSans, Helvetica, 微軟雅黑, &apos;"><span style="box-sizing: border-box;"><span style="box-sizing: border-box; font-family: 微软雅黑;">我们可以为将要打印的log指定优先级，举例如下，可以在我们要打印的log前面简单的添加上Log优先级的宏定义即可，这个优先级在printk API里面会去解析处理，以判断是否要打印到console中去。</span></span></span></span></span></p><blockquote dir="ltr" style="box-sizing: border-box; padding: 10px 20px; margin: 0px 0px 20px; font-size: 17.5px; border-left-width: 5px; border-left-style: solid; border-left-color: #eeeeee;"><p style="box-sizing: border-box; margin: 0px;"><span style="color: #353630;"><span style="font-family: RionaSans, Helvetica, 微軟雅黑, &apos;"><span style="box-sizing: border-box;"><em style="box-sizing: border-box;"><span style="box-sizing: border-box; background-color: #ffff99; color: #000080; font-family: Courier New;"><strong style="box-sizing: border-box; font-weight: bold;">printk(<span style="box-sizing: border-box; color: #800000;">KERN_ERR</span>&quot;This is an error message!!&quot;);</strong></span></em></span></span></span></p></blockquote><p style="box-sizing: border-box; margin: 0px 0px 10px;"><span style="color: #353630;"><span style="font-size: 14px;"><span style="font-family: RionaSans, Helvetica, 微軟雅黑, &apos;"><span style="box-sizing: border-box;"><span style="box-sizing: border-box; color: #000000; font-family: 微软雅黑; font-size: large;"><strong style="box-sizing: border-box; font-weight: bold;">如果不指定优先级会怎样呢？</strong></span></span></span></span></span></p><p style="box-sizing: border-box; margin: 0px 0px 10px;"><span style="color: #353630;"><span style="font-size: 14px;"><span style="font-family: RionaSans, Helvetica, 微軟雅黑, &apos;"><span style="box-sizing: border-box;"><span style="box-sizing: border-box; font-family: 微软雅黑;">如果在印Log的时候不指定Log的优先级，printk会为这行Log采用默认的优先级。通常系统默认的优先级是4，即warning级别。</span></span></span></span></span></p><p style="box-sizing: border-box; margin: 0px 0px 10px;"><span style="color: #353630;"><span style="font-size: 14px;"><span style="font-family: RionaSans, Helvetica, 微軟雅黑, &apos;"><span style="box-sizing: border-box;"><span style="box-sizing: border-box; font-family: 微软雅黑;">系统默认的优先级可以通过读取/proc文件来得到，如下所示，其中读回来的第2个参数即为未指定Log Level的时候printk默认的Log级别。</span></span></span></span></span></p><p style="box-sizing: border-box; margin: 0px 0px 10px;"><span style="color: #353630;"><span style="font-size: 14px;"><span style="font-family: RionaSans, Helvetica, 微軟雅黑, &apos;"><span style="box-sizing: border-box;"><span style="box-sizing: border-box; background-color: #000000; color: #00ccff; font-family: Courier New;">D:\&gt;adb shell cat /proc/sys/kernel/printk <br clear="none" style="box-sizing: border-box;"/> 6       4       1       6                </span></span></span></span></span></p><p style="box-sizing: border-box; margin: 0px 0px 10px;"><span style="box-sizing: border-box; color: #000000; font-family: 微软雅黑; font-size: large;"><strong style="box-sizing: border-box; font-weight: bold;">/proc/sys/kernel/printk里面的参数意义是什么？</strong></span></p><p style="box-sizing: border-box; margin: 0px 0px 10px;"><span style="color: #353630;"><span style="font-size: 14px;"><span style="box-sizing: border-box; font-family: 微软雅黑;">前面我们使用cat读取了/proc/sys/kernel/printk里面的内容，读取的这4个数字的含义分别是：</span></span></span></p><ol style="box-sizing: border-box; margin-top: 0px; margin-bottom: 10px;"><li style="box-sizing: border-box;"><div style="box-sizing: border-box;"><span style="color: #353630;"><span style="font-size: 14px;"><span style="box-sizing: border-box; font-family: 微软雅黑;">第一个参数表示console log level，即只有优先级大于这个级别的Log才可以打印到Console。</span></span></span></div></li><li style="box-sizing: border-box;"><div style="box-sizing: border-box;"><span style="color: #353630;"><span style="font-size: 14px;"><span style="box-sizing: border-box; font-family: 微软雅黑;">第二个参数表示默认Log级别，即打印Log未明确指定Log level的时候默认采用的Log级别。</span></span></span></div></li><li style="box-sizing: border-box;"><div style="box-sizing: border-box;"><span style="color: #353630;"><span style="font-size: 14px;"><span style="box-sizing: border-box; font-family: 微软雅黑;">第三个参数表示最小可用的Log Level，用于do_syslog()系统调用。</span></span></span></div></li><li style="box-sizing: border-box;"><div style="box-sizing: border-box;"><span style="color: #353630;"><span style="font-size: 14px;"><span style="box-sizing: border-box; font-family: 微软雅黑;">第四个参数表示默认的Console Log Level，未找到使用的地方。</span></span></span></div></li></ol><p style="box-sizing: border-box; margin: 0px 0px 10px;"><span style="box-sizing: border-box; color: #000000; font-family: 微软雅黑; font-size: x-large;"><strong style="box-sizing: border-box; font-weight: bold;">Console Log 输出控制</strong></span></p><p style="box-sizing: border-box; margin: 0px 0px 10px;"><span style="color: #353630;"><span style="font-size: 14px;"><span style="box-sizing: border-box; font-family: 微软雅黑;">从前面的图例以及讲述都有提到，console_loglevel 决定了哪些级别的log可以输出到console。而console_loglevel的值可以通过 /proc/sys/kernel/printk 来读取出来。</span></span></span></p><p style="box-sizing: border-box; margin: 0px 0px 10px;"><span style="color: #353630;"><span style="font-size: 14px;"><span style="box-sizing: border-box; font-family: 微软雅黑;">除此之外，我们还可以通过/proc/sys/kernel/printk设置console_loglevel来达到控制 console log 输出的目的，方法如下（修改这个参数需要有root权限）：</span></span></span></p><p style="box-sizing: border-box; margin: 0px 0px 10px;"><span style="color: #353630;"><span style="font-size: 14px;"><span style="box-sizing: border-box; background-color: #000000; color: #00ccff; font-family: Courier New;">D:\&gt;adb shell cat /proc/sys/kernel/printk         <br clear="none" style="box-sizing: border-box;"/> 6       4       1       6                         <br clear="none" style="box-sizing: border-box;"/><span style="box-sizing: border-box; color: #ffff00;">D:\&gt;adb shell &quot;echo 8 &gt; /proc/sys/kernel/printk&quot; </span> <br clear="none" style="box-sizing: border-box;"/> D:\&gt;adb shell cat /proc/sys/kernel/printk         <br clear="none" style="box-sizing: border-box;"/> 8       4       1       6                        </span></span></span></p><p style="box-sizing: border-box; margin: 0px 0px 10px;"><span style="color: #353630;"><span style="font-size: 14px;"><span style="box-sizing: border-box; font-family: 微软雅黑;">上面黄色一行命令将console_loglevel设置8，即所有级别的log（因为定义的最低优先级的Log Level是7）都可以输出到console。当然通过这个命令也可以禁止一些低优先级的log输出到console，只要将console_loglevel的值设置小一些即可。</span></span></span></p><p style="box-sizing: border-box; margin: 0px 0px 10px;"><span style="box-sizing: border-box; color: #000000; font-family: 微软雅黑; font-size: x-large;"><strong style="box-sizing: border-box; font-weight: bold;">UART Console 的控制</strong></span></p><p style="box-sizing: border-box; margin: 0px 0px 10px;"><span style="color: #353630;"><span style="font-size: 14px;"><span style="box-sizing: border-box; font-family: 微软雅黑;">对于UART Console单独设置了开关主要是因为其对系统性能的影响比较大，因为UART Console是同步的方式通过硬件以固定的传输速率印Log，如果Log量比较大的时候，印Log不可避免会花费系统较多的时间，这样就会引起较多的Performance问题，如UI卡顿等。另外由于往UART Console印Log会关闭中断，严重的时候可能会引起系统无法响应或者重启。</span></span></span></p><p style="box-sizing: border-box; margin: 0px 0px 10px;"><span style="color: #353630;"><span style="font-size: 14px;"><span style="box-sizing: border-box; font-family: 微软雅黑;">也正因为此，我们在user版本上面默认是关闭UART Console Log的。</span></span></span></p><p style="box-sizing: border-box; margin: 0px 0px 10px;"><span style="color: #353630;"><span style="font-size: 14px;"><span style="box-sizing: border-box; font-family: 微软雅黑;">那么如何在runtime控制UART Console 的打开和关闭呢？可以使用如下命令（执行该命令需要有root权限）：</span></span></span></p><p style="box-sizing: border-box; margin: 0px 0px 10px;"><span style="color: #353630;"><span style="font-size: 14px;"><span style="box-sizing: border-box; background-color: #000000; color: #00ccff; font-family: Courier New;">D:\&gt;adb shell &quot;echo 1 &gt; /sys/module/printk/parameters/disable_uart&quot;   <br clear="none" style="box-sizing: border-box;"/> D:\&gt;adb shell &quot;echo 0 &gt; /sys/module/printk/parameters/disable_uart&quot;  </span></span></span></p><p style="box-sizing: border-box; margin: 0px 0px 10px;"><span style="color: #353630;"><span style="font-size: 14px;"><span style="box-sizing: border-box; font-family: 微软雅黑;">通过将disable_uart参数设置为1来关闭UART Console，反之通过将disable_uart参数设置为0来打开UART Console。<br clear="none" style="box-sizing: border-box;"/></span></span></span></p></div></div></div></div></div></div></div></div></div></div></div></div><div style="box-sizing: border-box; clear: both; position: relative; bottom: 0px; left: 0px; width: 1841px;"><div style="box-sizing: border-box; margin-left: auto; margin-right: auto; width: 1601.66px; padding: 0px 33.125px; overflow: auto;"><span style="color: #353630;"><span style="font-size: 14px;"><span style="font-family: RionaSans, Helvetica, 微軟雅黑, &apos;"><img src="https://onlinesso.mediatek.com/_layouts/15/mol/ui/ext/images/footerLogo.png" style="box-sizing: border-box; border: 0px; -webkit-tap-highlight-color: transparent; vertical-align: text-top; max-width: 100%; float: left; margin-right: 10px; margin-top: 2px; width: auto;"></img></span></span></span><p style="box-sizing: border-box; margin: 0px; float: left;"><span style="color: #353630;"><span style="font-size: 14px;"><span style="font-family: RionaSans, Helvetica, 微軟雅黑, &apos;">c 2014 MediaTek Inc. All Rights Reserved</span></span></span></p><ul style="box-sizing: border-box; margin: 0px; padding: 0px; float: right; list-style-type: none; overflow: auto;"><li style="box-sizing: border-box; float: left;"><span style="color: #353630;"><span style="font-size: 14px;"><span style="font-family: RionaSans, Helvetica, 微軟雅黑, &apos;"><a href="https://onlinesso.mediatek.com/_layouts/15/mol/topic/ext/Topic.aspx?mappingId=844fde79-3e58-4f1f-bba7-cf0be27cee45#" shape="rect" style="box-sizing: border-box; color: #ffffff; text-decoration: underline; margin: 0.2em; padding-right: 0.5em; border-right-width: 2px; border-right-style: solid; border-right-color: #ffffff; text-transform: capitalize; font-weight: bolder; font-size: 11pt; background-color: transparent;">Legal Notice</a></span></span></span><br clear="none"/></li><li style="box-sizing: border-box; float: left;"><span style="color: #353630;"><span style="font-size: 14px;"><span style="font-family: RionaSans, Helvetica, 微軟雅黑, &apos;"><a href="https://onlinesso.mediatek.com/_layouts/15/mol/topic/ext/Topic.aspx?mappingId=844fde79-3e58-4f1f-bba7-cf0be27cee45#" shape="rect" style="box-sizing: border-box; color: #ffffff; text-decoration: underline; margin: 0.2em; padding-right: 0.5em; border-right-style: none; text-transform: capitalize; font-weight: bolder; font-size: 11pt; background-color: transparent;">Privacy Policy</a></span></span></span><br clear="none"/></li></ul></div></div></div></span>
</div></body></html> 