<html>
<head>
  <title>45.MTK修改听筒音量，拨号键盘音量，开关机音量调整</title>
  <basefont face="Microsoft YaHei" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/301769 (zh-CN); Windows/6.3.9600 (Win64);"/>
  <style>
    body, td {
      font-family: Microsoft YaHei;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="833"/>
<h1>45.MTK修改听筒音量，拨号键盘音量，开关机音量调整</h1>

<div>
<span><div><p style="margin: 0px; padding: 0px; color: rgb(85, 85, 85); font-family: &apos;microsoft yahei&apos;; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="font-size: 32pt; font-family: 標楷體;"><strong>工模调节 </strong></span><br/></p><p style="margin: 0px; padding: 0px; color: rgb(85, 85, 85); font-family: &apos;microsoft yahei&apos;; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"></p><div style="color: rgb(85, 85, 85); font-family: &apos;microsoft yahei&apos;; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="color: rgb(237, 109, 0);">▪</span>进入EM模式<span style="color: red;">（*</span><span style="color: red;">#</span><span style="color: red;">*</span><span style="color: red;">#3646633#</span><span style="color: red;">*</span><span style="color: red;">#</span><span style="color: red;">*</span><span style="color: red;">)</span>,您将看到不同模式（听筒、耳机、外放、耳机同时外放）下的音频参数。</div><img src="45.MTK修改听筒音量，拨号键盘音量，开关机音量调整_files/Image.png" type="image/png" style="border: none; color: rgb(85, 85, 85); font-family: &apos;microsoft yahei&apos;; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); height: auto;"/><br style="color: rgb(85, 85, 85); font-family: &apos;microsoft yahei&apos;; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"/><p style="margin: 0px; padding: 0px; color: rgb(85, 85, 85); font-family: &apos;microsoft yahei&apos;; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"></p><p style="margin: 0px; padding: 0px; color: rgb(85, 85, 85); font-family: &apos;microsoft yahei&apos;; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="font-size: 32pt; font-family: 標楷體;"><strong><img src="45.MTK修改听筒音量，拨号键盘音量，开关机音量调整_files/Image [1].png" type="image/png" style="border: none; height: auto;"/><br/></strong></span></p><p style="margin: 0px; padding: 0px; color: rgb(85, 85, 85); font-family: &apos;microsoft yahei&apos;; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="font-size: 32pt; font-family: 標楷體;"><strong><img src="45.MTK修改听筒音量，拨号键盘音量，开关机音量调整_files/Image [2].png" type="image/png" style="border: none; height: auto;"/><br/></strong></span></p><p style="margin: 0px; padding: 0px; color: rgb(85, 85, 85); font-family: &apos;microsoft yahei&apos;; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><br/></p><p style="margin: 0px; padding: 0px; color: rgb(85, 85, 85); font-family: &apos;microsoft yahei&apos;; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="font-size: 24pt; font-family: Arial;">audio_ver1_volume_custom_default.h</span></p><div style="margin: 0px; padding: 0px; font-family: &apos;microsoft yahei&apos;; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><div><span style="color: rgb(26, 173, 224);"><span style="font-size: 16px;"><span style="font-family: Arial;">(vendor/mediatek/proprietary/custom/common/cgen/cfgdefault/<span style="color: rgb(255, 0, 0);">audio_ver1_volume_custom_default.h</span></span><span style="font-family: Arial;">)</span></span></span></div></div><div style="margin: 0px; padding: 0px; color: rgb(85, 85, 85); font-family: &apos;microsoft yahei&apos;; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); font-size: 15px;"><div><span style="color: rgb(237, 109, 0);">#ifndef AUDIO_VER1_VOLUME_CUSTOM_DEFAULT_H</span></div><div><span style="color: rgb(237, 109, 0);">#define AUDIO_VER1_VOLUME_CUSTOM_DEFAULT_H</span></div><div><span style="color: rgb(237, 109, 0);"><br/></span></div><div><span style="color: rgb(237, 109, 0);">#define VER1_AUD_VOLUME_RING \</span></div><div><span style="color: rgb(237, 109, 0);">    32,48,64,80,96,112,128,144,160,176,192,208,224,240,255,\</span></div><div><span style="color: rgb(237, 109, 0);">    32,48,64,80,96,112,128,144,160,176,192,208,224,240,255,\</span></div><div><span style="color: rgb(237, 109, 0);">    128,136,144,152,160,168,176,184,192,200,212,224,236,248,255,\</span></div><div><span style="color: rgb(237, 109, 0);">    128,136,144,152,160,168,176,184,192,200,212,224,236,248,255</span></div><div><span style="color: rgb(237, 109, 0);"><br/></span></div><div><span style="color: rgb(237, 109, 0);">#define VER1_AUD_VOLUME_SIP \</span></div><div><span style="color: rgb(237, 109, 0);">    112,136,160,184,208,232,255,0,0,0,0,0,0,0,0,\</span></div><div><span style="color: rgb(237, 109, 0);">    112,136,160,184,208,232,255,0,0,0,0,0,0,0,0,\</span></div><div><span style="color: rgb(237, 109, 0);">    112,136,160,184,208,232,255,0,0,0,0,0,0,0,0,\</span></div><div><span style="color: rgb(237, 109, 0);">    0,43,85,128,171,213,255,0,0,0,0,0,0,0,0</span></div><div><span style="color: rgb(237, 109, 0);"><br/></span></div><div><span style="color: rgb(237, 109, 0);">#define VER1_AUD_VOLUME_MIC \</span></div><div><span style="color: rgb(237, 109, 0);">     64,112,192,144,192,192,184,184,184,184,184,0,0,0,0,\</span></div><div><span style="color: rgb(237, 109, 0);">    255,192,192,180,192,192,196,184,184,184,184,0,0,0,0,\</span></div><div><span style="color: rgb(237, 109, 0);">    255,208,208,180,255,208,196,0,0,0,0,0,0,0,0,\</span></div><div><span style="color: rgb(237, 109, 0);">    255,208,208,164,255,208,172,0,0,0,0,0,0,0,0</span></div><div><span style="color: rgb(237, 109, 0);"><br/></span></div><div><span style="color: rgb(237, 109, 0);">#define VER1_AUD_VOLUME_FM \</span></div><div><span style="color: rgb(237, 109, 0);">    32,48,64,80,96,112,128,144,160,176,192,208,224,255,255,\</span></div><div><span style="color: rgb(237, 109, 0);">    88,100,112,124,136,148,160,172,184,196,208,220,232,244,255,\</span></div><div><span style="color: rgb(237, 109, 0);">    68,80,92,104,116,128,140,152,168,176,188,200,212,232,248,\</span></div><div><span style="color: rgb(237, 109, 0);">    32,48,64,80,96,112,128,144,160,176,192,208,224,255,255</span></div><div><span style="color: rgb(237, 109, 0);"><br/></span></div><div><span style="color: rgb(237, 109, 0);">#define VER1_AUD_VOLUME_SPH \</span></div><div><span style="color: rgb(237, 109, 0);">    40,52,64,76,88,100,112,0,0,0,0,0,0,0,0,\</span></div><div><span style="color: rgb(237, 109, 0);">    40,52,64,76,88,100,112,0,0,0,0,0,0,0,0,\</span></div><div><span style="color: rgb(237, 109, 0);">    48,60,72,84,96,108,120,0,0,0,0,0,0,0,0,\</span></div><div><span style="color: rgb(237, 109, 0);">    40,52,64,76,88,100,112,0,0,0,0,0,0,0,0</span></div><div><span style="color: rgb(237, 109, 0);"><br/></span></div><div><span style="color: rgb(237, 109, 0);">#define VER1_AUD_VOLUME_SID \</span></div><div><span style="color: rgb(237, 109, 0);">    0,0,16,0,0,0,0,0,0,0,0,0,0,0,0,\</span></div><div><span style="color: rgb(237, 109, 0);">    0,0,32,0,0,0,0,0,0,0,0,0,0,0,0,\</span></div><div><span style="color: rgb(237, 109, 0);">    0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,\</span></div><div><span style="color: rgb(237, 109, 0);">    0,0,0,0,0,0,0,0,0,0,0,0,0,0,0</span></div><div><span style="color: rgb(237, 109, 0);"><br/></span></div><div><span style="color: rgb(237, 109, 0);">#define VER1_AUD_VOLUME_MEDIA \</span></div><div><span style="color: rgb(237, 109, 0);">    32,48,64,80,96,112,160,144,160,176,192,208,224,240,255,\</span></div><div><span style="color: rgb(237, 109, 0);">    88,100,112,124,136,148,160,172,184,196,208,220,232,244,255,\</span></div><div><span style="color: rgb(237, 109, 0);">    68,80,92,104,116,128,140,152,168,176,188,200,212,232,248,\</span></div><div><span style="color: rgb(237, 109, 0);">    32,48,64,80,96,112,128,144,160,176,192,208,224,240,255</span></div><div><span style="color: rgb(237, 109, 0);"><br/></span></div><div><span style="color: rgb(237, 109, 0);">#define VER1_AUD_VOLUME_MATV \</span></div><div><span style="color: rgb(237, 109, 0);">    32,48,64,80,96,112,128,144,160,176,192,208,224,240,255,\</span></div><div><span style="color: rgb(237, 109, 0);">    88,100,112,124,136,148,160,172,184,196,208,220,232,244,255,\</span></div><div><span style="color: rgb(237, 109, 0);">    68,80,92,104,116,128,140,152,168,176,188,200,212,232,248,\</span></div><div><span style="color: rgb(237, 109, 0);">    32,48,64,80,96,112,128,144,160,176,192,208,224,240,255</span></div><div><span style="color: rgb(237, 109, 0);"><br/></span></div><div><span style="color: rgb(237, 109, 0);">#define VER1_AUD_NORMAL_VOLUME_DEFAULT \</span></div><div><span style="color: rgb(237, 109, 0);">    128,128,128,128,128,128</span></div><div><span style="color: rgb(237, 109, 0);"><br/></span></div><div><span style="color: rgb(237, 109, 0);">#define VER1_AUD_HEADSER_VOLUME_DEFAULT \</span></div><div><span style="color: rgb(237, 109, 0);">    124,148,148,148,148,148</span></div><div><span style="color: rgb(237, 109, 0);"><br/></span></div><div><span style="color: rgb(237, 109, 0);">#define VER1_AUD_SPEAKER_VOLUME_DEFAULT \</span></div><div><span style="color: rgb(237, 109, 0);">    160,120,120,120,120,120</span></div><div><span style="color: rgb(237, 109, 0);"><br/></span></div><div><span style="color: rgb(237, 109, 0);">#define VER1_AUD_HEADSETSPEAKER_VOLUME_DEFAULT \</span></div><div><span style="color: rgb(237, 109, 0);">    112,160,132,132,132,132,132,132</span></div><div><span style="color: rgb(237, 109, 0);"><br/></span></div><div><span style="color: rgb(237, 109, 0);">#define VER1_AUD_EXTAMP_VOLUME_DEFAULT \</span></div><div><span style="color: rgb(237, 109, 0);">    132,132,132,132,132,132</span></div><div><span style="color: rgb(237, 109, 0);"><br/></span></div><div><span style="color: rgb(30, 204, 255);">#define VER1_AUD_VOLUME_LEVEL_DEFAULT \</span></div><div><span style="color: rgb(30, 204, 255);">    15,7,15,15,7,7,7,15,15</span></div><div><span style="color: rgb(237, 109, 0);"><br/></span></div><div><span style="color: rgb(237, 109, 0);">/* mic volume setting for 2G/3G HAC mode */    </span></div><div><span style="color: rgb(237, 109, 0);">#define DEFAULT_VER1_AUD_VOLUME_MIC_HAC \</span></div><div><span style="color: rgb(237, 109, 0);">     64,112,192,144,192,192,184,184,184,184,184,0,0,0,0</span></div><div><span style="color: rgb(237, 109, 0);"><br/></span></div><div><span style="color: rgb(237, 109, 0);">/* speech dl volume setting for 2G/3G HAC mode */    </span></div><div><span style="color: rgb(237, 109, 0);">#define DEFAULT_VER1_AUD_VOLUME_SPH_HAC \</span></div><div><span style="color: rgb(237, 109, 0);">    40,52,64,76,88,100,112,0,0,0,0,0,0,0,0</span></div><div><span style="color: rgb(237, 109, 0);"><br/></span></div><div><span style="color: rgb(237, 109, 0);">/* sidetone volume setting for 2G/3G HAC mode */    </span></div><div><span style="color: rgb(237, 109, 0);">#define DEFAULT_VER1_AUD_VOLUME_SID_HAC \</span></div><div><span style="color: rgb(237, 109, 0);">    0,0,16,0,0,0,0,0,0,0,0,0,0,0,0</span></div><div><span style="color: rgb(237, 109, 0);"><br/></span></div><div><span style="color: rgb(237, 109, 0);">#endif</span></div><div><span style="color: rgb(237, 109, 0);">//------------------------------------------------------------------------</span></div></div><div style="color: rgb(85, 85, 85); font-family: &apos;microsoft yahei&apos;; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><div><span style="color: rgb(237, 109, 0);">n</span>Speech Volumecustomize</div></div><div style="color: rgb(85, 85, 85); font-family: &apos;microsoft yahei&apos;; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="color: rgb(237, 109, 0);">Ø</span>当AudioSystem处于<span style="color: red;">MODE_IN_CALL</span><span style="color: red;">模式</span> .</div><div style="color: rgb(85, 85, 85); font-family: &apos;microsoft yahei&apos;; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="color: rgb(237, 109, 0);">Ø</span>输出设备有三种Normal, Headset , Hands-free mode</div><div style="color: rgb(85, 85, 85); font-family: &apos;microsoft yahei&apos;; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="color: rgb(237, 109, 0);">Ø</span>调节的是模拟增益</div><div style="color: rgb(85, 85, 85); font-family: &apos;microsoft yahei&apos;; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="font-size: 32pt; font-family: 標楷體;"><strong>开关机音量调整</strong></span><br/></div><div style="font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><div><span style="color: rgb(85, 85, 85);"><span style="font-size: 15px;"><span style="font-family: &apos;microsoft yahei&apos;;"><span style="color: rgb(237, 109, 0);">▪</span>如果想改变开关机音量,有两种方式</span></span></span></div><div><span style="color: rgb(85, 85, 85);"><span style="font-size: 15px;"><span style="font-family: &apos;microsoft yahei&apos;;">如果已经定义：</span></span></span></div><div><span style="color: rgb(255, 0, 0);">./vendor/mediatek/proprietary/custom/wisky8735_3g_h/hal/audioflinger/audio/Audio_Customization_Common.h</span></div><div><span style="color: rgb(255, 0, 0);">54: #define BOOT_ANIMATION_VOLUME       (0.25)</span></div><div><span style="color: rgb(255, 0, 0);">修改Audio_Customization_Common.h</span></div><div><span style="color: rgb(255, 0, 0);"><br/></span></div><div>如果没定义：</div><div><span style="color: rgb(85, 85, 85);"><span style="font-size: 15px;"><span style="font-family: &apos;microsoft yahei&apos;;">–第一是把AudioMtkPolicyManager.cpp</span></span></span></div><div><span style="color: rgb(85, 85, 85);"><span style="font-size: 15px;"><span style="font-family: &apos;microsoft yahei&apos;;"><span style="color: rgb(237, 109, 0);">•</span><b>./vendor/mediatek/proprietary/platform/common/hardware/audio/legacy/policy_driver/AudioMTKPolicyManager.cpp:74:</b></span></span></span></div><div><span style="color: rgb(85, 85, 85);"><span style="font-size: 15px;"><span style="font-family: &apos;microsoft yahei&apos;;"><span style="color: rgb(237, 109, 0);">•</span>#define <span style="color: red;">BOOT_ANIMATION_VOLUME</span>(0.25)  修改此值，最大为1</span></span></span></div><div><span style="color: rgb(85, 85, 85);"><span style="font-size: 15px;"><span style="font-family: &apos;microsoft yahei&apos;;">–第二是修改代码</span></span></span></div><div><span style="color: rgb(85, 85, 85);"><span style="font-size: 15px;"><span style="font-family: &apos;microsoft yahei&apos;;"><span style="color: rgb(237, 109, 0);">•</span>BootAnimation.cpp (alps/frameworks/base/cmds/bootanimation)</span></span></span></div><div><span style="color: rgb(85, 85, 85);"><span style="font-size: 15px;"><span style="font-family: &apos;microsoft yahei&apos;;"><span style="color: rgb(237, 109, 0);">•</span>在bool BootAnimation::threadLoop()里mediastatus = mediaplayer-&gt;start()前面 增加下面这行代码</span></span></span></div><div><span style="color: rgb(85, 85, 85);"><span style="font-size: 15px;"><span style="font-family: &apos;microsoft yahei&apos;;"><span style="color: rgb(237, 109, 0);">•</span><span style="color: red;">mediaplayer</span><span style="color: red;">-&gt;</span><span style="color: red;">setVolume</span><span style="color: red;">(</span><span style="color: red;">leftVolume,rightVolume</span><span style="color: red;">);</span>//适当调节音量值,参数范围0-1,默认是1</span></span></span></div><div><span style="color: rgb(85, 85, 85);"><span style="font-size: 15px;"><span style="font-family: &apos;microsoft yahei&apos;;">–第三种</span></span></span></div><div><span style="color: rgb(85, 85, 85);"><span style="font-size: 15px;"><span style="font-family: &apos;microsoft yahei&apos;;"><span style="color: rgb(237, 109, 0);">•</span>更换开关机资源文件</span></span></span></div><span style="color: rgb(85, 85, 85);"><span style="font-size: 32pt; font-family: 宋体;"><strong>拨号键盘音量</strong></span><span style="font-size: 32pt; font-family: 標楷體;"><strong>（</strong></span><span style="font-size: 32pt; font-family: Arial;"><strong>DTMF</strong></span><span style="font-size: 32pt; font-family: 標楷體;"><strong>）</strong></span></span></div><div style="color: rgb(85, 85, 85); font-family: &apos;microsoft yahei&apos;; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><div><span style="color: rgb(237, 109, 0);">▪</span>方法一，DialpadFragment.java</div><div>–Alps/packages/apps/contacts/src/com/android/contacts/dialpad/</div><div>–private static final int <span style="color: red;">TONE_RELATIVE_VOLUME</span> = 80; 最大可到100，最小是0</div><div><span style="color: rgb(237, 109, 0);">▪</span>方法二，在代码中AudioMTKPolicyManager.cpp</div><div>–Alps/mediatek/platform/common/hardware/audio</div><div>–Static unsigned char audiovolume_dtmf[][] </div><div><br/></div><div>详细文件参考</div><div> <a href="http://download.csdn.net/detail/wds1181977/8227493" style="text-decoration: none; color: rgb(12, 137, 207);" target="_blank">http://download.csdn.net/detail/wds1181977/8227493</a></div></div></div></span>
</div></body></html> 