<html>
<head>
  <title>53 获取音频缩略图</title>
  <basefont face="Microsoft YaHei" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/301769 (zh-CN); Windows/6.3.9600 (Win64);"/>
  <style>
    body, td {
      font-family: Microsoft YaHei;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="654"/>
<h1>53 获取音频缩略图</h1>

<div>
<span><div align="left"><font color="#3F5FBF" face="Consolas"><span style="font-size:12pt">/**</span></font></div><div align="left"><font color="#3F5FBF" face="Consolas"><span style="font-size:12pt">      * 获取音频缩略图</span></font></div><div align="left"><font color="#3F5FBF" face="Consolas"><span style="font-size:12pt">      *</span></font> <font color="#7F9FBF" face="Consolas"><span style="font-size:12pt"><b>@param</b></span></font> <font color="#3F5FBF" face="Consolas"><span style="font-size:12pt">path</span></font></div><div align="left"><font color="#3F5FBF" face="Consolas"><span style="font-size:12pt">      *</span></font> <font color="#7F9FBF" face="Consolas"><span style="font-size:12pt"><b>@return</b></span></font></div><div align="left"><font color="#3F5FBF" face="Consolas"><span style="font-size:12pt">      */</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">     </span></font><font color="#7F0055" face="Consolas"><span style="font-size:12pt"><b>private</b></span></font> <font face="Consolas"><span style="font-size:12pt">Bitmap creatMusicThumbnail(String</span></font> <font color="#6A3E3E" face="Consolas"><span style="font-size:12pt">path</span></font><font face="Consolas"><span style="font-size:12pt">){</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">           Bitmap</span></font> <font color="#6A3E3E" face="Consolas"><span style="font-size:12pt">bitmap</span></font><font face="Consolas"><span style="font-size:12pt">=</span></font> <font color="#7F0055" face="Consolas"><span style="font-size:12pt"><b>null</b></span></font><font face="Consolas"><span style="font-size:12pt">;</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">           </span></font> <font color="#3F7F5F" face="Consolas"><span style="font-size:12pt">//获取多媒体文件元数据的类</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">           MediaMetadataRetriever</span></font> <font color="#6A3E3E" face="Consolas"><span style="font-size:12pt">retriever</span></font><font face="Consolas"><span style="font-size:12pt">=</span></font> <font color="#7F0055" face="Consolas"><span style="font-size:12pt"><b>new</b></span></font> <font face="Consolas"><span style="font-size:12pt">MediaMetadataRetriever();</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">           </span></font> <font color="#7F0055" face="Consolas"><span style="font-size:12pt"><b>try</b></span></font> <font face="Consolas"><span style="font-size:12pt">{</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">                </span></font> <font color="#3F7F5F" face="Consolas"><span style="font-size:12pt">//设置数据源</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">                </span></font> <font color="#6A3E3E" face="Consolas"><span style="font-size:12pt">retriever</span></font><font face="Consolas"><span style="font-size:12pt">.setDataSource(</span></font> <font color="#6A3E3E" face="Consolas"><span style="font-size:12pt">path</span></font><font face="Consolas"><span style="font-size:12pt">);</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">                </span></font> <font color="#3F7F5F" face="Consolas"><span style="font-size:12pt">//得到字节型的数据</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">                </span></font> <font color="#7F0055" face="Consolas"><span style="font-size:12pt"><b>byte</b></span></font><font face="Consolas"><span style="font-size:12pt">[]</span></font> <font color="#6A3E3E" face="Consolas"><span style="font-size:12pt">embeddedPicture</span></font> <font face="Consolas"><span style="font-size:12pt">=</span></font> <font color="#6A3E3E" face="Consolas"><span style="font-size:12pt">retriever</span></font><font face="Consolas"><span style="font-size:12pt">.getEmbeddedPicture();</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">                </span></font> <font color="#3F7F5F" face="Consolas"><span style="font-size:12pt">//字节转换成图片</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">                </span></font> <font color="#6A3E3E" face="Consolas"><span style="font-size:12pt">bitmap</span></font><font face="Consolas"><span style="font-size:12pt">=BitmapFactory.</span> <span style="font-size:12pt"><i>decodeByteArray</i></span><span style="font-size:12pt">(</span></font><font color="#6A3E3E" face="Consolas"><span style="font-size:12pt">embeddedPicture</span></font><font face="Consolas"><span style="font-size:12pt">, 0,</span></font> <font color="#6A3E3E" face="Consolas"><span style="font-size:12pt">embeddedPicture</span></font><font face="Consolas"><span style="font-size:12pt">.</span></font><font color="#0000C0" face="Consolas"><span style="font-size:12pt">length</span></font> <font face="Consolas"><span style="font-size:12pt">);</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">           }</span></font> <font color="#7F0055" face="Consolas"><span style="font-size:12pt"><b>catch</b></span></font> <font face="Consolas"><span style="font-size:12pt">(Exception</span></font> <font color="#6A3E3E" face="Consolas"><span style="font-size:12pt">e</span></font><font face="Consolas"><span style="font-size:12pt">) {</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">                </span></font> <font color="#3F7F5F" face="Consolas"><span style="font-size:12pt">//</span></font> <font color="#7F9FBF" face="Consolas"><span style="font-size:12pt"><b>TODO</b></span></font> <font color="#3F7F5F" face="Consolas"><span style="font-size:12pt">Auto-generated catch block</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">                </span></font> <font color="#6A3E3E" face="Consolas"><span style="font-size:12pt">e</span></font><font face="Consolas"><span style="font-size:12pt">.printStackTrace();</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">           }</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">           </span></font> <font color="#7F0055" face="Consolas"><span style="font-size:12pt"><b>finally</b></span></font> <font face="Consolas"><span style="font-size:12pt">{</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">                </span></font> <font color="#7F0055" face="Consolas"><span style="font-size:12pt"><b>if</b></span></font><font face="Consolas"><span style="font-size:12pt">(</span></font> <font color="#6A3E3E" face="Consolas"><span style="font-size:12pt">retriever</span></font><font face="Consolas"><span style="font-size:12pt">!=</span></font> <font color="#7F0055" face="Consolas"><span style="font-size:12pt"><b>null</b></span></font><font face="Consolas"><span style="font-size:12pt">){</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">                     </span></font> <font color="#7F0055" face="Consolas"><span style="font-size:12pt"><b>try</b></span></font> <font face="Consolas"><span style="font-size:12pt">{</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">                           </span></font> <font color="#6A3E3E" face="Consolas"><span style="font-size:12pt">retriever</span></font><font face="Consolas"><span style="font-size:12pt">.release();</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">                     }</span></font> <font color="#7F0055" face="Consolas"><span style="font-size:12pt"><b>catch</b></span></font> <font face="Consolas"><span style="font-size:12pt">(Exception</span></font> <font color="#6A3E3E" face="Consolas"><span style="font-size:12pt">e</span></font><font face="Consolas"><span style="font-size:12pt">) {</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">                           </span></font> <font color="#3F7F5F" face="Consolas"><span style="font-size:12pt">//</span></font> <font color="#7F9FBF" face="Consolas"><span style="font-size:12pt"><b>TODO</b></span></font> <font color="#3F7F5F" face="Consolas"><span style="font-size:12pt">Auto-generated catch block</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">                           </span></font> <font color="#6A3E3E" face="Consolas"><span style="font-size:12pt">e</span></font><font face="Consolas"><span style="font-size:12pt">.printStackTrace();</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">                     }</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">                }</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">           }</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">           </span></font> <font color="#7F0055" face="Consolas"><span style="font-size:12pt"><b>return</b></span></font> <font color="#6A3E3E" face="Consolas"><span style="font-size:12pt">bitmap</span></font><font face="Consolas"><span style="font-size:12pt">;</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">     }</span></font></div><div align="left"><span style="font-size: 12pt;"><span style="font-family: Consolas;"><br/></span></span></div><div align="left"><span style="font-size: 12pt;"><span style="font-family: Consolas;"><br/></span></span></div><div align="left"><span style="font-size: 12pt;"><span style="font-family: Consolas;">然后将Path做一下对比，设置到相应Item的界面上即可。</span></span></div></span>
</div></body></html> 