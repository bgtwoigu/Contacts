<html>
<head>
  <title>laozhu1124</title>
  <basefont face="Microsoft YaHei" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/301769 (zh-CN); Windows/6.3.9600 (Win64);"/>
  <style>
    body, td {
      font-family: Microsoft YaHei;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="1657"/>
<h1>laozhu1124</h1>

<div>
<span><div><a name="top"></a><div><a href="http://www.cnblogs.com/manuosex/">laozhu1124</a></div><div><div><h2><a href="http://www.cnblogs.com/manuosex/p/5276922.html">Android 控件架构</a></h2><div><p>　　如果说Android上的app是一个有血有肉的人的话，那么人靠衣装马靠鞍，那么控件就是把app装扮的漂漂亮亮的“衣服”。那么安卓的控件到底是如何架构，又是如何渲染的了。</p><p>　　无论是什么控件，在Android中控件只有两种，一种就是View，另一种是ViewGroup。ViewGroup控件组，一个控件的百宝箱，可以包含各种各样的控件组，它不仅能够包含控件还能够管理着控件。通过ViewGroup，整个控件就至上而下的形成了树形结构，即我们通常所说的控件树；父控件负责相应子控件的绘制与测量，并向其传递交互事件。安卓系统怎么准确无误的找到每一个控件？只需要调用findViewbyid的方法就能够按照深度优先的方法找到每一个控件了。在每个控件树最顶端，都站立了一个Viewparent对象，这个对象也是这颗控件树的核心，所有的交互管理事件都是由这个大大负责统一分配和调度，从而起这一个整体宏观调控的效果。一个控件树架构如图所示：</p><p><img src="laozhu1124_files/Image.png" type="image/png"/></p><p>　　做过Android开发都知道，要使一个activity显示相应的布局文件，都必须要setContentView。我们要看一下setContentView背后到底发生了什么，Android又是如何将其渲染出来的了。要解答这些问题，我们还是要了解Android的界面架构图。具体的架构图如图所示：</p><p><img src="laozhu1124_files/Image [1].png" type="image/png"/></p><p>　　通过上图所示，我们可以得出这样的结论。</p><p>　　①每个activity都有一个window对象。</p><p>　　②而每一个window对象通常是由PhoneWindow来实现。</p><p>　　③每个PhoneWindow对象包含DecorView这个根视图对象，将其视图展示都是通过这个对象显示到PhoneWindow上。</p><p>　　④而DecorView被一分为二，一个是TitleView，一个ContentView，TitleView显示相应的标题，ContentView显示具体布局，这些应该大家很熟悉。</p><p>　　这样架构也可以建立一个上文提到的视图树，这颗视图树长成这个样子：</p><p> <img src="laozhu1124_files/Image [2].png" type="image/png"/></p><p>　　这样控件树，能够帮我们解答这样一个问题为什么requestWindowFeature（）一定要在setContentView之前调用才能起效。这是由于TitleBar下面才是ContentView，在ContentView之后设置，这时，只能有ContentView。当程序在oncreate方法调用setcontentView后会调用onResume方法，此时系统会把整个DecorView添加到PhoneWindow中，最终将视图显示出来。</p></div><div>标签: <a href="http://www.cnblogs.com/manuosex/tag/android/">android</a>, <a href="http://www.cnblogs.com/manuosex/tag/UI/">UI</a></div><div><a>好文要顶</a> <a>关注我</a> <a>收藏该文</a><a href="http://msg.cnblogs.com/send/laozhu1124" target="_blank">联系我</a> <a title="分享至新浪微博"><img src="laozhu1124_files/Image [3].png" type="image/png"/></a> <a title="分享至微信"><img src="laozhu1124_files/Image [4].png" type="image/png"/></a></div><div><a href="http://home.cnblogs.com/u/manuosex/" target="_blank"><img src="laozhu1124_files/Image [5].png" type="image/png"/></a><div><a href="http://home.cnblogs.com/u/manuosex/">laozhu1124</a><br/><a href="http://home.cnblogs.com/u/manuosex/followees">关注 - 16</a><br/><a href="http://home.cnblogs.com/u/manuosex/followers">粉丝 - 415</a></div></div><div><a>+加关注</a></div><div>1</div><div>1</div><div>(请您对文章做出评价)</div><div><a href="http://www.cnblogs.com/manuosex/p/5275152.html">«</a> 上一篇：<a href="http://www.cnblogs.com/manuosex/p/5275152.html" title="发布于2016-03-14 14:34">Android 5.x特性概览五</a><br/></div><p>posted on 2016-03-15 08:57 <a href="http://www.cnblogs.com/manuosex/">laozhu1124</a> 阅读(458) 评论(2) <a href="http://i.cnblogs.com/EditPosts.aspx?postid=5276922" rel="nofollow">编辑</a> <a href="http://www.cnblogs.com/manuosex/p/5276922.html#">收藏</a></p></div><a name="!comments"></a><div><a name="评论"></a><div><h3>评论</h3><h4><a href="http://www.cnblogs.com/manuosex/p/5276922.html#3381708">#1楼</a><a name="3381708"></a> 2016-03-15 14:36 <a href="http://www.cnblogs.com/graphics/" target="_blank">zdd</a> <a href="http://msg.cnblogs.com/send/zdd" title="发送站内短消息"> </a></h4><div>最后一段完全没看懂，感觉写得有点乱。</div><div><a>支持(0)</a><a>反对(0)</a></div><span style="display:none;">http://pic.cnblogs.com/face/u64257.jpg?id=21102348</span>   
<h4><a href="http://www.cnblogs.com/manuosex/p/5276922.html#3381721">#2楼</a><a name="3381721"></a>[楼主]<span style="display:none;">3381721</span><span style="display:none;">2016/3/15 14:42:19</span> 2016-03-15 14:42 <a href="http://www.cnblogs.com/manuosex/" target="_blank">laozhu1124</a> <a href="http://msg.cnblogs.com/send/laozhu1124" title="发送站内短消息"> </a></h4><div>什么 没看懂</div><div><a>支持(0)</a><a>反对(0)</a></div><span style="display:none;">http://pic.cnblogs.com/face/440253/20151203180321.png</span>   </div></div><div><a name="commentform"></a><div><a>刷新评论</a><a href="http://www.cnblogs.com/manuosex/p/5276922.html#">刷新页面</a><a href="http://www.cnblogs.com/manuosex/p/5276922.html#top">返回顶部</a></div><div>注册用户登录后才能发表评论，请 <a rel="nofollow">登录</a> 或 <a rel="nofollow">注册</a>，<a href="http://www.cnblogs.com/">访问</a>网站首页。</div><div><a href="http://www.ucancode.com/index.htm" target="_blank">【推荐】50万行VC++源码: 大型组态工控、电力仿真CAD与GIS源码库</a><br/><a href="http://www.rongcloud.cn/" target="_blank">【推荐】融云即时通讯云－专注为 App 开发者提供IM云服务</a><br/><a href="http://www.ucloud.cn/site/active/new_gift.html?utm_source=cost&amp;utm_campaign=bokeyuan1&amp;utm_medium=display&amp;utm_content=3yuecu" target="_blank">【推荐】UCloud开年大礼，充5000返1000；买云主机送CDN，详情点击</a><br/></div><div><a href="http://q.cnblogs.com/" target="_blank"><img src="laozhu1124_files/Image.jpg" type="image/jpeg" alt="博问" height="250" title="博问" width="300"/></a></div><div><b>最新IT新闻</b>:<br/>
· <a href="http://news.cnblogs.com/n/541038/" target="_blank">华为企业部门营收激增 去年已达42.5亿美元</a><br/>
· <a href="http://news.cnblogs.com/n/541037/" target="_blank">google加密Android遭手机厂商抵制 担心运行速度变慢</a><br/>
· <a href="http://news.cnblogs.com/n/541036/" target="_blank">ParaZero为无人机设计紧急降落伞：SafeAir</a><br/>
· <a href="http://news.cnblogs.com/n/541035/" target="_blank">Android Chrome浏览器将支持下载暂停和取消</a><br/>
· <a href="http://news.cnblogs.com/n/541034/" target="_blank">AMD称已统治83％的VR市场</a><br/>
» <a href="http://news.cnblogs.com/" target="_blank" title="IT新闻">更多新闻...</a></div><div><a href="https://www.jpush.cn/?from=cnblogs01" target="_blank"><img src="laozhu1124_files/Image [1].jpg" type="image/jpeg" alt="极光推送20160307" height="60" title="极光推送20160307" width="468"/></a></div><div><b>最新知识库文章</b>:<br/><div>· <a href="http://kb.cnblogs.com/page/539160/" target="_blank">架构漫谈（一）：什么是架构？</a><br/>
· <a href="http://kb.cnblogs.com/page/540632/" target="_blank">架构的本质</a><br/>
· <a href="http://kb.cnblogs.com/page/538249/" target="_blank">谷歌背后的数学</a><br/>
· <a href="http://kb.cnblogs.com/page/533808/" target="_blank">Medium开发团队谈架构设计</a><br/>
· <a href="http://kb.cnblogs.com/page/539274/" target="_blank">理解“渐进增强(Progressive Enhancement)”</a><br/></div>
» <a href="http://kb.cnblogs.com/" target="_blank">更多知识库文章...</a></div><div><b>历史上的今天:</b><br/>
2014-03-15 <a href="http://www.cnblogs.com/manuosex/p/3602262.html">谈谈eclipse使用技巧一</a><br/></div></div><p>Powered by:<br/><a href="http://www.cnblogs.com/" name="Hyperlink1" style="font-family:Verdana;font-size:12px;">博客园</a><br/>
Copyright © laozhu1124</p></div><div><div><table cellpadding="0" cellspacing="0" title="Calendar"><tbody><tr><td colspan="7"><table cellspacing="0"><tbody><tr><td><a>&lt;</a></td><td align="center">2016年3月</td><td align="right"><a>&gt;</a></td></tr></tbody></table></td></tr><tr><th abbr="日" align="center">日</th><th abbr="一" align="center">一</th><th abbr="二" align="center">二</th><th abbr="三" align="center">三</th><th abbr="四" align="center">四</th><th abbr="五" align="center">五</th><th abbr="六" align="center">六</th></tr><tr><td align="center">28</td><td align="center">29</td><td align="center">1</td><td align="center">2</td><td align="center">3</td><td align="center">4</td><td align="center">5</td></tr><tr><td align="center">6</td><td align="center">7</td><td align="center">8</td><td align="center">9</td><td align="center">10</td><td align="center"><a href="http://www.cnblogs.com/manuosex/archive/2016/03/11.html"><u>11</u></a></td><td align="center">12</td></tr><tr><td align="center">13</td><td align="center"><a href="http://www.cnblogs.com/manuosex/archive/2016/03/14.html"><u>14</u></a></td><td align="center">15</td><td align="center">16</td><td align="center">17</td><td align="center">18</td><td align="center">19</td></tr><tr><td align="center">20</td><td align="center">21</td><td align="center">22</td><td align="center">23</td><td align="center">24</td><td align="center">25</td><td align="center">26</td></tr><tr><td align="center">27</td><td align="center">28</td><td align="center">29</td><td align="center">30</td><td align="center">31</td><td align="center">1</td><td align="center">2</td></tr><tr><td align="center">3</td><td align="center">4</td><td align="center">5</td><td align="center">6</td><td align="center">7</td><td align="center">8</td><td align="center">9</td></tr></tbody></table></div><h3>导航</h3><ul><li><a href="http://www.cnblogs.com/">博客园</a></li><li><a href="http://www.cnblogs.com/manuosex/">首页</a></li><li><a href="http://i.cnblogs.com/EditPosts.aspx?opt=1" rel="nofollow">新随笔</a></li><li><a accesskey="9" href="http://msg.cnblogs.com/send/laozhu1124" rel="nofollow">联系</a></li><li><a href="http://www.cnblogs.com/manuosex/rss">订阅</a><a href="http://www.cnblogs.com/manuosex/rss"><img src="laozhu1124_files/Image.gif" type="image/gif" alt="订阅"/></a></li><li><a href="http://i.cnblogs.com/" rel="nofollow">管理</a></li></ul><h3>统计</h3><ul><li>随笔 - 226</li><li>文章 - 0</li><li>评论 - 571</li><li>引用 - 0</li></ul><h3>公告</h3><div>昵称：<a href="http://home.cnblogs.com/u/manuosex/">laozhu1124</a><br/>
园龄：<a href="http://home.cnblogs.com/u/manuosex/" title="入园时间：2012-08-22">3年6个月</a><br/>
粉丝：<a href="http://home.cnblogs.com/u/manuosex/followers/">412</a><br/>
关注：<a href="http://home.cnblogs.com/u/manuosex/followees/">16</a><div><a>+加关注</a></div></div><div><h3>搜索</h3><div> </div></div><div><h3>常用链接</h3><ul><li><a href="http://www.cnblogs.com/manuosex/p/" title="我的博客的随笔列表">我的随笔</a></li><li><a href="http://www.cnblogs.com/manuosex/MyComments.html" title="我发表过的评论列表">我的评论</a></li><li><a href="http://www.cnblogs.com/manuosex/OtherPosts.html" title="我评论过的随笔列表">我的参与</a></li><li><a href="http://www.cnblogs.com/manuosex/RecentComments.html" title="我的博客的评论列表">最新评论</a></li><li><a href="http://www.cnblogs.com/manuosex/tag/" title="我的博客的标签列表">我的标签</a></li></ul></div><div><h3>最新随笔</h3><div><ul style="word-break:break-all"><li><a href="http://www.cnblogs.com/manuosex/p/5276922.html">1. Android 控件架构</a></li><li><a href="http://www.cnblogs.com/manuosex/p/5275152.html">2. Android 5.x特性概览五</a></li><li><a href="http://www.cnblogs.com/manuosex/p/5275092.html">3. Android 5.x特性概览四</a></li><li><a href="http://www.cnblogs.com/manuosex/p/5266465.html">4. Android 5.x特性概览三</a></li><li><a href="http://www.cnblogs.com/manuosex/p/5265732.html">5. Android 5.x特性概览二</a></li><li><a href="http://www.cnblogs.com/manuosex/p/5264866.html">6. Android 5.x特性概览一</a></li><li><a href="http://www.cnblogs.com/manuosex/p/5045085.html">7. android 一题多改系列——android 打电话实现两种方法</a></li><li><a href="http://www.cnblogs.com/manuosex/p/5032934.html">8. 老猪带你玩转自定义控件三——sai大神带我实现ios 8 时间滚轮控件</a></li><li><a href="http://www.cnblogs.com/manuosex/p/5023791.html">9. 老猪带你玩转android自定义控件二——自定义索引栏listview</a></li><li><a href="http://www.cnblogs.com/manuosex/p/5017526.html">10. 老猪带你玩转android自定义控件一——打造最简单viewpagerindicator</a></li></ul></div></div><div><h3>我的标签</h3><div><ul><li><a href="http://www.cnblogs.com/manuosex/tag/android/">android</a>(92)</li><li><a href="http://www.cnblogs.com/manuosex/tag/metroUI/">metroUI</a>(48)</li><li><a href="http://www.cnblogs.com/manuosex/tag/win8/">win8</a>(47)</li><li><a href="http://www.cnblogs.com/manuosex/tag/%E5%BC%80%E5%8F%91/">开发</a>(43)</li><li><a href="http://www.cnblogs.com/manuosex/tag/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/">数据结构</a>(33)</li><li><a href="http://www.cnblogs.com/manuosex/tag/C%23/">C#</a>(33)</li><li><a href="http://www.cnblogs.com/manuosex/tag/%E7%AE%97%E6%B3%95/">算法</a>(28)</li><li><a href="http://www.cnblogs.com/manuosex/tag/%E7%A8%8B%E5%BA%8F/">程序</a>(10)</li><li><a href="http://www.cnblogs.com/manuosex/tag/%E5%BA%95%E5%B1%82/">底层</a>(7)</li><li><a href="http://www.cnblogs.com/manuosex/tag/mongodb/">mongodb</a>(7)</li><li><a href="http://www.cnblogs.com/manuosex/tag/">更多</a></li></ul></div></div><div><h3>随笔档案<span style="font-size:11px;font-weight:normal">(227)</span></h3><ul><li><a href="http://www.cnblogs.com/manuosex/archive/2016/03.html">2016年3月 (6)</a></li><li><a href="http://www.cnblogs.com/manuosex/archive/2015/12.html">2015年12月 (4)</a></li><li><a href="http://www.cnblogs.com/manuosex/archive/2014/11.html">2014年11月 (1)</a></li><li><a href="http://www.cnblogs.com/manuosex/archive/2014/08.html">2014年8月 (3)</a></li><li><a href="http://www.cnblogs.com/manuosex/archive/2014/07.html">2014年7月 (1)</a></li><li><a href="http://www.cnblogs.com/manuosex/archive/2014/06.html">2014年6月 (1)</a></li><li><a href="http://www.cnblogs.com/manuosex/archive/2014/05.html">2014年5月 (13)</a></li><li><a href="http://www.cnblogs.com/manuosex/archive/2014/04.html">2014年4月 (20)</a></li><li><a href="http://www.cnblogs.com/manuosex/archive/2014/03.html">2014年3月 (36)</a></li><li><a href="http://www.cnblogs.com/manuosex/archive/2014/02.html">2014年2月 (4)</a></li><li><a href="http://www.cnblogs.com/manuosex/archive/2013/11.html">2013年11月 (10)</a></li><li><a href="http://www.cnblogs.com/manuosex/archive/2013/08.html">2013年8月 (3)</a></li><li><a href="http://www.cnblogs.com/manuosex/archive/2013/07.html">2013年7月 (12)</a></li><li><a href="http://www.cnblogs.com/manuosex/archive/2012/12.html">2012年12月 (31)</a></li><li><a href="http://www.cnblogs.com/manuosex/archive/2012/11.html">2012年11月 (29)</a></li><li><a href="http://www.cnblogs.com/manuosex/archive/2012/10.html">2012年10月 (25)</a></li><li><a href="http://www.cnblogs.com/manuosex/archive/2012/09.html">2012年9月 (27)</a></li><li><a href="http://www.cnblogs.com/manuosex/archive/2012/08.html">2012年8月 (1)</a></li></ul></div><div><h3>积分与排名</h3><ul><li>积分 - 287541</li><li>排名 - 425</li></ul></div><div><h3>最新评论</h3><div><ul><li><a href="http://www.cnblogs.com/manuosex/p/5276922.html#3381721">1. Re:Android 控件架构</a></li><li>什么 没看懂</li><li>--laozhu1124</li><li><a href="http://www.cnblogs.com/manuosex/p/5276922.html#3381708">2. Re:Android 控件架构</a></li><li>最后一段完全没看懂，感觉写得有点乱。</li><li>--zdd</li><li><a href="http://www.cnblogs.com/manuosex/p/3215270.html#3370314">3. Re:Monkey测试简介</a></li><li>请问这本书叫什么</li><li>--思林1234</li><li><a href="http://www.cnblogs.com/manuosex/p/3634375.html#3352283">4. Re:art虚拟机介绍</a></li><li>怎样的?坑</li><li>--牧 天</li><li><a href="http://www.cnblogs.com/manuosex/p/3602550.html#3349147">5. Re:谈谈eclipse使用技巧二</a></li><li>很不错，学习博主</li><li>--草花筋斗</li></ul></div></div><div><h3>阅读排行榜</h3><div><ul><li><a href="http://www.cnblogs.com/manuosex/p/3215270.html">1. Monkey测试简介(29231)</a></li><li><a href="http://www.cnblogs.com/manuosex/p/3416740.html">2. android 无法生成R文件的原因剖析(24385)</a></li><li><a href="http://www.cnblogs.com/manuosex/p/3661762.html">3. android oom 全解析(20506)</a></li><li><a href="http://www.cnblogs.com/manuosex/p/3583775.html">4. 浅论Android网络请求库——android-async-http(17946)</a></li><li><a href="http://www.cnblogs.com/manuosex/p/3570799.html">5. Caused by: java.lang.UnsatisfiedLinkError...解决经历(15883)</a></li></ul></div></div><div><h3>评论排行榜</h3><div><ul><li><a href="http://www.cnblogs.com/manuosex/archive/2012/12/12/2814422.html">1. .net你不行——是你的父亲把你封装的太死，还是你的子孙们太懒，未把你发扬光大。(42)</a></li><li><a href="http://www.cnblogs.com/manuosex/p/3677309.html">2. 玩转2048，不如搞定2048(30)</a></li><li><a href="http://www.cnblogs.com/manuosex/archive/2012/12/02/2798677.html">3. 一道百度之星编程大赛题的随笔联想·（2）(29)</a></li><li><a href="http://www.cnblogs.com/manuosex/p/3708376.html">4. 同样加班 不同收获(24)</a></li><li><a href="http://www.cnblogs.com/manuosex/archive/2012/10/29/2744956.html">5. C#数据结构与算法揭秘一(17)</a></li></ul></div></div><div><h3>推荐排行榜</h3><div><ul><li><a href="http://www.cnblogs.com/manuosex/p/3677309.html">1. 玩转2048，不如搞定2048(13)</a></li><li><a href="http://www.cnblogs.com/manuosex/p/3708376.html">2. 同样加班 不同收获(11)</a></li><li><a href="http://www.cnblogs.com/manuosex/p/3731342.html">3. 何为程序员思维(10)</a></li><li><a href="http://www.cnblogs.com/manuosex/archive/2012/10/29/2744956.html">4. C#数据结构与算法揭秘一(8)</a></li><li><a href="http://www.cnblogs.com/manuosex/archive/2012/11/16/2772688.html">5. win8 开发之旅(15) --足球游戏揭秘（1）(7)</a></li></ul></div></div></div></div><div><a href="http://gostats.cn/" target="_blank" title="淘宝免费计数器"><img src="laozhu1124_files/Image [6].png" type="image/png" alt="淘宝免费计数器" style="border-width:0"/></a></div></span>
</div></body></html> 