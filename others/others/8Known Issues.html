<html>
<head>
  <title>8Known Issues</title>
  <basefont face="Microsoft YaHei" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/301769 (zh-CN); Windows/6.3.9600 (Win64);"/>
  <style>
    body, td {
      font-family: Microsoft YaHei;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="1336"/>
<h1>8Known Issues</h1>

<div>
<span><div style="padding: 2.2em 0px 0.2em; color: rgb(34, 34, 34); font-family: Roboto, sans-serif; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><div style="margin: 0px auto; width: 940px; clear: both; transition: all 0.25s ease-out; max-width: 940px; height: 41px; border-bottom-width: 1px; border-bottom-style: solid; border-color: rgb(204, 204, 204); position: relative;"><div style="display: inline; float: left; margin: -3px 30px 0px 0px; width: 140px; padding-right: 0px; border-right-width: 1px; border-right-style: solid; border-right-color: rgb(204, 204, 204);"><a href="http://source.android.com/index.html" style="color: rgb(37, 138, 175); text-decoration: none;"><img alt="Android Open Source Project" height="25" src="http://source.android.com/assets/images/sac_logo.png" style="border: 0px; vertical-align: middle; max-width: 100%;" width="123"></img></a></div><ul style="margin: -2px 10px 0px 0px; padding: 0px; display: inline; float: left; width: 520px; list-style-type: none;"><li style="margin: 0px 45px 5px 0px; display: block; float: left; transition: all 0.25s linear;"><a href="http://source.android.com/source/index.html" style="color: rgb(51, 181, 229); text-decoration: none; font-size: 16px;">Source</a></li><li style="margin: 0px 45px 5px 0px; display: block; float: left; transition: all 0.25s linear;"><a href="http://source.android.com/devices/index.html" style="color: rgb(51, 51, 51); text-decoration: none; font-size: 16px;">Devices</a></li><li style="margin: 0px 45px 5px 0px; display: block; float: left; transition: all 0.25s linear;"><a href="http://source.android.com/security/index.html" style="color: rgb(51, 51, 51); text-decoration: none; font-size: 16px;">Security</a></li><li style="margin: 0px 45px 5px 0px; display: block; float: left; transition: all 0.25s linear;"><a href="http://source.android.com/compatibility/index.html" style="color: rgb(51, 51, 51); text-decoration: none; font-size: 16px;">Compatibility</a></li></ul><div style="position: absolute; right: 6px; top: -9px; width: 40px; height: 35px; z-index: 99; overflow: hidden; opacity: 0; transform-origin: 100% 0% 0px; transition-property: -webkit-opacity; transition-duration: 0.25s; transition-timing-function: ease;"><div style="width: 228px; padding: 10px 20px 0px; background: url(http://source.android.com/assets/images/more_mid.png) repeat-y;"><div style="border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: rgb(204, 204, 204); font-weight: bold;">Android Sites</div><ul style="margin: 10px 10px 20px 0px; padding: 0px;"><li><a style="color: rgb(34, 34, 34) !important;">Android Open Source Project</a><a href="http://www.android.com/" style="color: rgb(37, 138, 175); text-decoration: none;">Android.com</a><a href="http://developer.android.com/" style="color: rgb(37, 138, 175); text-decoration: none;">Android Developers</a></li></ul><br/></div></div></div></div><div style="margin: 0px auto; width: 940px; clear: both; color: rgb(34, 34, 34); font-family: Roboto, sans-serif; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><div style="display: inline; float: left; margin-left: 0px; margin-right: 10px; width: 220px; min-height: 5px; margin-bottom: 1px; overflow: hidden;"><div style="outline: none; width: 220px; margin: 20px 0px 0px; overflow: hidden; padding: 0px; height: 922px;"><div style="overflow: hidden; position: relative; width: 220px; height: 922px;"><div style="position: absolute; overflow: hidden; width: 220px; padding: 0px; top: 0px;"><ul style="margin: 0px; padding: 0px 0px 30px; width: 216px;"><li style="margin: 0px; list-style-type: none; font-size: 14px; padding: 0px;"><div style="position: relative; margin-bottom: 1px; padding: 0px 30px 0px 0px;"><a href="http://source.android.com/source/index.html" style="color: rgb(51, 51, 51); text-decoration: none; word-wrap: break-word; display: block; font-weight: 500; padding: 10px 0px 10px 10px;">Overview</a></div></li><li style="margin: 0px; list-style-type: none; font-size: 14px; padding: 0px;"><div style="position: relative; margin-bottom: 1px; padding: 0px 30px 0px 0px; background: rgba(0, 0, 0, 0.0470588);"><a href="http://source.android.com/source/requirements.html" style="color: rgb(51, 51, 51); text-decoration: none; word-wrap: break-word; display: block; font-weight: 500; padding: 10px 0px 10px 10px;">Downloading and Building</a></div></li><li style="list-style: none; display: inline"><ul style="margin: 0px; padding: 0px; display: block; overflow: hidden;"><li style="margin: 0px; list-style-type: none; font-size: 14px; padding: 0px; background: rgba(0, 0, 0, 0.027451);"><a href="http://source.android.com/source/initializing.html" style="color: rgb(85, 85, 85); text-decoration: none; word-wrap: break-word; display: block; font-weight: normal; text-transform: none; padding: 7px 5px 7px 10px;">Establishing a Build Environment</a></li><li style="margin: 0px; list-style-type: none; font-size: 14px; padding: 0px; background: rgba(0, 0, 0, 0.027451);"><a href="http://source.android.com/source/downloading.html" style="color: rgb(85, 85, 85); text-decoration: none; word-wrap: break-word; display: block; font-weight: normal; text-transform: none; padding: 7px 5px 7px 10px;">Downloading the Source</a></li><li style="margin: 0px; list-style-type: none; font-size: 14px; padding: 0px; background: rgba(0, 0, 0, 0.027451);"><a href="http://source.android.com/source/building.html" style="color: rgb(85, 85, 85); text-decoration: none; word-wrap: break-word; display: block; font-weight: normal; text-transform: none; padding: 7px 5px 7px 10px;">Building the System</a></li><li style="margin: 0px; list-style-type: none; font-size: 14px; padding: 0px; background: rgba(0, 0, 0, 0.027451);"><a href="http://source.android.com/source/jack.html" style="color: rgb(85, 85, 85); text-decoration: none; word-wrap: break-word; display: block; font-weight: normal; text-transform: none; padding: 7px 5px 7px 10px;">Compiling with Jack</a></li><li style="margin: 0px; list-style-type: none; font-size: 14px; padding: 0px; background: rgba(0, 0, 0, 0.027451);"><a href="http://source.android.com/source/devices.html" style="color: rgb(85, 85, 85); text-decoration: none; word-wrap: break-word; display: block; font-weight: normal; text-transform: none; padding: 7px 5px 7px 10px;">Selecting Devices</a></li><li style="margin: 0px; list-style-type: none; font-size: 14px; padding: 0px; background: rgba(0, 0, 0, 0.027451);"><a href="http://source.android.com/source/running.html" style="color: rgb(85, 85, 85); text-decoration: none; word-wrap: break-word; display: block; font-weight: normal; text-transform: none; padding: 7px 5px 7px 10px;">Running Builds</a></li><li style="margin: 0px; list-style-type: none; font-size: 14px; padding: 0px; background: rgba(0, 0, 0, 0.027451);"><a href="http://source.android.com/source/building-kernels.html" style="color: rgb(85, 85, 85); text-decoration: none; word-wrap: break-word; display: block; font-weight: normal; text-transform: none; padding: 7px 5px 7px 10px;">Building Kernels</a></li><li style="margin: 0px; list-style-type: none; font-size: 14px; padding: 0px 0px 5px; background: rgba(0, 0, 0, 0.027451);"><a href="http://source.android.com/source/known-issues.html" style="color: rgb(0, 153, 204); text-decoration: none; word-wrap: break-word; display: block; font-weight: normal; text-transform: none; padding: 7px 5px 7px 10px;">Known Issues</a></li></ul></li><li style="margin: 0px; list-style-type: none; font-size: 14px; padding: 0px;"><div style="position: relative; margin-bottom: 1px; padding: 0px 30px 0px 0px;"><a href="http://source.android.com/source/developing.html" style="color: rgb(51, 51, 51); text-decoration: none; word-wrap: break-word; display: block; font-weight: 500; padding: 10px 0px 10px 10px;">Developing</a></div></li><li style="margin: 0px; list-style-type: none; font-size: 14px; padding: 0px;"><div style="position: relative; margin-bottom: 1px; padding: 0px 30px 0px 0px;"><a href="http://source.android.com/source/contributing.html" style="color: rgb(51, 51, 51); text-decoration: none; word-wrap: break-word; display: block; font-weight: 500; padding: 10px 0px 10px 10px;">Contributing</a></div></li><li style="margin: 0px; list-style-type: none; font-size: 14px; padding: 0px;"><div style="position: relative; margin-bottom: 1px; padding: 0px 30px 0px 0px;"><a href="http://source.android.com/source/community.html" style="color: rgb(51, 51, 51); text-decoration: none; word-wrap: break-word; display: block; font-weight: 500; padding: 10px 0px 10px 10px;">Community</a></div></li></ul></div></div></div></div><div style="display: inline; float: left; margin-left: 10px; margin-right: 0px; width: 700px;"><h1 style="color: rgb(51, 51, 51); font-size: 34px; margin: 36px 0px 27px; padding: 0px 0px 10px; font-weight: 300;">Known Issues</h1><div><div style="float: right; clear: right; margin: -27px 0px 0px 20px; padding: 0px 0px 20px;"><div style="font-size: 13px; width: 238px; border: 1px solid rgb(204, 204, 204); float: right;"><h2 style="color: rgb(51, 51, 51); font-size: inherit; margin: 10px 15px; padding: 0px; font-weight: 300; text-transform: uppercase; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: gainsboro;">IN THIS DOCUMENT</h2><ol style="margin: 0px 15px 15px; padding: 0px; font-size: inherit; list-style: none;"><li style="margin: 0px 0px 5px; font-size: inherit;"><a href="http://source.android.com/source/known-issues.html#build-issues" style="color: rgb(37, 138, 175); text-decoration: none; font-size: inherit;">Build issues</a><ol style="margin: 3px 0px 3px 15px; padding: 0px; font-size: inherit; list-style: none;"><li style="margin: 0px 0px 5px; font-size: inherit;"><a href="http://source.android.com/source/known-issues.html#missing-cellbroadcastreceiver" style="color: rgb(37, 138, 175); text-decoration: none; font-size: inherit;">Missing CellBroadcastReceiver in toro builds</a></li><li style="margin: 0px 0px 5px; font-size: inherit;"><a href="http://source.android.com/source/known-issues.html#missing-cts-native-xml-generator" style="color: rgb(37, 138, 175); text-decoration: none; font-size: inherit;">Missing CTS Native XML Generator</a></li><li style="margin: 0px 0px 5px; font-size: inherit;"><a href="http://source.android.com/source/known-issues.html#black-gingerbread-emulator" style="color: rgb(37, 138, 175); text-decoration: none; font-size: inherit;">Black Gingerbread Emulator</a></li><li style="margin: 0px 0px 5px; font-size: inherit;"><a href="http://source.android.com/source/known-issues.html#emulator-built-on-macos-107-lion-doesnt-work" style="color: rgb(37, 138, 175); text-decoration: none; font-size: inherit;">Emulator built on MacOS 10.7 Lion doesn't work.</a></li><li style="margin: 0px 0px 5px; font-size: inherit;"><a href="http://source.android.com/source/known-issues.html#partial-and-emulator-builds" style="color: rgb(37, 138, 175); text-decoration: none; font-size: inherit;"><code style="font-size: inherit; color: inherit; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-family: monospace;">WITH_DEXPREOPT=true</code> and emulator builds.</a></li><li style="margin: 0px 0px 5px; font-size: inherit;"><a href="http://source.android.com/source/known-issues.html#permission-denied-during-builds" style="color: rgb(37, 138, 175); text-decoration: none; font-size: inherit;">&quot;Permission Denied&quot; during builds.</a></li><li style="margin: 0px 0px 5px; font-size: inherit;"><a href="http://source.android.com/source/known-issues.html#build-errors-related-to-using-the-wrong-compiler" style="color: rgb(37, 138, 175); text-decoration: none; font-size: inherit;">Build errors related to using the wrong compiler.</a></li><li style="margin: 0px 0px 5px; font-size: inherit;"><a href="http://source.android.com/source/known-issues.html#build-errors-caused-by-non-default-tool-settings" style="color: rgb(37, 138, 175); text-decoration: none; font-size: inherit;">Build errors caused by non-default tool settings.</a></li><li style="margin: 0px 0px 5px; font-size: inherit;"><a href="http://source.android.com/source/known-issues.html#build-error-with-40x-and-earlier-on-macos-107" style="color: rgb(37, 138, 175); text-decoration: none; font-size: inherit;">Build error with 4.0.x and earlier on MacOS 10.7.</a></li><li style="margin: 0px 0px 5px; font-size: inherit;"><a href="http://source.android.com/source/known-issues.html#build-error-on-macos-with-xcode-43" style="color: rgb(37, 138, 175); text-decoration: none; font-size: inherit;">Build error on MacOS with XCode 4.3.</a></li><li style="margin: 0px 0px 5px; font-size: inherit;"><a href="http://source.android.com/source/known-issues.html#build-error-with-40x-and-earlier-on-ubuntu-1110" style="color: rgb(37, 138, 175); text-decoration: none; font-size: inherit;">Build error with 4.0.x and earlier on Ubuntu 11.10.</a></li></ol></li><li style="margin: 0px 0px 5px; font-size: inherit;"><a href="http://source.android.com/source/known-issues.html#source-sync" style="color: rgb(37, 138, 175); text-decoration: none; font-size: inherit;">Source sync issues</a></li><li style="margin: 0px 0px 5px; font-size: inherit;"><a href="http://source.android.com/source/known-issues.html#" style="color: rgb(37, 138, 175); text-decoration: none; font-size: inherit;"></a><ol style="margin: 3px 0px 3px 15px; padding: 0px; font-size: inherit; list-style: none;"><li style="margin: 0px 0px 5px; font-size: inherit;"><a href="http://source.android.com/source/known-issues.html#difficulties-syncing-the-source-code-proxy-issues" style="color: rgb(37, 138, 175); text-decoration: none; font-size: inherit;">Difficulties syncing the source code (proxy issues).</a></li><li style="margin: 0px 0px 5px; font-size: inherit;"><a href="http://source.android.com/source/known-issues.html#difficulties-syncing-the-source-tree-virtualbox-ethernet-issues" style="color: rgb(37, 138, 175); text-decoration: none; font-size: inherit;">Difficulties syncing the source tree (VirtualBox Ethernet issues).</a></li><li style="margin: 0px 0px 5px; font-size: inherit;"><a href="http://source.android.com/source/known-issues.html#difficulties-syncing-the-source-tree-dns-issues" style="color: rgb(37, 138, 175); text-decoration: none; font-size: inherit;">Difficulties syncing the source tree (DNS issues).</a></li><li style="margin: 0px 0px 5px; font-size: inherit;"><a href="http://source.android.com/source/known-issues.html#difficulties-syncing-the-source-tree-tcp-issues" style="color: rgb(37, 138, 175); text-decoration: none; font-size: inherit;">Difficulties syncing the source tree (TCP issues).</a></li></ol></li><li style="margin: 0px 0px 5px; font-size: inherit;"><a href="http://source.android.com/source/known-issues.html#runtime-issues" style="color: rgb(37, 138, 175); text-decoration: none; font-size: inherit;">Runtime issues</a><ol style="margin: 3px 0px 3px 15px; padding: 0px; font-size: inherit; list-style: none;"><li style="margin: 0px 0px 5px; font-size: inherit;"><a href="http://source.android.com/source/known-issues.html#camera-and-gps-dont-work-on-galaxy-nexus" style="color: rgb(37, 138, 175); text-decoration: none; font-size: inherit;">Camera and GPS don't work on Galaxy Nexus.</a></li></ol></li></ol></div></div><p style="margin: 0px 0px 15px;">Even with our best care, small problems sometimes slip in. This page keeps track of the known issues around using the Android source code.</p><h2 style="color: rgb(51, 51, 51); font-size: 26px; margin: 32px 0px 0px; padding: 0px; font-weight: 300;">Build issues</h2><hr style="height: 1px; margin: 5px 0px 20px; border: 0px; background: rgb(204, 204, 204);"/><h3 style="color: rgb(51, 51, 51); font-size: 21px; font-weight: 400; margin: 21px 0px 14px;">Missing CellBroadcastReceiver in toro builds</h3><p style="margin: 0px 0px 15px;"><strong style="font-weight: bold; color: rgb(34, 34, 34);">Symptom</strong></p>
On AOSP builds for toro (up to Jelly Bean 4.2.1), CellBroadcastReceiver doesn't get included in the system.
<p style="margin: 0px 0px 15px;"></p><p style="margin: 0px 0px 15px;"><strong style="font-weight: bold; color: rgb(34, 34, 34);">Cause:</strong></p>
There's a typo in <code style="font-size: 13px; color: rgb(0, 102, 0); font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-family: monospace;">vendor/samsung/toro/device-partial.mk</code>, where<code style="font-size: 13px; color: rgb(0, 102, 0); font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-family: monospace;">PRODUCT_PACKAGES</code> has the K replaced by an H.
<p style="margin: 0px 0px 15px;"><strong style="font-weight: bold; color: rgb(34, 34, 34);">Fix</strong>: Use the latest packages for 4.2.2, or manually fix the typo.</p><h3 style="color: rgb(51, 51, 51); font-size: 21px; font-weight: 400; margin: 21px 0px 14px;">Missing CTS Native XML Generator</h3><p style="margin: 0px 0px 15px;"><strong style="font-weight: bold; color: rgb(34, 34, 34);">Symptom</strong>: On some builds of IceCreamSandwich and later, the following warning is printed early during the build: <code style="font-size: 13px; color: rgb(0, 102, 0); font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-family: monospace;">/bin/bash: line 0: cd: cts/tools/cts-native-xml-generator/src/res: No such file or directory</code></p><p style="margin: 0px 0px 15px;"><strong style="font-weight: bold; color: rgb(34, 34, 34);">Cause</strong>: Some makefile references that path, which doesn't exist.</p><p style="margin: 0px 0px 15px;"><strong style="font-weight: bold; color: rgb(34, 34, 34);">Fix</strong>: None. This is a harmless warning.</p><h3 style="color: rgb(51, 51, 51); font-size: 21px; font-weight: 400; margin: 21px 0px 14px;">Black Gingerbread Emulator</h3><p style="margin: 0px 0px 15px;"><strong style="font-weight: bold; color: rgb(34, 34, 34);">Symptom</strong>: The emulator built directly from the gingerbread branch doesn't start and stays stuck on a black screen.</p><p style="margin: 0px 0px 15px;"><strong style="font-weight: bold; color: rgb(34, 34, 34);">Cause</strong>: The gingerbread branch uses version R7 of the emulator, which doesn't have all the features necessary to run recent versions of gingerbread.</p><p style="margin: 0px 0px 15px;"><strong style="font-weight: bold; color: rgb(34, 34, 34);">Fix</strong>: Use version R12 of the emulator, and a newer kernel that matches those tools. No need to do a clean build.</p><pre style="font-size: 13px; margin: 0px 0px 1em; color: rgb(0, 102, 0); font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-family: monospace; padding: 1em; overflow: auto; border: 1px solid rgb(221, 221, 221); background: rgb(247, 247, 247);"><code style="font-size: 13px; color: rgb(0, 102, 0); font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-family: monospace;"><span style="color: rgb(0, 0, 0);">$ repo forall platform</span><span style="color: rgb(102, 102, 0);">/</span><span style="color: rgb(0, 0, 0);">external</span><span style="color: rgb(102, 102, 0);">/</span><span style="color: rgb(0, 0, 0);">qemu </span><span style="color: rgb(102, 102, 0);">-</span><span style="color: rgb(0, 0, 0);">c git checkout aosp</span><span style="color: rgb(102, 102, 0);">/</span><span style="color: rgb(0, 0, 0);">tools_r12<br/>$ make<br/>$ emulator </span><span style="color: rgb(102, 102, 0);">-</span><span style="color: rgb(0, 0, 0);">kernel prebuilt</span><span style="color: rgb(102, 102, 0);">/</span><span style="color: rgb(0, 0, 0);">android</span><span style="color: rgb(102, 102, 0);">-</span><span style="color: rgb(0, 0, 0);">arm</span><span style="color: rgb(102, 102, 0);">/</span><span style="color: rgb(0, 0, 0);">kernel</span><span style="color: rgb(102, 102, 0);">/</span><span style="color: rgb(0, 0, 0);">kernel</span><span style="color: rgb(102, 102, 0);">-</span><span style="color: rgb(0, 0, 0);">qemu</span><span style="color: rgb(102, 102, 0);">-</span><span style="color: rgb(0, 0, 0);">armv7<br/></span></code></pre><h3 style="color: rgb(51, 51, 51); font-size: 21px; font-weight: 400; margin: 21px 0px 14px;">Emulator built on MacOS 10.7 Lion doesn't work.</h3><p style="margin: 0px 0px 15px;"><strong style="font-weight: bold; color: rgb(34, 34, 34);">Symptom</strong>: The emulator (any version) built on MacOS 10.7 Lion and/or on XCode 4.x doesn't start.</p><p style="margin: 0px 0px 15px;"><strong style="font-weight: bold; color: rgb(34, 34, 34);">Cause</strong>: Some change in the development environment causes the emulator to be compiled in a way that prevents it from working.</p><p style="margin: 0px 0px 15px;"><strong style="font-weight: bold; color: rgb(34, 34, 34);">Fix</strong>: Use an emulator binary from the SDK, which is built on MacOS 10.6 with XCode 3 and works on MacOS 10.7.</p><h3 style="color: rgb(51, 51, 51); font-size: 21px; font-weight: 400; margin: 21px 0px 14px;"><code style="font-size: 13px; color: rgb(0, 102, 0); font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-family: monospace;">WITH_DEXPREOPT=true</code> and emulator builds.</h3><p style="margin: 0px 0px 15px;"><strong style="font-weight: bold; color: rgb(34, 34, 34);">Symptom</strong>: When conducting partial builds or syncs (make system no dependencies) on emulator builds, the resulting build doesn't work.</p><p style="margin: 0px 0px 15px;"><strong style="font-weight: bold; color: rgb(34, 34, 34);">Cause</strong>: All emulator builds now run Dex optimization at build time by default, which requires to follow all dependencies to re-optimize the applications each time the framework changes.</p><p style="margin: 0px 0px 15px;"><strong style="font-weight: bold; color: rgb(34, 34, 34);">Fix</strong>: Locally disable Dex optimizations with <code style="font-size: 13px; color: rgb(0, 102, 0); font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-family: monospace;">export WITH_DEXPREOPT=false</code>, delete the existing optimized versions with <code style="font-size: 13px; color: rgb(0, 102, 0); font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-family: monospace;">make installclean</code> and run a full build to re-generate non-optimized versions. After that, partial builds will work.</p><h3 style="color: rgb(51, 51, 51); font-size: 21px; font-weight: 400; margin: 21px 0px 14px;">&quot;Permission Denied&quot; during builds.</h3><p style="margin: 0px 0px 15px;"><strong style="font-weight: bold; color: rgb(34, 34, 34);">Symptom</strong>: All builds fail with &quot;Permission Denied&quot;, possibly along with anti-virus warnings.</p><p style="margin: 0px 0px 15px;"><strong style="font-weight: bold; color: rgb(34, 34, 34);">Cause</strong>: Some anti-virus programs mistakenly recognize some source files in the Android source tree as if they contained viruses.</p><p style="margin: 0px 0px 15px;"><strong style="font-weight: bold; color: rgb(34, 34, 34);">Fix</strong>: After verifying that there are no actual viruses involved, disable anti-virus on the Android tree. This has the added benefit of reducing build times.</p><h3 style="color: rgb(51, 51, 51); font-size: 21px; font-weight: 400; margin: 21px 0px 14px;">Build errors related to using the wrong compiler.</h3><p style="margin: 0px 0px 15px;"><strong style="font-weight: bold; color: rgb(34, 34, 34);">Symptom</strong>: The build fails with various symptoms. One such symptom is <code style="font-size: 13px; color: rgb(0, 102, 0); font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-family: monospace;">cc1: error: unrecognized command line option &quot;-m32&quot;</code></p><p style="margin: 0px 0px 15px;"><strong style="font-weight: bold; color: rgb(34, 34, 34);">Cause</strong>: The Android build system uses the default compiler in the PATH, assuming it's a suitable compiler to generate binaries that run on the host. Other situations (e.g. using the Android NDK or building the kernel) cause the default compiler to not be a host compiler.</p><p style="margin: 0px 0px 15px;"><strong style="font-weight: bold; color: rgb(34, 34, 34);">Fix</strong>: Use a &quot;clean&quot; shell, in which no previous actions could have swapped the default compiler.</p><h3 style="color: rgb(51, 51, 51); font-size: 21px; font-weight: 400; margin: 21px 0px 14px;">Build errors caused by non-default tool settings.</h3><p style="margin: 0px 0px 15px;"><strong style="font-weight: bold; color: rgb(34, 34, 34);">Symptom</strong>: The build fails with various symptoms, possibly complaining about missing files or files that have the wrong format. One such symptom is <code style="font-size: 13px; color: rgb(0, 102, 0); font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-family: monospace;">member [...] in archive is not an object</code>.</p><p style="margin: 0px 0px 15px;"><strong style="font-weight: bold; color: rgb(34, 34, 34);">Cause</strong>: The Android build system tends to use many host tools and to rely on their default behaviors. Some settings change those tools' behaviors and make them behave in ways that confuse the build system. Variables known to cause such issues are <code style="font-size: 13px; color: rgb(0, 102, 0); font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-family: monospace;">CDPATH</code> and <code style="font-size: 13px; color: rgb(0, 102, 0); font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-family: monospace;">GREP_OPTIONS</code>.</p><p style="margin: 0px 0px 15px;"><strong style="font-weight: bold; color: rgb(34, 34, 34);">Fix</strong>: Build Android in an environment that has as few customizations as possible.</p><h3 style="color: rgb(51, 51, 51); font-size: 21px; font-weight: 400; margin: 21px 0px 14px;">Build error with 4.0.x and earlier on MacOS 10.7.</h3><p style="margin: 0px 0px 15px;"><strong style="font-weight: bold; color: rgb(34, 34, 34);">Symptom</strong>: Building IceCreamSandwich 4.0.x (and older versions) fails on MacOS 10.7 with errors similar to this:<code style="font-size: 13px; color: rgb(0, 102, 0); font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-family: monospace;">Undefined symbols for architecture i386: &quot;_SDL_Init&quot;</code></p><p style="margin: 0px 0px 15px;"><strong style="font-weight: bold; color: rgb(34, 34, 34);">Cause</strong>: 4.0.x is not compatible with MacOS 10.7.</p><p style="margin: 0px 0px 15px;"><strong style="font-weight: bold; color: rgb(34, 34, 34);">Fix</strong>: Either downgrade to MacOS 10.6, or use the master branch, which can be built on MacOS 10.7.</p><pre style="font-size: 13px; margin: 0px 0px 1em; color: rgb(0, 102, 0); font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-family: monospace; padding: 1em; overflow: auto; border: 1px solid rgb(221, 221, 221); background: rgb(247, 247, 247);"><code style="font-size: 13px; color: rgb(0, 102, 0); font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-family: monospace;"><span style="color: rgb(0, 0, 0);">$ repo init </span><span style="color: rgb(102, 102, 0);">-</span><span style="color: rgb(0, 0, 0);">b master<br/>$ repo sync<br/></span></code></pre><h3 style="color: rgb(51, 51, 51); font-size: 21px; font-weight: 400; margin: 21px 0px 14px;">Build error on MacOS with XCode 4.3.</h3><p style="margin: 0px 0px 15px;"><strong style="font-weight: bold; color: rgb(34, 34, 34);">Symptom</strong>: All builds fail when using XCode 4.3.</p><p style="margin: 0px 0px 15px;"><strong style="font-weight: bold; color: rgb(34, 34, 34);">Cause</strong>: XCode 4.3 switched the default compiler from gcc to llvm, and llvm rejects code that used to be accepted by gcc.</p><p style="margin: 0px 0px 15px;"><strong style="font-weight: bold; color: rgb(34, 34, 34);">Fix</strong>: Use XCode 4.2.</p><h3 style="color: rgb(51, 51, 51); font-size: 21px; font-weight: 400; margin: 21px 0px 14px;">Build error with 4.0.x and earlier on Ubuntu 11.10.</h3><p style="margin: 0px 0px 15px;"><strong style="font-weight: bold; color: rgb(34, 34, 34);">Symptom</strong>: Building IceCreamSandwich 4.0.x (and older versions) on Ubuntu 11.10 and newer fails with errors similar to this: <code style="font-size: 13px; color: rgb(0, 102, 0); font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-family: monospace;">&lt;command-line&gt;:0:0: warning: &quot;_FORTIFY_SOURCE&quot; redefined [enabled by default]</code></p><p style="margin: 0px 0px 15px;"><strong style="font-weight: bold; color: rgb(34, 34, 34);">Cause</strong>: Ubuntu 11.10 uses a version of gcc where that symbol is defined by default, and Android also defines that symbol, which causes a conflict.</p><p style="margin: 0px 0px 15px;"><strong style="font-weight: bold; color: rgb(34, 34, 34);">Fix</strong>: Either downgrade to Ubuntu 10.04, or use the master branch, which can be compiled on Ubuntu 11.10 and newer.</p><pre style="font-size: 13px; margin: 0px 0px 1em; color: rgb(0, 102, 0); font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-family: monospace; padding: 1em; overflow: auto; border: 1px solid rgb(221, 221, 221); background: rgb(247, 247, 247);"><code style="font-size: 13px; color: rgb(0, 102, 0); font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-family: monospace;"><span style="color: rgb(0, 0, 0);">$ repo init </span><span style="color: rgb(102, 102, 0);">-</span><span style="color: rgb(0, 0, 0);">b master<br/>$ repo sync<br/></span></code></pre><h2 style="color: rgb(51, 51, 51); font-size: 26px; margin: 32px 0px 0px; padding: 0px; font-weight: 300;">Source sync issues</h2><hr style="height: 1px; margin: 5px 0px 20px; border: 0px; background: rgb(204, 204, 204);"/><h2 style="color: rgb(51, 51, 51); font-size: 26px; margin: 32px 0px 0px; padding: 0px; font-weight: 300;"></h2><hr style="height: 1px; margin: 5px 0px 20px; border: 0px; background: rgb(204, 204, 204);"/><h3 style="color: rgb(51, 51, 51); font-size: 21px; font-weight: 400; margin: 21px 0px 14px;">Difficulties syncing the source code (proxy issues).</h3><p style="margin: 0px 0px 15px;"><strong style="font-weight: bold; color: rgb(34, 34, 34);">Symptom</strong>: <code style="font-size: 13px; color: rgb(0, 102, 0); font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-family: monospace;">repo init</code> or <code style="font-size: 13px; color: rgb(0, 102, 0); font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-family: monospace;">repo sync</code> fail with http errors, typically 403 or 500.</p><p style="margin: 0px 0px 15px;"><strong style="font-weight: bold; color: rgb(34, 34, 34);">Cause</strong>: There are quite a few possible causes, most often related to http proxies, which have difficulties handling the large amounts of data getting transfered.</p><p style="margin: 0px 0px 15px;"><strong style="font-weight: bold; color: rgb(34, 34, 34);">Fix</strong>: While there's no general solution, using python 2.7 and explicitly using <code style="font-size: 13px; color: rgb(0, 102, 0); font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-family: monospace;">repo sync -j1</code> have been reported to improve the situation for some users.</p><h3 style="color: rgb(51, 51, 51); font-size: 21px; font-weight: 400; margin: 21px 0px 14px;">Difficulties syncing the source tree (VirtualBox Ethernet issues).</h3><p style="margin: 0px 0px 15px;"><strong style="font-weight: bold; color: rgb(34, 34, 34);">Symptom</strong>: When running <code style="font-size: 13px; color: rgb(0, 102, 0); font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-family: monospace;">repo sync</code> in some VirtualBox installations, the process hangs or fails with a variety of possible symptoms. One such symptom is <code style="font-size: 13px; color: rgb(0, 102, 0); font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-family: monospace;">DownloadError: HTTP 500 (Internal Server Error: Server got itself in trouble)</code>.</p><p style="margin: 0px 0px 15px;"><strong style="font-weight: bold; color: rgb(34, 34, 34);">Cause</strong>: The default network behavior of VirtualBox is to use NAT (Network Address Translation) to connect the guest system to the network. The heavy network activity of repo sync triggers some corner cases in the NAT code.</p><p style="margin: 0px 0px 15px;"><strong style="font-weight: bold; color: rgb(34, 34, 34);">Fix</strong>: Configure VirtualBox to use bridged network instead of NAT.</p><h3 style="color: rgb(51, 51, 51); font-size: 21px; font-weight: 400; margin: 21px 0px 14px;">Difficulties syncing the source tree (DNS issues).</h3><p style="margin: 0px 0px 15px;"><strong style="font-weight: bold; color: rgb(34, 34, 34);">Symptom</strong>: When running <code style="font-size: 13px; color: rgb(0, 102, 0); font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-family: monospace;">repo sync</code>, the process fails with various errors related to not recognizing the hostname. One such error is <code style="font-size: 13px; color: rgb(0, 102, 0); font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-family: monospace;">&lt;urlopen error [Errno -2] Name or service not known&gt;</code>.</p><p style="margin: 0px 0px 15px;"><strong style="font-weight: bold; color: rgb(34, 34, 34);">Cause</strong>: Some DNS systems have a hard time coping with the high number of queries involved in syncing the source tree (there can be several hundred requests in a worst-case scenario).</p><p style="margin: 0px 0px 15px;"><strong style="font-weight: bold; color: rgb(34, 34, 34);">Fix</strong>: Manually resolve the relevant hostnames, and hard-code those results locally.</p><p style="margin: 0px 0px 15px;">You can resolve them with the <code style="font-size: 13px; color: rgb(0, 102, 0); font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-family: monospace;">nslookup</code> command, which will give you one numerical IP address for each of those (typically in the &quot;Address&quot; part of the output).</p><pre style="font-size: 13px; margin: 0px 0px 1em; color: rgb(0, 102, 0); font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-family: monospace; padding: 1em; overflow: auto; border: 1px solid rgb(221, 221, 221); background: rgb(247, 247, 247);"><code style="font-size: 13px; color: rgb(0, 102, 0); font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-family: monospace;"><span style="color: rgb(0, 0, 0);">$ nslookup googlesource</span><span style="color: rgb(102, 102, 0);">.</span><span style="color: rgb(0, 0, 0);">com<br/>$ nslookup android</span><span style="color: rgb(102, 102, 0);">.</span><span style="color: rgb(0, 0, 0);">googlesource</span><span style="color: rgb(102, 102, 0);">.</span><span style="color: rgb(0, 0, 0);">com<br/></span></code></pre><p style="margin: 0px 0px 15px;">You can then hard-code them locally by editing <code style="font-size: 13px; color: rgb(0, 102, 0); font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-family: monospace;">/etc/hosts</code>, and adding two lines in that file, of the form:</p><pre style="font-size: 13px; margin: 0px 0px 1em; color: rgb(0, 102, 0); font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-family: monospace; padding: 1em; overflow: auto; border: 1px solid rgb(221, 221, 221); background: rgb(247, 247, 247);"><code style="font-size: 13px; color: rgb(0, 102, 0); font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-family: monospace;"><span style="color: rgb(0, 0, 0);">aaa</span><span style="color: rgb(102, 102, 0);">.</span><span style="color: rgb(0, 0, 0);">bbb</span><span style="color: rgb(102, 102, 0);">.</span><span style="color: rgb(0, 0, 0);">ccc</span><span style="color: rgb(102, 102, 0);">.</span><span style="color: rgb(0, 0, 0);">ddd googlesource</span><span style="color: rgb(102, 102, 0);">.</span><span style="color: rgb(0, 0, 0);">com<br/>eee</span><span style="color: rgb(102, 102, 0);">.</span><span style="color: rgb(0, 0, 0);">fff</span><span style="color: rgb(102, 102, 0);">.</span><span style="color: rgb(0, 0, 0);">ggg</span><span style="color: rgb(102, 102, 0);">.</span><span style="color: rgb(0, 0, 0);">hhh android</span><span style="color: rgb(102, 102, 0);">.</span><span style="color: rgb(0, 0, 0);">googlesource</span><span style="color: rgb(102, 102, 0);">.</span><span style="color: rgb(0, 0, 0);">com<br/></span></code></pre><p style="margin: 0px 0px 15px;">Note that this will only work as long as the servers' addresses don't change, and if they do and you can't connect you'll have to resolve those hostnames again and edit <code style="font-size: 13px; color: rgb(0, 102, 0); font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-family: monospace;">etc/hosts</code> accordingly.</p><h3 style="color: rgb(51, 51, 51); font-size: 21px; font-weight: 400; margin: 21px 0px 14px;">Difficulties syncing the source tree (TCP issues).</h3><p style="margin: 0px 0px 15px;"><strong style="font-weight: bold; color: rgb(34, 34, 34);">Symptom</strong>: <code style="font-size: 13px; color: rgb(0, 102, 0); font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-family: monospace;">repo sync</code> hangs while syncing, often when it's completed 99% of the sync.</p><p style="margin: 0px 0px 15px;"><strong style="font-weight: bold; color: rgb(34, 34, 34);">Cause</strong>: Some settings in the TCP/IP stack cause difficulties in some network environments, such that <code style="font-size: 13px; color: rgb(0, 102, 0); font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-family: monospace;">repo sync</code>neither completes nor fails.</p><p style="margin: 0px 0px 15px;"><strong style="font-weight: bold; color: rgb(34, 34, 34);">Fix</strong>: On linux, <code style="font-size: 13px; color: rgb(0, 102, 0); font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-family: monospace;">sysctl -w net.ipv4.tcp_window_scaling=0</code>. On MacOS, disable the rfc1323 extension in the network settings.</p><h2 style="color: rgb(51, 51, 51); font-size: 26px; margin: 32px 0px 0px; padding: 0px; font-weight: 300;">Runtime issues</h2><hr style="height: 1px; margin: 5px 0px 20px; border: 0px; background: rgb(204, 204, 204);"/><h3 style="color: rgb(51, 51, 51); font-size: 21px; font-weight: 400; margin: 21px 0px 14px;">Camera and GPS don't work on Galaxy Nexus.</h3><p style="margin: 0px 0px 15px;"><strong style="font-weight: bold; color: rgb(34, 34, 34);">Symptom</strong>: Camera and GPS don't work on Galaxy Nexus. As an example, the Camera application crashes as soon as it's launched.</p><p style="margin: 0px 0px 15px;"><strong style="font-weight: bold; color: rgb(34, 34, 34);">Cause</strong>: Those hardware peripherals require proprietary libraries that aren't available in the Android Open Source Project.</p><p style="margin: 0px 0px 15px;"><strong style="font-weight: bold; color: rgb(34, 34, 34);">Fix</strong>: None.</p></div><div style="margin: 10px auto 0px; width: auto; clear: both; font-size: 11px; color: rgb(153, 153, 153); padding: 15px 0px;"><div style="margin: 0px 0px 0px 10px; font-size: 14px; float: right !important;"><a href="http://source.android.com/source/known-issues.html#" style="border-image-source: initial; border-image-slice: initial; border-image-width: initial; border-image-outset: initial; border-image-repeat: initial; border-radius: 2px; cursor: pointer; display: inline-block; border: 1px solid rgb(57, 144, 171); color: rgb(255, 255, 255); margin-right: 16px; font-weight: 400; min-width: 54px; outline: 0px; padding: 8px 15px; text-align: center; text-decoration: none; background-image: -webkit-linear-gradient(top, rgb(47, 173, 219), rgb(0, 153, 204)); background-color: rgb(0, 153, 204);">Site Feedback</a></div><div>Except as noted, this content is licensed under <a href="http://creativecommons.org/licenses/by/2.5/" style="color: rgb(37, 138, 175); text-decoration: none;">Creative Commons Attribution 2.5</a>. For details and restrictions, see the <a href="http://source.android.com/license.html" style="color: rgb(37, 138, 175); text-decoration: none;">Content License</a>.</div><div style="margin: 0px 0px 15px;"><div><a href="http://source.android.com/source/index.html" style="color: rgb(37, 138, 175); text-decoration: none;">About Android</a>  |  <a href="http://source.android.com/source/community.html" style="color: rgb(37, 138, 175); text-decoration: none;">Community</a>  |  <a href="http://source.android.com/legal.html" style="color: rgb(37, 138, 175); text-decoration: none;">Legal</a>  | </div></div></div></div></div></span>
</div></body></html> 