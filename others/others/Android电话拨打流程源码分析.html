<html>
<head>
  <title>Android电话拨打流程源码分析</title>
  <basefont face="Microsoft YaHei" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/301769 (zh-CN); Windows/6.3.9600 (Win64);"/>
  <style>
    body, td {
      font-family: Microsoft YaHei;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="794"/>
<h1>Android电话拨打流程源码分析</h1>

<div>
<span><div style="padding: 0px; border-bottom-style: none; font-family: Helvetica, &apos;Tahoma, Arial&apos;, sans-serif; font-size: 0.75em; color: rgb(51, 51, 51); height: 40px; background: rgb(72, 82, 94);"><div style="box-sizing: content-box; margin: 0px auto; padding: 0px; text-align: left; width: 960px;"><div style="box-sizing: content-box; margin: 0px; padding: 0px; text-align: left; overflow: visible; float: left; font-size: 12px; height: 40px; width: auto;"><a href="http://www.csdn.net/?ref=toolbar" style="color: rgb(51, 51, 51); text-decoration: none; box-sizing: content-box; font-size: 16px; font-weight: normal; width: 40px; height: 40px; margin: 0px; position: relative; z-index: 1001; display: block; float: left; padding: 0px; background-image: url(http://c.csdnimg.cn/public/common/toolbar/images/f_icon.png); background-position: 0px 0px; background-repeat: no-repeat;" target="_blank" title="CSDN首页"></a><a href="http://blog.csdn.net/?ref=toolbar_logo" style="color: rgb(51, 51, 51); text-decoration: none; box-sizing: content-box; font-size: 12px; font-weight: normal; margin-left: 10px; width: 120px; height: 40px; float: left; background-image: url(http://c.csdnimg.cn/public/common/toolbar/images/f_name.png); background-position: -162px -52px;" title="频道首页"></a></div><div style="box-sizing: content-box; margin: 0px; padding: 0px; text-align: left; float: right;"><ul style="box-sizing: content-box; margin: 0px; padding: 0px; text-align: left; list-style: none;"><li style="box-sizing: content-box; margin: 10px auto 0px; padding: 0px; text-align: left; font-size: 16px; width: 20px; height: 20px; position: relative; z-index: 1001; background-image: url(http://c.csdnimg.cn/public/common/toolbar/images/f_icon.png); background-position: 0px 1px; background-repeat: no-repeat;"><img src="http://avatar.csdn.net/F/1/5/2_android_ruben.jpg" style="border: 0px; box-sizing: content-box; display: block; height: 20px; margin: 0px; width: 20px;"></img></li></ul></div></div></div><div style="background: url(http://static.blog.csdn.net/skin/ink/images/head_bg.jpg) 50% 0% no-repeat;"><div style="width: 980px; height: 130px; margin: 0px auto; padding: 70px 0px 0px; text-align: left;"><div><h2 style="margin: 0px 20px 0px 0px; padding: 0px; color: rgb(54, 46, 43); font-weight: bold; font-style: normal; font-variant: normal; font-stretch: normal; font-size: 30px; font-family: &apos;Microsoft YaHei&apos;;"><a href="http://blog.csdn.net/kevinx_xu" style="color: rgb(54, 46, 43); text-decoration: none;">kevinx_xu的专栏</a></h2><h3 style="margin: 0px; padding: 5px 0px 0px; color: rgb(54, 46, 43); font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 18px; font-family: &apos;Microsoft YaHei&apos;;"></h3></div></div><div style="display: block; clear: both; width: 980px; height: 42px; margin: 0px auto; padding: 22px 0px 0px; text-align: left;"><div style="text-align: right;"><ul style="float: right;"><li style="display: inline; float: left; margin: 0px 5px;"><a href="http://blog.csdn.net/kevinx_xu?viewmode=contents" style="color: rgb(102, 102, 102); text-decoration: none; display: inline-block; height: 26px; padding: 0px 0px 0px 10px; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 12px; font-family: Arial, Helvetica, sans-serif; cursor: pointer; background: url(http://static.blog.csdn.net/images/btn_pub_nav.gif) 0% 0px no-repeat;"><span style="display: inline-block; height: 16px; padding: 5px 10px 5px 0px; background: url(http://static.blog.csdn.net/images/btn_pub_nav.gif) 100% -26px no-repeat;"><img src="http://static.blog.csdn.net/images/ico_list.gif" style="border: none; margin: 0px 4px 0px 0px; vertical-align: middle;"></img>目录视图</span></a></li><li style="display: inline; float: left; margin: 0px 5px;"><a href="http://blog.csdn.net/kevinx_xu?viewmode=list" style="color: rgb(102, 102, 102); text-decoration: none; display: inline-block; height: 26px; padding: 0px 0px 0px 10px; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 12px; font-family: Arial, Helvetica, sans-serif; cursor: pointer; background: url(http://static.blog.csdn.net/images/btn_pub_nav.gif) 0% 0px no-repeat;"><span style="display: inline-block; height: 16px; padding: 5px 10px 5px 0px; background: url(http://static.blog.csdn.net/images/btn_pub_nav.gif) 100% -26px no-repeat;"><img src="http://static.blog.csdn.net/images/ico_summary.gif" style="border: none; margin: 0px 4px 0px 0px; vertical-align: middle;"></img>摘要视图</span></a></li><li style="display: inline; float: left; margin: 0px 5px;"><a href="http://blog.csdn.net/kevinx_xu/rss/list" style="color: rgb(102, 102, 102); text-decoration: none; display: inline-block; height: 26px; padding: 0px 0px 0px 10px; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 12px; font-family: Arial, Helvetica, sans-serif; cursor: pointer; background: url(http://static.blog.csdn.net/images/btn_pub_nav.gif) 0% 0px no-repeat;"><span style="display: inline-block; height: 16px; padding: 5px 10px 5px 0px; background: url(http://static.blog.csdn.net/images/btn_pub_nav.gif) 100% -26px no-repeat;"><img src="http://static.blog.csdn.net/images/ico_rss.gif" style="border: none; margin: 0px 4px 0px 0px; vertical-align: middle;"></img>订阅</span></a></li></ul></div></div><div style="display: block; width: 960px; margin: 0px auto; padding: 9px; text-align: left;"><div style="float: right; width: 740px; overflow: hidden; padding: 1px; border: 1px solid rgb(224, 198, 166); background: rgb(255, 255, 255);"><div><div style="margin: 10px 2px; padding: 2px 4px 2px 20px; border: 1px dashed rgb(248, 204, 126); font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 12px; font-family: Arial; background: url(http://static.blog.csdn.net/images/ico_notice.png) 5px 50% no-repeat rgb(255, 252, 231);"><a href="http://blog.csdn.net/phodal/article/details/50960160" style="color: rgb(106, 57, 6); text-decoration: none;" target="_blank"><font color="red">为什么未来是全栈工程师的世界 </font></a>    <a href="http://blog.csdn.net/csdnedu/article/details/50788201" style="color: rgb(106, 57, 6); text-decoration: none;" target="_blank"><font color="blue">前端精品课程免费看，写课评赢心动大礼！ </font></a><a href="http://lib.csdn.net/base/23" style="color: rgb(106, 57, 6); text-decoration: none;" target="_blank"><font color="blue"><font color="red">AngularJS知识库发布</font></font></a></div><div style="padding: 0px; margin: 0px; border: 0px;"><div style="box-sizing: content-box; width: 311px; height: 286px; overflow: hidden; z-index: 2147483647; position: fixed; bottom: 10px; right: 99px;"><div style="box-sizing: content-box; position: absolute; width: 61px; height: 20px; top: 0px; left: 250px; margin: 0px 0px 5px; padding: 0px; cursor: pointer; overflow: hidden;"><div style="box-sizing: content-box; width: 40px; height: 20px; color: rgb(255, 255, 255); float: left; margin-right: 1px; font-size: 12px; font-family: 微软雅黑; text-align: center; background-color: rgb(153, 153, 153);">关闭</div><a style="color: rgb(106, 57, 6); text-decoration: none; padding: 0px; display: inline-block; border: none; overflow: hidden; height: 20px; cursor: pointer; width: 20px; margin-bottom: 3px; float: left; background: url(http://cpro.baidustatic.com/cpro/ui/noexpire/img/2.0.1/xuanfu_close.png) 0px 0px no-repeat;"></a></div></div></div><div style="margin: 20px;"><div style="display: block; margin: 5px 0px; color: rgb(0, 0, 0); font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 20px; font-family: &apos;Microsoft YaHei&apos;;"> 
<h1 style="margin: 0px; padding: 0px; display: inline; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 20px; font-family: &apos;Microsoft YaHei&apos;; vertical-align: middle;"><a href="http://blog.csdn.net/kevinx_xu/article/details/11845619" style="color: rgb(0, 0, 0); text-decoration: none;">Android电话拨打流程源码分析</a></h1></div><div style="padding: 0px 20px 5px; color: rgb(153, 153, 153); font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 12px; font-family: Arial; text-align: right; border-bottom-style: solid; border-bottom-width: 1px; border-bottom-color: rgb(237, 237, 237); margin: 0px -20px; overflow: hidden;"><div><span style="margin: 0px 5px 0px 0px;">2013-09-20 13:21</span> <span style="margin: 0px 5px; padding: 0px 0px 0px 14px; background: url(http://static.blog.csdn.net/images/ico_view.png) 0% 50% no-repeat;" title="阅读次数">11011人阅读</span> <span style="margin: 0px 5px; padding: 0px 0px 0px 14px; background: url(http://static.blog.csdn.net/images/ico_comm.png) 0% 50% no-repeat;" title="评论次数"><a href="http://blog.csdn.net/kevinx_xu/article/details/11845619#comments" style="color: rgb(106, 57, 6); text-decoration: none;">评论</a>(1)</span> <span style="margin: 0px 5px;"><a style="color: rgb(106, 57, 6); text-decoration: none;" target="_blank" title="收藏">收藏</a></span> <span style="margin: 0px 5px;"><a href="http://blog.csdn.net/kevinx_xu/article/details/11845619#report" style="color: rgb(106, 57, 6); text-decoration: none;" title="举报">举报</a></span></div></div><div style="margin: 0px -20px; border-bottom-style: solid; border-bottom-width: 1px; border-bottom-color: rgb(237, 237, 237); padding: 0px 20px; height: 46px;"><div style="display: inline-block; font-size: 14px; color: rgb(51, 51, 51);"><img src="http://static.blog.csdn.net/images/category_icon.jpg" style="border: none; vertical-align: middle;"></img> <span style="display: inline-block; vertical-align: middle;">分类：</span></div>
 
<div style="display: inline-block; font-size: 14px; color: rgb(223, 52, 52);">RIL（radio interface layer）<em style="font-style: normal;">（15）</em> <img src="http://static.blog.csdn.net/images/arrow_triangle%20_down.jpg" style="border: none; display: inline;"></img></div></div><div style="border: 1px solid rgb(204, 204, 204); float: left; min-width: 200px; padding: 4px 10px; background: rgb(238, 238, 238);"><p style="text-align: right; margin: 0px;"><span style="float: left;">目录<a href="http://blog.csdn.net/kevinx_xu/article/details/11845619#" style="color: rgb(106, 57, 6); text-decoration: none;" title="系统根据文章中H1到H6标签自动生成文章目录">(?)</a></span><a href="http://blog.csdn.net/kevinx_xu/article/details/11845619#" style="color: rgb(106, 57, 6); text-decoration: none;" title="展开">[+]</a></p></div><div style="margin: 20px 0px 0px; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 14px; font-family: Arial;"><p>前面分析了电话拨号界面及电话呼叫界面，由于Android的电话Phone设计的很复杂，因此先从UI层入手分析。想要了解Android的电话拨号UI，请查看<a href="http://blog.csdn.net/yangwen123/article/details/9763559" style="color: rgb(106, 57, 6); text-decoration: none;" target="_blank"><span style="color: rgb(59, 89, 152);">Android电话拨号UI分析</span></a>，电话拨号UI在Contacts包中。想要了解Android电话呼叫UI，请查看<a href="http://blog.csdn.net/yangwen123/article/details/9367551" style="color: rgb(106, 57, 6); text-decoration: none;" target="_blank"><span style="color: rgb(59, 89, 152);">Android电话Phone UI分析</span></a>，该UI在Phone包中，了解完电话想要UI后，还必须首先了解Android的Phone设计框架，<a href="http://blog.csdn.net/yangwen123/article/details/8946091" style="color: rgb(106, 57, 6); text-decoration: none;" target="_blank"><span style="color: rgb(59, 89, 152);">Android电话Phone设计框架介绍</span></a>介绍了Phone的框架设计及Phone进程的启动，本文以源码的形式介绍Android的电话拨打流程。点击Launcher上的拨号图标，首先进入电话拨号界面，前面已经分析了，该UI在Contacts包中，启动显示的是DialtactsActivity，关于DialtactsActivity的布局解析、UI布局在<a href="http://blog.csdn.net/yangwen123/article/details/9763559" style="color: rgb(106, 57, 6); text-decoration: none;" target="_blank"><span style="color: rgb(59, 89, 152);">Android电话拨号UI分析</span></a>中有详细的分析，这里不在重复介绍。我们从点击拨号按钮开始分析电话的拨号流程：</p><p>DialpadFragment.java</p><div style="font-family: Consolas, &apos;Courier New&apos;, Courier, mono, serif; font-size: 12px; width: 693px; overflow: auto; padding-top: 1px; text-align: left; margin: 18px 0px !important; background-color: rgb(231, 229, 220);"><div style="padding-left: 45px;"><div style="padding: 3px 8px 10px 10px; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 9px; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; color: silver; border-left-width: 3px; border-left-style: solid; border-left-color: rgb(108, 226, 108); background-color: rgb(248, 248, 248);"><strong>[html]</strong> <a href="http://blog.csdn.net/yangwen123/article/details/9790715#" style="color: rgb(160, 160, 160); text-decoration: none; border: none; padding: 1px; margin: 0px 10px 0px 0px; font-size: 9px; display: inline-block; width: 16px; height: 16px; text-indent: -2000px; background-image: url(http://static.blog.csdn.net/scripts/SyntaxHighlighter/styles/images/default/ico_plain.gif); background-attachment: initial; background-color: inherit; background-size: initial; background-origin: initial; background-clip: initial; background-position: 0% 0%; background-repeat: no-repeat;" target="_blank" title="view plain">view plain</a><a href="http://blog.csdn.net/yangwen123/article/details/9790715#" style="color: rgb(160, 160, 160); text-decoration: none; border: none; padding: 1px; margin: 0px 10px 0px 0px; font-size: 9px; display: inline-block; width: 16px; height: 16px; text-indent: -2000px; background-image: url(http://static.blog.csdn.net/scripts/SyntaxHighlighter/styles/images/default/ico_copy.gif); background-attachment: initial; background-color: inherit; background-size: initial; background-origin: initial; background-clip: initial; background-position: 0% 0%; background-repeat: no-repeat;" target="_blank" title="copy">copy</a></div></div><ol start="1" style="margin: 0px 0px 1px 45px !important; padding: 0px; border: none; list-style: decimal; color: rgb(92, 92, 92); background-color: rgb(255, 255, 255);"><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedState) {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> ...  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">// Check whether we should show the onscreen &quot;Dial&quot; button.  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"><span style="margin: 0px; padding: 0px; border: none; color: red; background-color: inherit;">mDialButton</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> = </span><span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">mAdditionalButtonsRow</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">.findViewById(R.id.dialButton);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">if (r.getBoolean(R.bool.config_show_onscreen_dial_button)) {  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    mDialButton.setOnClickListener(this);  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">} else {  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    mDialButton.setVisibility(View.GONE); // It's VISIBLE by default  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: red; background-color: inherit;">mDialButton</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> = </span><span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">null</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">;  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">}  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">...  </span></li></ol></div><p>拨号按钮的单击事件响应：</p><div style="font-family: Consolas, &apos;Courier New&apos;, Courier, mono, serif; font-size: 12px; width: 693px; overflow: auto; padding-top: 1px; text-align: left; margin: 18px 0px !important; background-color: rgb(231, 229, 220);"><div style="padding-left: 45px;"><div style="padding: 3px 8px 10px 10px; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 9px; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; color: silver; border-left-width: 3px; border-left-style: solid; border-left-color: rgb(108, 226, 108); background-color: rgb(248, 248, 248);"><strong>[java]</strong> <a href="http://blog.csdn.net/yangwen123/article/details/9790715#" style="color: rgb(160, 160, 160); text-decoration: none; border: none; padding: 1px; margin: 0px 10px 0px 0px; font-size: 9px; display: inline-block; width: 16px; height: 16px; text-indent: -2000px; background-image: url(http://static.blog.csdn.net/scripts/SyntaxHighlighter/styles/images/default/ico_plain.gif); background-attachment: initial; background-color: inherit; background-size: initial; background-origin: initial; background-clip: initial; background-position: 0% 0%; background-repeat: no-repeat;" target="_blank" title="view plain">view plain</a><a href="http://blog.csdn.net/yangwen123/article/details/9790715#" style="color: rgb(160, 160, 160); text-decoration: none; border: none; padding: 1px; margin: 0px 10px 0px 0px; font-size: 9px; display: inline-block; width: 16px; height: 16px; text-indent: -2000px; background-image: url(http://static.blog.csdn.net/scripts/SyntaxHighlighter/styles/images/default/ico_copy.gif); background-attachment: initial; background-color: inherit; background-size: initial; background-origin: initial; background-clip: initial; background-position: 0% 0%; background-repeat: no-repeat;" target="_blank" title="copy">copy</a></div></div><ol start="1" style="margin: 0px 0px 1px 45px !important; padding: 0px; border: none; list-style: decimal; color: rgb(92, 92, 92); background-color: rgb(255, 255, 255);"><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">public</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> </span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">void</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> onClick(View view) {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">switch</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (view.getId()) {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">case</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> R.id.dialButton: {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            mHaptic.vibrate();   </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            dialButtonPressed();  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">return</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">;  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        }  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        ...  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    }  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">}  </span></li></ol></div><p>调用dialButtonPressed()函数发起电话呼叫</p><div style="font-family: Consolas, &apos;Courier New&apos;, Courier, mono, serif; font-size: 12px; width: 693px; overflow: auto; padding-top: 1px; text-align: left; margin: 18px 0px !important; background-color: rgb(231, 229, 220);"><div style="padding-left: 45px;"><div style="padding: 3px 8px 10px 10px; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 9px; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; color: silver; border-left-width: 3px; border-left-style: solid; border-left-color: rgb(108, 226, 108); background-color: rgb(248, 248, 248);"><strong>[java]</strong> <a href="http://blog.csdn.net/yangwen123/article/details/9790715#" style="color: rgb(160, 160, 160); text-decoration: none; border: none; padding: 1px; margin: 0px 10px 0px 0px; font-size: 9px; display: inline-block; width: 16px; height: 16px; text-indent: -2000px; background-image: url(http://static.blog.csdn.net/scripts/SyntaxHighlighter/styles/images/default/ico_plain.gif); background-attachment: initial; background-color: inherit; background-size: initial; background-origin: initial; background-clip: initial; background-position: 0% 0%; background-repeat: no-repeat;" target="_blank" title="view plain">view plain</a><a href="http://blog.csdn.net/yangwen123/article/details/9790715#" style="color: rgb(160, 160, 160); text-decoration: none; border: none; padding: 1px; margin: 0px 10px 0px 0px; font-size: 9px; display: inline-block; width: 16px; height: 16px; text-indent: -2000px; background-image: url(http://static.blog.csdn.net/scripts/SyntaxHighlighter/styles/images/default/ico_copy.gif); background-attachment: initial; background-color: inherit; background-size: initial; background-origin: initial; background-clip: initial; background-position: 0% 0%; background-repeat: no-repeat;" target="_blank" title="copy">copy</a></div></div><ol start="1" style="margin: 0px 0px 1px 45px !important; padding: 0px; border: none; list-style: decimal; color: rgb(92, 92, 92); background-color: rgb(255, 255, 255);"><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">public</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> </span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">void</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> dialButtonPressed() {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">(mDigits == </span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">null</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">){  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        Log.e(TAG,<span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;dialButtonPressed,mDigits == null&quot;</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">return</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">;  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    }  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">//未输入号码处理</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (isDigitsEmpty()) {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        handleDialButtonClickWithEmptyDigits();  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    } <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">else</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">final</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> String number = mDigits.getText().toString();  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// &quot;persist.radio.otaspdial&quot; is a temporary hack needed for one carrier's automated</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// test equipment.</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (number != </span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">null</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">&amp;&amp; !TextUtils.isEmpty(mProhibitedPhoneNumberRegexp)  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                &amp;&amp; number.matches(mProhibitedPhoneNumberRegexp)  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                &amp;&amp; (SystemProperties.getInt(<span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;persist.radio.otaspdial&quot;</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">, </span><span style="margin: 0px; padding: 0px; border: none; color: rgb(192, 0, 0); background-color: inherit;">0</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">) != </span><span style="margin: 0px; padding: 0px; border: none; color: rgb(192, 0, 0); background-color: inherit;">1</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">)) {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            Log.i(TAG, <span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;The phone number is prohibited explicitly by a rule.&quot;</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (getActivity() != </span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">null</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">) {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                DialogFragment dialogFragment = ErrorDialogFragment.newInstance(  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                                R.string.dialog_phone_call_prohibited_title);  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                dialogFragment.show(getFragmentManager(), <span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;phone_prohibited_dialog&quot;</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            }  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">//号码输入不正确.</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            mDigits.getText().clear();  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        } <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">else</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> </span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">(number != </span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">null</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> &amp;&amp; (number.startsWith(</span><span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;,&quot;</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">) || number.startsWith(</span><span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;;&quot;</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">))){  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            mDigits.getText().clear();  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (getActivity() != </span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">null</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">) {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                Toast.makeText(getActivity(), getText(R.string.invalid_number),  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                        Toast.LENGTH_SHORT).show();  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            }  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        } <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">else</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">//启动电话呼叫界面</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">final</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> Intent intent = ContactsUtils.getCallIntent(number,(getActivity() </span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">instanceof</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> DialtactsActivity ?  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                            ((DialtactsActivity)getActivity()).getCallOrigin() : <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">null</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">));  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            startActivity(intent);  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            mClearDigitsOnStop = <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">true</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">;  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            mDigits.getText().clear();  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">(mFlagIntentNumber){  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                getActivity().finish();  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            }  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        }  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    }  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">}  </span></li></ol></div><p>函数首先对输入的号码进行检查，如果没有输入号码，直接按下拨号按钮，则调用handleDialButtonClickWithEmptyDigits函数来处理</p><div style="font-family: Consolas, &apos;Courier New&apos;, Courier, mono, serif; font-size: 12px; width: 693px; overflow: auto; padding-top: 1px; text-align: left; margin: 18px 0px !important; background-color: rgb(231, 229, 220);"><div style="padding-left: 45px;"><div style="padding: 3px 8px 10px 10px; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 9px; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; color: silver; border-left-width: 3px; border-left-style: solid; border-left-color: rgb(108, 226, 108); background-color: rgb(248, 248, 248);"><strong>[java]</strong> <a href="http://blog.csdn.net/yangwen123/article/details/9790715#" style="color: rgb(160, 160, 160); text-decoration: none; border: none; padding: 1px; margin: 0px 10px 0px 0px; font-size: 9px; display: inline-block; width: 16px; height: 16px; text-indent: -2000px; background-image: url(http://static.blog.csdn.net/scripts/SyntaxHighlighter/styles/images/default/ico_plain.gif); background-attachment: initial; background-color: inherit; background-size: initial; background-origin: initial; background-clip: initial; background-position: 0% 0%; background-repeat: no-repeat;" target="_blank" title="view plain">view plain</a><a href="http://blog.csdn.net/yangwen123/article/details/9790715#" style="color: rgb(160, 160, 160); text-decoration: none; border: none; padding: 1px; margin: 0px 10px 0px 0px; font-size: 9px; display: inline-block; width: 16px; height: 16px; text-indent: -2000px; background-image: url(http://static.blog.csdn.net/scripts/SyntaxHighlighter/styles/images/default/ico_copy.gif); background-attachment: initial; background-color: inherit; background-size: initial; background-origin: initial; background-clip: initial; background-position: 0% 0%; background-repeat: no-repeat;" target="_blank" title="copy">copy</a></div></div><ol start="1" style="margin: 0px 0px 1px 45px !important; padding: 0px; border: none; list-style: decimal; color: rgb(92, 92, 92); background-color: rgb(255, 255, 255);"><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">private</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> </span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">void</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> handleDialButtonClickWithEmptyDigits() {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (phoneIsCdma() &amp;&amp; phoneIsOffhook()) {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// This is really CDMA specific. On GSM is it possible</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// to be off hook and wanted to add a 3rd party using</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// the redial feature.</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        startActivity(newFlashIntent());  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    } <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">else</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (mDigits != </span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">null</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> &amp;&amp; !TextUtils.isEmpty(mLastNumberDialed)) {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// Recall the last number dialed.</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            mDigits.setText(mLastNumberDialed);  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// ...and move the cursor to the end of the digits string,</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// so you'll be able to delete digits using the Delete</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// button (just as if you had typed the number manually.)</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">//</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// Note we use mDigits.getText().length() here, not</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// mLastNumberDialed.length(), since the EditText widget now</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// contains a *formatted* version of mLastNumberDialed (due to</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// mTextWatcher) and its length may have changed.</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            mDigits.setSelection(mDigits.getText().length());  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        } <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">else</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// There's no &quot;last number dialed&quot; or the</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// background query is still running. There's</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// nothing useful for the Dial button to do in</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// this case.  Note: with a soft dial button, this</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// can never happens since the dial button is</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// disabled under these conditons.</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            playTone(ToneGenerator.TONE_PROP_NACK);  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        }  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    }  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">}  </span></li></ol></div><p>如果号码输入正确合法，则使用ContactsUtils工具类来创建一个Intent。</p><p>DialtactsActivity.java</p><div style="font-family: Consolas, &apos;Courier New&apos;, Courier, mono, serif; font-size: 12px; width: 693px; overflow: auto; padding-top: 1px; text-align: left; margin: 18px 0px !important; background-color: rgb(231, 229, 220);"><div style="padding-left: 45px;"><div style="padding: 3px 8px 10px 10px; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 9px; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; color: silver; border-left-width: 3px; border-left-style: solid; border-left-color: rgb(108, 226, 108); background-color: rgb(248, 248, 248);"><strong>[java]</strong> <a href="http://blog.csdn.net/yangwen123/article/details/9790715#" style="color: rgb(160, 160, 160); text-decoration: none; border: none; padding: 1px; margin: 0px 10px 0px 0px; font-size: 9px; display: inline-block; width: 16px; height: 16px; text-indent: -2000px; background-image: url(http://static.blog.csdn.net/scripts/SyntaxHighlighter/styles/images/default/ico_plain.gif); background-attachment: initial; background-color: inherit; background-size: initial; background-origin: initial; background-clip: initial; background-position: 0% 0%; background-repeat: no-repeat;" target="_blank" title="view plain">view plain</a><a href="http://blog.csdn.net/yangwen123/article/details/9790715#" style="color: rgb(160, 160, 160); text-decoration: none; border: none; padding: 1px; margin: 0px 10px 0px 0px; font-size: 9px; display: inline-block; width: 16px; height: 16px; text-indent: -2000px; background-image: url(http://static.blog.csdn.net/scripts/SyntaxHighlighter/styles/images/default/ico_copy.gif); background-attachment: initial; background-color: inherit; background-size: initial; background-origin: initial; background-clip: initial; background-position: 0% 0%; background-repeat: no-repeat;" target="_blank" title="copy">copy</a></div></div><ol start="1" style="margin: 0px 0px 1px 45px !important; padding: 0px; border: none; list-style: decimal; color: rgb(92, 92, 92); background-color: rgb(255, 255, 255);"><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">public</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> String getCallOrigin() {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">return</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> !isDialIntent(getIntent()) ? CALL_ORIGIN_DIALTACTS : </span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">null</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">;  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">}  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">/** Returns true if the given intent contains a phone number to populate the dialer with */</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">private</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> </span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">boolean</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> isDialIntent(Intent intent) {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">final</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> String action = intent.getAction();  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (Intent.ACTION_DIAL.equals(action) || ACTION_TOUCH_DIALER.equals(action)) {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">return</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> </span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">true</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">;  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    }  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (Intent.ACTION_VIEW.equals(action)) {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">final</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> Uri data = intent.getData();  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (data != </span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">null</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> &amp;&amp; Constants.SCHEME_TEL.equals(data.getScheme())) {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">return</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> </span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">true</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">;  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        }  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    }  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">return</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> </span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">false</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">;  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">}  </span></li></ol></div><p>从Launcher点击拨号图标进入的，因此isDialIntent返回true，getCallOrigin返回null</p><p>ContactsUtils.java<br/></p><div style="font-family: Consolas, &apos;Courier New&apos;, Courier, mono, serif; font-size: 12px; width: 693px; overflow: auto; padding-top: 1px; text-align: left; margin: 18px 0px !important; background-color: rgb(231, 229, 220);"><div style="padding-left: 45px;"><div style="padding: 3px 8px 10px 10px; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 9px; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; color: silver; border-left-width: 3px; border-left-style: solid; border-left-color: rgb(108, 226, 108); background-color: rgb(248, 248, 248);"><strong>[java]</strong> <a href="http://blog.csdn.net/yangwen123/article/details/9790715#" style="color: rgb(160, 160, 160); text-decoration: none; border: none; padding: 1px; margin: 0px 10px 0px 0px; font-size: 9px; display: inline-block; width: 16px; height: 16px; text-indent: -2000px; background-image: url(http://static.blog.csdn.net/scripts/SyntaxHighlighter/styles/images/default/ico_plain.gif); background-attachment: initial; background-color: inherit; background-size: initial; background-origin: initial; background-clip: initial; background-position: 0% 0%; background-repeat: no-repeat;" target="_blank" title="view plain">view plain</a><a href="http://blog.csdn.net/yangwen123/article/details/9790715#" style="color: rgb(160, 160, 160); text-decoration: none; border: none; padding: 1px; margin: 0px 10px 0px 0px; font-size: 9px; display: inline-block; width: 16px; height: 16px; text-indent: -2000px; background-image: url(http://static.blog.csdn.net/scripts/SyntaxHighlighter/styles/images/default/ico_copy.gif); background-attachment: initial; background-color: inherit; background-size: initial; background-origin: initial; background-clip: initial; background-position: 0% 0%; background-repeat: no-repeat;" target="_blank" title="copy">copy</a></div></div><ol start="1" style="margin: 0px 0px 1px 45px !important; padding: 0px; border: none; list-style: decimal; color: rgb(92, 92, 92); background-color: rgb(255, 255, 255);"><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">public</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> </span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">static</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> Intent getCallIntent(String number, String callOrigin) {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">return</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> getCallIntent(getCallUri(number), callOrigin);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">}  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">public</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> </span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">static</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> Intent getCallIntent(Uri uri, String callOrigin) {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">final</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> Intent intent = </span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">new</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> Intent(Intent.ACTION_CALL_PRIVILEGED, uri);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (callOrigin != </span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">null</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">) {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        intent.putExtra(DialtactsActivity.EXTRA_CALL_ORIGIN, callOrigin);  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    }  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">return</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> intent;  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">}  </span></li></ol></div><p>action为Intent.ACTION_CALL_PRIVILEGED，因此使用隐式启动OutgoingCallBroadcaster</p><p><img src="Android电话拨打流程源码分析_files/Image.png" type="image/png" height="508" style="border: none; max-width: 100%;" width="750"/></p><p>因此Phone进程中的OutgoingCallBroadcaster将被启动。google对电话拨号步骤有详细的说明：</p><p>/*<br/>
 * Here's the most typical outgoing call sequence:<br/>
 *<br/>
 *  (1) OutgoingCallBroadcaster receives a CALL intent and sends the<br/>
 *      NEW_OUTGOING_CALL broadcast<br/>
 *<br/>
 *  (2) The broadcast finally reaches OutgoingCallReceiver, which stashes<br/>
 *      away a copy of the original CALL intent and launches<br/>
 *      SipCallOptionHandler<br/>
 *<br/>
 *  (3) SipCallOptionHandler decides whether this is a PSTN or SIP call (and<br/>
 *      in some cases brings up a dialog to let the user choose), and<br/>
 *      ultimately calls CallController.placeCall() (from the<br/>
 *      setResultAndFinish() method) with the stashed-away intent from step<br/>
 *      (2) as the &quot;intent&quot; parameter.<br/>
 *<br/>
 *  (4) Here in CallController.placeCall() we read the phone number or SIP<br/>
 *      address out of the intent and actually initiate the call, and<br/>
 *      simultaneously launch the InCallScreen to display the in-call UI.<br/>
 *<br/>
 *  (5) We handle various errors by directing the InCallScreen to<br/>
 *      display error messages or dialogs (via the InCallUiState<br/>
 *      &quot;pending call status code&quot; flag), and in some cases we also<br/>
 *      sometimes continue working in the background to resolve the<br/>
 *      problem (like in the case of an emergency call while in<br/>
 *      airplane mode).  Any time that some onscreen indication to the<br/>
 *      user needs to change, we update the &quot;status dialog&quot; info in<br/>
 *      the inCallUiState and (re)launch the InCallScreen to make sure<br/>
 *      it's visible.<br/>
 */<br/></p><p><img src="Android电话拨打流程源码分析_files/Image [1].png" type="image/png" style="border: none; max-width: 100%;"/><br/></p><p>如OutgoingCallBroadcaster接收 CALL 和CALL_PRIVILEGED 两种Intents，然后广播出ACTION_NEW_OUTGOING_CALL intent，让别的应用程序有机会去监视这些intent，最后这些呼叫intent又被自己收到转换，启动InCallScreen.<br/></p><p>src\com\android\phone\OutgoingCallBroadcaster.java<br/></p><div style="font-family: Consolas, &apos;Courier New&apos;, Courier, mono, serif; font-size: 12px; width: 693px; overflow: auto; padding-top: 1px; text-align: left; margin: 18px 0px !important; background-color: rgb(231, 229, 220);"><div style="padding-left: 45px;"><div style="padding: 3px 8px 10px 10px; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 9px; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; color: silver; border-left-width: 3px; border-left-style: solid; border-left-color: rgb(108, 226, 108); background-color: rgb(248, 248, 248);"><strong>[java]</strong> <a href="http://blog.csdn.net/yangwen123/article/details/9790715#" style="color: rgb(160, 160, 160); text-decoration: none; border: none; padding: 1px; margin: 0px 10px 0px 0px; font-size: 9px; display: inline-block; width: 16px; height: 16px; text-indent: -2000px; background-image: url(http://static.blog.csdn.net/scripts/SyntaxHighlighter/styles/images/default/ico_plain.gif); background-attachment: initial; background-color: inherit; background-size: initial; background-origin: initial; background-clip: initial; background-position: 0% 0%; background-repeat: no-repeat;" target="_blank" title="view plain">view plain</a><a href="http://blog.csdn.net/yangwen123/article/details/9790715#" style="color: rgb(160, 160, 160); text-decoration: none; border: none; padding: 1px; margin: 0px 10px 0px 0px; font-size: 9px; display: inline-block; width: 16px; height: 16px; text-indent: -2000px; background-image: url(http://static.blog.csdn.net/scripts/SyntaxHighlighter/styles/images/default/ico_copy.gif); background-attachment: initial; background-color: inherit; background-size: initial; background-origin: initial; background-clip: initial; background-position: 0% 0%; background-repeat: no-repeat;" target="_blank" title="copy">copy</a></div></div><ol start="1" style="margin: 0px 0px 1px 45px !important; padding: 0px; border: none; list-style: decimal; color: rgb(92, 92, 92); background-color: rgb(255, 255, 255);"><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">protected</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> </span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">void</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> onCreate(Bundle icicle) {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">super</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">.onCreate(icicle);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    setContentView(R.layout.outgoing_call_broadcaster);  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    mWaitingSpinner = (ProgressBar) findViewById(R.id.spinner);  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    Intent intent = getIntent();  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (DBG) {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">final</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> Configuration configuration = getResources().getConfiguration();  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        Log.v(TAG, <span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;onCreate: this = &quot;</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> + </span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">this</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> + </span><span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;, icicle = &quot;</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> + icicle);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        Log.v(TAG, <span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot; - getIntent() = &quot;</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> + intent);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        Log.v(TAG, <span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot; - configuration = &quot;</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> + configuration);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    }  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (icicle != </span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">null</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">) {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">//icicle不为空，表示重新初始化先前关闭的OutgoingCallBroadcaster，</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// In practice this happens very rarely (because the lifetime</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// of this activity is so short!), but it *can* happen if the</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// framework detects a configuration change at exactly the</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// right moment; </span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// In this case, do nothing.  Our onCreate() method has already</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// run once (with icicle==null the first time), which means</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// that the NEW_OUTGOING_CALL broadcast for this new call has</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// already been sent.</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        Log.i(TAG, <span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;onCreate: non-null icicle!  &quot;</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">              + <span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;Bailing out, not sending NEW_OUTGOING_CALL broadcast...&quot;</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">return</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">;  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    }  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">//处理得到的intent</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    processIntent(intent);  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (DBG) Log.v(TAG, </span><span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;At the end of onCreate(). isFinishing(): &quot;</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> + isFinishing());  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">}  </span></li></ol></div><p>函数直接调用processIntent函数处理前面发送过来的intent，该方法可以处理以下三种actions，</p><p>CALL (action for usual outgoing voicecalls)</p><p>CALL_PRIVILEGED (can come from built-inapps like contacts / voice dialer / bluetooth)</p><p>CALL_EMERGENCY (from the EmergencyDialerthat's reachable from the lockscreen.)</p><p>对于数据为tel: URI的电话处理流程为：OutgoingCallReceiver -&gt; SipCallOptionHandler -&gt;InCallScreen.</p><p>对于数据为sip: URI的网络电话，则跳过NEW_OUTGOING_CALL广播，直接调用SipCallOptionHandler处理</p><p>对于数据为voicemail: URIs的语音信箱处理同电话处理流程类似</p><div style="font-family: Consolas, &apos;Courier New&apos;, Courier, mono, serif; font-size: 12px; width: 693px; overflow: auto; padding-top: 1px; text-align: left; margin: 18px 0px !important; background-color: rgb(231, 229, 220);"><div style="padding-left: 45px;"><div style="padding: 3px 8px 10px 10px; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 9px; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; color: silver; border-left-width: 3px; border-left-style: solid; border-left-color: rgb(108, 226, 108); background-color: rgb(248, 248, 248);"><strong>[java]</strong> <a href="http://blog.csdn.net/yangwen123/article/details/9790715#" style="color: rgb(160, 160, 160); text-decoration: none; border: none; padding: 1px; margin: 0px 10px 0px 0px; font-size: 9px; display: inline-block; width: 16px; height: 16px; text-indent: -2000px; background-image: url(http://static.blog.csdn.net/scripts/SyntaxHighlighter/styles/images/default/ico_plain.gif); background-attachment: initial; background-color: inherit; background-size: initial; background-origin: initial; background-clip: initial; background-position: 0% 0%; background-repeat: no-repeat;" target="_blank" title="view plain">view plain</a><a href="http://blog.csdn.net/yangwen123/article/details/9790715#" style="color: rgb(160, 160, 160); text-decoration: none; border: none; padding: 1px; margin: 0px 10px 0px 0px; font-size: 9px; display: inline-block; width: 16px; height: 16px; text-indent: -2000px; background-image: url(http://static.blog.csdn.net/scripts/SyntaxHighlighter/styles/images/default/ico_copy.gif); background-attachment: initial; background-color: inherit; background-size: initial; background-origin: initial; background-clip: initial; background-position: 0% 0%; background-repeat: no-repeat;" target="_blank" title="copy">copy</a></div></div><ol start="1" style="margin: 0px 0px 1px 45px !important; padding: 0px; border: none; list-style: decimal; color: rgb(92, 92, 92); background-color: rgb(255, 255, 255);"><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">private</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> </span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">void</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> processIntent(Intent intent) {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (DBG) {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        Log.v(TAG, <span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;processIntent() = &quot;</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> + intent + </span><span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;, thread: &quot;</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> + Thread.currentThread());  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    }  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">final</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> Configuration configuration = getResources().getConfiguration();  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// 电话拨号只对具有语音通信能力的设备而言</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (!PhoneGlobals.sVoiceCapable) {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        Log.i(TAG, <span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;This device is detected as non-voice-capable device.&quot;</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        handleNonVoiceCapable(intent);  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">return</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">;  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    }  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">//得到相应的Action</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    String action = intent.getAction();  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">//从Intent中取出电话号码</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    String number = PhoneNumberUtils.getNumberFromIntent(intent, <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">this</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">//电话号码检查</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (number != </span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">null</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">) {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (!PhoneNumberUtils.isUriNumber(number)) {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">//根据键盘map将字符转换为相应的数字</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            number = PhoneNumberUtils.convertKeypadLettersToDigits(number);  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            number = PhoneNumberUtils.stripSeparators(number);  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        }  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    } <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">else</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        Log.w(TAG, <span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;The number obtained from Intent is null.&quot;</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    }  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// 如果callNow为true，表示当前为不允许拦截的如紧急拨号，这种情形下就无需这NEW_OUTGOING_CALL流程</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">boolean</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> callNow;  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">      </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (getClass().getName().equals(intent.getComponent().getClassName())) {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// If we were launched directly from the OutgoingCallBroadcaster,</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// not one of its more privileged aliases, then make sure that</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// only the non-privileged actions are allowed.</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (!Intent.ACTION_CALL.equals(intent.getAction())) {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            Log.w(TAG, <span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;Attempt to deliver non-CALL action; forcing to CALL&quot;</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            intent.setAction(Intent.ACTION_CALL);  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        }  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    }  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// 检查当前号码是否为紧急号码，只有CALL_PRIVILEGED和CALL_EMERGENCY类型的intent才允许拨打紧急号码</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// (Note that the ACTION_CALL check below depends on the result of</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// isPotentialLocalEmergencyNumber() rather than just plain</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// isLocalEmergencyNumber()</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// 100%确保第三方应用不允许通过传递如&quot;9111234&quot; 这种无效号码来拨打紧急号码 </span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">final</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> </span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">boolean</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> isExactEmergencyNumber =(number != </span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">null</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">) &amp;&amp; PhoneNumberUtils.isLocalEmergencyNumber(number, </span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">this</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">final</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> </span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">boolean</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> isPotentialEmergencyNumber = (number != </span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">null</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">) &amp;&amp; PhoneNumberUtils.isPotentialLocalEmergencyNumber(number, </span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">this</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (VDBG) {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        Log.v(TAG, <span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot; - Checking restrictions for number '&quot;</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> + number + </span><span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;':&quot;</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        Log.v(TAG, <span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;     isExactEmergencyNumber     = &quot;</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> + isExactEmergencyNumber);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        Log.v(TAG, <span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;     isPotentialEmergencyNumber = &quot;</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> + isPotentialEmergencyNumber);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    }  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (Intent.ACTION_CALL_PRIVILEGED.equals(action)) {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (isPotentialEmergencyNumber) {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            Log.i(TAG, <span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;ACTION_CALL_PRIVILEGED is used while the number is a potential&quot;</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                    + <span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot; emergency number. Use ACTION_CALL_EMERGENCY as an action instead.&quot;</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            action = Intent.ACTION_CALL_EMERGENCY;  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        } <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">else</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            action = Intent.ACTION_CALL;  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        }  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (DBG) Log.v(TAG, </span><span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot; - updating action from CALL_PRIVILEGED to &quot;</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> + action);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        intent.setAction(action);  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    }  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">//如果普通拨打的号码为紧急号码，则启动电话拨号器</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (Intent.ACTION_CALL.equals(action)) {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (isPotentialEmergencyNumber) {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            Log.w(TAG, <span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;Cannot call potential emergency number '&quot;</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> + number  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                    + <span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;' with CALL Intent &quot;</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> + intent + </span><span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;.&quot;</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            Log.i(TAG, <span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;Launching default dialer instead...&quot;</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">//启动默认的电话拨号器DialtactsActivity</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            Intent invokeFrameworkDialer = <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">new</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> Intent();  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            invokeFrameworkDialer.setClassName(<span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;com.android.contacts&quot;</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">,</span><span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;com.android.contacts.DialtactsActivity&quot;</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            invokeFrameworkDialer.setAction(Intent.ACTION_DIAL);  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            invokeFrameworkDialer.setData(intent.getData());  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (DBG) Log.v(TAG, </span><span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;onCreate(): calling startActivity for Dialer: &quot;</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> + invokeFrameworkDialer);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            startActivity(invokeFrameworkDialer);  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            finish();  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">return</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">;  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        }  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        callNow = <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">false</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">;  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">//如果是紧急拨号，1.通过紧急拨号器拨号；2.ACTION_CALL_PRIVILEGED拨打紧急号码；将callNow设置为true</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    } <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">else</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> </span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (Intent.ACTION_CALL_EMERGENCY.equals(action)) {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (!isPotentialEmergencyNumber) {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            Log.w(TAG, <span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;Cannot call non-potential-emergency number &quot;</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> + number  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                    + <span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot; with EMERGENCY_CALL Intent &quot;</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> + intent + </span><span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;.&quot;</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                    + <span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot; Finish the Activity immediately.&quot;</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            finish();  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">return</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">;  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        }  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        callNow = <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">true</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">;  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    } <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">else</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        Log.e(TAG, <span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;Unhandled Intent &quot;</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> + intent + </span><span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;. Finish the Activity immediately.&quot;</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        finish();  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">return</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">;  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    }  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">//唤醒屏幕</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    PhoneGlobals.getInstance().wakeUpScreen();  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// If number is null, we're probably trying to call a non-existent voicemail number,</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// send an empty flash or something else is fishy.  Whatever the problem, there's no</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// number, so there's no point in allowing apps to modify the number.</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (TextUtils.isEmpty(number)) {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (intent.getBooleanExtra(EXTRA_SEND_EMPTY_FLASH, </span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">false</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">)) {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            Log.i(TAG, <span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;onCreate: SEND_EMPTY_FLASH...&quot;</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            PhoneUtils.sendEmptyFlash(PhoneGlobals.getPhone());  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            finish();  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">return</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">;  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        } <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">else</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            Log.i(TAG, <span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;onCreate: null or empty number, setting callNow=true...&quot;</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            callNow = <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">true</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">;  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        }  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    }  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">//如果是紧急拨号，直接启动拨号界面</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (callNow) {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        Log.i(TAG, <span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;onCreate(): callNow case! Calling placeCall(): &quot;</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> + intent);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// Initiate the outgoing call, and simultaneously launch the</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// InCallScreen to display the in-call UI:</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        PhoneGlobals.getInstance().callController.placeCall(intent);  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    }  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// Remember the call origin so that users will be able to see an appropriate screen</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// after the phone call. This should affect both phone calls and SIP calls.</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">final</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> String callOrigin = intent.getStringExtra(PhoneGlobals.EXTRA_CALL_ORIGIN);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (callOrigin != </span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">null</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">) {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (DBG) Log.v(TAG, </span><span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot; - Call origin is passed (&quot;</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> + callOrigin + </span><span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;)&quot;</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        PhoneGlobals.getInstance().setLatestActiveCallOrigin(callOrigin);  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    } <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">else</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (DBG) Log.v(TAG, </span><span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot; - Call origin is not passed. Reset current one.&quot;</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        PhoneGlobals.getInstance().resetLatestActiveCallOrigin();  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    }  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// For now, SIP calls will be processed directly without a</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// NEW_OUTGOING_CALL broadcast.</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">//</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// TODO: In the future, though, 3rd party apps *should* be allowed to</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// intercept outgoing calls to SIP addresses as well.  To do this, we should</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// (1) update the NEW_OUTGOING_CALL intent documentation to explain this</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// case, and (2) pass the outgoing SIP address by *not* overloading the</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// EXTRA_PHONE_NUMBER extra, but instead using a new separate extra to hold</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// the outgoing SIP address.  (Be sure to document whether it's a URI or just</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// a plain address, whether it could be a tel: URI, etc.)</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    Uri uri = intent.getData();  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    String scheme = uri.getScheme();  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (Constants.SCHEME_SIP.equals(scheme) || PhoneNumberUtils.isUriNumber(number)) {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        Log.i(TAG, <span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;The requested number was detected as SIP call.&quot;</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        startSipCallOptionHandler(<span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">this</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">, intent, uri, number);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        finish();  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">return</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">;  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    }  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">      </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    Intent broadcastIntent = <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">new</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> Intent(Intent.ACTION_NEW_OUTGOING_CALL);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (number != </span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">null</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">) {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        broadcastIntent.putExtra(Intent.EXTRA_PHONE_NUMBER, number);  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    }  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    PhoneUtils.checkAndCopyPhoneProviderExtras(intent, broadcastIntent);  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    broadcastIntent.putExtra(EXTRA_ALREADY_CALLED, callNow);  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    broadcastIntent.putExtra(EXTRA_ORIGINAL_URI, uri.toString());  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// Need to raise foreground in-call UI as soon as possible while allowing 3rd party app</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// to intercept the outgoing call.</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    broadcastIntent.addFlags(Intent.FLAG_RECEIVER_FOREGROUND);  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (DBG) Log.v(TAG, </span><span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot; - Broadcasting intent: &quot;</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> + broadcastIntent + </span><span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;.&quot;</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">//发送超时消息，当OutgoingCallReceiver在指定的时间内还未接受到广播时，显示超时</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    mHandler.sendEmptyMessageDelayed(EVENT_OUTGOING_CALL_TIMEOUT,  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            OUTGOING_CALL_TIMEOUT_THRESHOLD);  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">//发送ACTION_NEW_OUTGOING_CALL广播</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    sendOrderedBroadcastAsUser(broadcastIntent, UserHandle.OWNER,  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            PERMISSION, <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">new</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> OutgoingCallReceiver(),  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">null</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">,  </span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// scheduler</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            Activity.RESULT_OK,  <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// initialCode</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            number,  <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// initialData: initial value for the result data</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">null</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">);  </span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// initialExtras</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">}  </span></li></ol></div>
首先获取Intent对象，获取拨出的号码。接着判断号码是否为紧急号码，如果是紧急号码，将callNow变量赋值为true，启动InCallScreen，并发送Intent.ACTION_NEW_OUTGOING_CALL广播。<br/><div style="font-family: Consolas, &apos;Courier New&apos;, Courier, mono, serif; font-size: 12px; width: 693px; overflow: auto; padding-top: 1px; text-align: left; margin: 18px 0px !important; background-color: rgb(231, 229, 220);"><div style="padding-left: 45px;"><div style="padding: 3px 8px 10px 10px; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 9px; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; color: silver; border-left-width: 3px; border-left-style: solid; border-left-color: rgb(108, 226, 108); background-color: rgb(248, 248, 248);"><strong>[java]</strong> <a href="http://blog.csdn.net/yangwen123/article/details/9790715#" style="color: rgb(160, 160, 160); text-decoration: none; border: none; padding: 1px; margin: 0px 10px 0px 0px; font-size: 9px; display: inline-block; width: 16px; height: 16px; text-indent: -2000px; background-image: url(http://static.blog.csdn.net/scripts/SyntaxHighlighter/styles/images/default/ico_plain.gif); background-attachment: initial; background-color: inherit; background-size: initial; background-origin: initial; background-clip: initial; background-position: 0% 0%; background-repeat: no-repeat;" target="_blank" title="view plain">view plain</a><a href="http://blog.csdn.net/yangwen123/article/details/9790715#" style="color: rgb(160, 160, 160); text-decoration: none; border: none; padding: 1px; margin: 0px 10px 0px 0px; font-size: 9px; display: inline-block; width: 16px; height: 16px; text-indent: -2000px; background-image: url(http://static.blog.csdn.net/scripts/SyntaxHighlighter/styles/images/default/ico_copy.gif); background-attachment: initial; background-color: inherit; background-size: initial; background-origin: initial; background-clip: initial; background-position: 0% 0%; background-repeat: no-repeat;" target="_blank" title="copy">copy</a></div></div><ol start="1" style="margin: 0px 0px 1px 45px !important; padding: 0px; border: none; list-style: decimal; color: rgb(92, 92, 92); background-color: rgb(255, 255, 255);"><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">public</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> </span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">void</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> onReceive(Context context, Intent intent) {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    mHandler.removeMessages(EVENT_OUTGOING_CALL_TIMEOUT);  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    doReceive(context, intent);  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (DBG) Log.v(TAG, </span><span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;OutgoingCallReceiver is going to finish the Activity itself.&quot;</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    finish();  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">}  </span></li></ol></div>
直接调用函数doReceive函数来处理ntent.ACTION_NEW_OUTGOING_CALL广播
<div style="font-family: Consolas, &apos;Courier New&apos;, Courier, mono, serif; font-size: 12px; width: 693px; overflow: auto; padding-top: 1px; text-align: left; margin: 18px 0px !important; background-color: rgb(231, 229, 220);"><div style="padding-left: 45px;"><div style="padding: 3px 8px 10px 10px; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 9px; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; color: silver; border-left-width: 3px; border-left-style: solid; border-left-color: rgb(108, 226, 108); background-color: rgb(248, 248, 248);"><strong>[java]</strong> <a href="http://blog.csdn.net/yangwen123/article/details/9790715#" style="color: rgb(160, 160, 160); text-decoration: none; border: none; padding: 1px; margin: 0px 10px 0px 0px; font-size: 9px; display: inline-block; width: 16px; height: 16px; text-indent: -2000px; background-image: url(http://static.blog.csdn.net/scripts/SyntaxHighlighter/styles/images/default/ico_plain.gif); background-attachment: initial; background-color: inherit; background-size: initial; background-origin: initial; background-clip: initial; background-position: 0% 0%; background-repeat: no-repeat;" target="_blank" title="view plain">view plain</a><a href="http://blog.csdn.net/yangwen123/article/details/9790715#" style="color: rgb(160, 160, 160); text-decoration: none; border: none; padding: 1px; margin: 0px 10px 0px 0px; font-size: 9px; display: inline-block; width: 16px; height: 16px; text-indent: -2000px; background-image: url(http://static.blog.csdn.net/scripts/SyntaxHighlighter/styles/images/default/ico_copy.gif); background-attachment: initial; background-color: inherit; background-size: initial; background-origin: initial; background-clip: initial; background-position: 0% 0%; background-repeat: no-repeat;" target="_blank" title="copy">copy</a></div></div><ol start="1" style="margin: 0px 0px 1px 45px !important; padding: 0px; border: none; list-style: decimal; color: rgb(92, 92, 92); background-color: rgb(255, 255, 255);"><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">public</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> </span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">void</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> doReceive(Context context, Intent intent) {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (DBG) Log.v(TAG, </span><span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;doReceive: &quot;</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> + intent);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">boolean</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> alreadyCalled;  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    String number;  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    String originalUri;  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    alreadyCalled = intent.getBooleanExtra(OutgoingCallBroadcaster.EXTRA_ALREADY_CALLED, <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">false</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (alreadyCalled) {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (DBG) Log.v(TAG, </span><span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;CALL already placed -- returning.&quot;</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">return</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">;  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    }  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    number = getResultData();  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (VDBG) Log.v(TAG, </span><span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;- got number from resultData: '&quot;</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> + number + </span><span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;'&quot;</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">      </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">final</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> PhoneGlobals app = PhoneGlobals.getInstance();  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">//如果电话支持Otasp</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (TelephonyCapabilities.supportsOtasp(app.phone)) {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">boolean</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> activateState = (app.cdmaOtaScreenState.otaScreenState  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                == OtaUtils.CdmaOtaScreenState.OtaScreenState.OTA_STATUS_ACTIVATION);  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">boolean</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> dialogState = (app.cdmaOtaScreenState.otaScreenState  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                == OtaUtils.CdmaOtaScreenState.OtaScreenState  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                .OTA_STATUS_SUCCESS_FAILURE_DLG);  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">boolean</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> isOtaCallActive = </span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">false</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">;  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> ((app.cdmaOtaScreenState.otaScreenState  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                == OtaUtils.CdmaOtaScreenState.OtaScreenState.OTA_STATUS_PROGRESS)  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                || (app.cdmaOtaScreenState.otaScreenState  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                == OtaUtils.CdmaOtaScreenState.OtaScreenState.OTA_STATUS_LISTENING)) {  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            isOtaCallActive = <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">true</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">;  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        }  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (activateState || dialogState) {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// The OTASP sequence is active, but either (1) the call</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// hasn't started yet, or (2) the call has ended and we're</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// showing the success/failure screen.  In either of these</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// cases it's OK to make a new outgoing call, but we need</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// to take down any OTASP-related UI first.</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (dialogState) app.dismissOtaDialogs();  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            app.clearOtaState();  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            app.clearInCallScreenMode();  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        } <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">else</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> </span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (isOtaCallActive) {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// The actual OTASP call is active.  Don't allow new</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// outgoing calls at all from this state.</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            Log.w(TAG, <span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;OTASP call is active: disallowing a new outgoing call.&quot;</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">return</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">;  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        }  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    }  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (number == </span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">null</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">) {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (DBG) Log.v(TAG, </span><span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;CALL cancelled (null number), returning...&quot;</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">return</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">;  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    } <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">else</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> </span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (TelephonyCapabilities.supportsOtasp(app.phone)  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            &amp;&amp; (app.phone.getState() != PhoneConstants.State.IDLE)  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            &amp;&amp; (app.phone.isOtaSpNumber(number))) {  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (DBG) Log.v(TAG, </span><span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;Call is active, a 2nd OTA call cancelled -- returning.&quot;</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">return</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">;  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    } <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">else</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> </span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (PhoneNumberUtils.isPotentialLocalEmergencyNumber(number, context)) {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        Log.w(TAG, <span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;Cannot modify outgoing call to emergency number &quot;</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> + number + </span><span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;.&quot;</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">return</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">;  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    }  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    originalUri = intent.getStringExtra(OutgoingCallBroadcaster.EXTRA_ORIGINAL_URI);  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (originalUri == </span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">null</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">) {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        Log.e(TAG, <span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;Intent is missing EXTRA_ORIGINAL_URI -- returning.&quot;</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">return</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">;  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    }  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    Uri uri = Uri.parse(originalUri);  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    number = PhoneNumberUtils.convertKeypadLettersToDigits(number);  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    number = PhoneNumberUtils.stripSeparators(number);  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (DBG) Log.v(TAG, </span><span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;doReceive: proceeding with call...&quot;</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (VDBG) Log.v(TAG, </span><span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;- uri: &quot;</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> + uri);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (VDBG) Log.v(TAG, </span><span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;- actual number to dial: '&quot;</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> + number + </span><span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;'&quot;</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    startSipCallOptionHandler(context, intent, uri, number);  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">}  </span></li></ol></div><p>OutgoingCallReceiver是OutgoingCallBroadcaster的一个内部类，作用是接收OutgoingCallBroadcaster发送的广播，判断是否已经启动InCallScreen。没有启动的话就进行一些初始化，如：对OTA进行初始化。接收到广播之后，从Intent里面取出电话号码及其URi。然后设置Intent为ACTION_CALL，并带上号码和uri。启动InCallScreen。关闭OutgoingCallReceiver。</p><p>OTA:Over-the-Air Technology 空中下载技术，是通过移动通信(GSM或CDMA)的空中接口对SIM卡数据及应用进行远程管理的技术。空中接口可以采用WAP、GPRS、CDMA1X及短消息技术。OTA技术的应用，使得移动通信不仅可以提供语音和数据服务，而且还能提供新业务下载。</p><div style="font-family: Consolas, &apos;Courier New&apos;, Courier, mono, serif; font-size: 12px; width: 693px; overflow: auto; padding-top: 1px; text-align: left; margin: 18px 0px !important; background-color: rgb(231, 229, 220);"><div style="padding-left: 45px;"><div style="padding: 3px 8px 10px 10px; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 9px; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; color: silver; border-left-width: 3px; border-left-style: solid; border-left-color: rgb(108, 226, 108); background-color: rgb(248, 248, 248);"><strong>[java]</strong> <a href="http://blog.csdn.net/yangwen123/article/details/9790715#" style="color: rgb(160, 160, 160); text-decoration: none; border: none; padding: 1px; margin: 0px 10px 0px 0px; font-size: 9px; display: inline-block; width: 16px; height: 16px; text-indent: -2000px; background-image: url(http://static.blog.csdn.net/scripts/SyntaxHighlighter/styles/images/default/ico_plain.gif); background-attachment: initial; background-color: inherit; background-size: initial; background-origin: initial; background-clip: initial; background-position: 0% 0%; background-repeat: no-repeat;" target="_blank" title="view plain">view plain</a><a href="http://blog.csdn.net/yangwen123/article/details/9790715#" style="color: rgb(160, 160, 160); text-decoration: none; border: none; padding: 1px; margin: 0px 10px 0px 0px; font-size: 9px; display: inline-block; width: 16px; height: 16px; text-indent: -2000px; background-image: url(http://static.blog.csdn.net/scripts/SyntaxHighlighter/styles/images/default/ico_copy.gif); background-attachment: initial; background-color: inherit; background-size: initial; background-origin: initial; background-clip: initial; background-position: 0% 0%; background-repeat: no-repeat;" target="_blank" title="copy">copy</a></div></div><ol start="1" style="margin: 0px 0px 1px 45px !important; padding: 0px; border: none; list-style: decimal; color: rgb(92, 92, 92); background-color: rgb(255, 255, 255);"><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">private</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> </span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">void</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> startSipCallOptionHandler(Context context, Intent intent,  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        Uri uri, String number) {  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (VDBG) {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        Log.i(TAG, <span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;startSipCallOptionHandler...&quot;</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        Log.i(TAG, <span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;- intent: &quot;</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> + intent);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        Log.i(TAG, <span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;- uri: &quot;</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> + uri);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        Log.i(TAG, <span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;- number: &quot;</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> + number);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    }  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">//创建原始电话拨号intent的副本</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    Intent newIntent = <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">new</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> Intent(Intent.ACTION_CALL, uri);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    newIntent.putExtra(EXTRA_ACTUAL_NUMBER_TO_DIAL, number);  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    PhoneUtils.checkAndCopyPhoneProviderExtras(intent, newIntent);  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    Intent selectPhoneIntent = <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">new</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> Intent(ACTION_SIP_SELECT_PHONE, uri);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    selectPhoneIntent.setClass(context, SipCallOptionHandler.<span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">class</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    selectPhoneIntent.putExtra(EXTRA_NEW_CALL_INTENT, newIntent);  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    selectPhoneIntent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (DBG) {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        Log.v(TAG, <span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;startSipCallOptionHandler(): &quot;</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> +  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                <span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;calling startActivity: &quot;</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> + selectPhoneIntent);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    }  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">//启动电话类型选择界面</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    context.startActivity(selectPhoneIntent);  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">}  </span></li></ol></div>
电话类型选择处理：1.读取用户设置；2.弹出对话框让用户选择<br/>
src\com\android\phone\SipCallOptionHandler.java
<div style="font-family: Consolas, &apos;Courier New&apos;, Courier, mono, serif; font-size: 12px; width: 693px; overflow: auto; padding-top: 1px; text-align: left; margin: 18px 0px !important; background-color: rgb(231, 229, 220);"><div style="padding-left: 45px;"><div style="padding: 3px 8px 10px 10px; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 9px; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; color: silver; border-left-width: 3px; border-left-style: solid; border-left-color: rgb(108, 226, 108); background-color: rgb(248, 248, 248);"><strong>[java]</strong> <a href="http://blog.csdn.net/yangwen123/article/details/9790715#" style="color: rgb(160, 160, 160); text-decoration: none; border: none; padding: 1px; margin: 0px 10px 0px 0px; font-size: 9px; display: inline-block; width: 16px; height: 16px; text-indent: -2000px; background-image: url(http://static.blog.csdn.net/scripts/SyntaxHighlighter/styles/images/default/ico_plain.gif); background-attachment: initial; background-color: inherit; background-size: initial; background-origin: initial; background-clip: initial; background-position: 0% 0%; background-repeat: no-repeat;" target="_blank" title="view plain">view plain</a><a href="http://blog.csdn.net/yangwen123/article/details/9790715#" style="color: rgb(160, 160, 160); text-decoration: none; border: none; padding: 1px; margin: 0px 10px 0px 0px; font-size: 9px; display: inline-block; width: 16px; height: 16px; text-indent: -2000px; background-image: url(http://static.blog.csdn.net/scripts/SyntaxHighlighter/styles/images/default/ico_copy.gif); background-attachment: initial; background-color: inherit; background-size: initial; background-origin: initial; background-clip: initial; background-position: 0% 0%; background-repeat: no-repeat;" target="_blank" title="copy">copy</a></div></div><ol start="1" style="margin: 0px 0px 1px 45px !important; padding: 0px; border: none; list-style: decimal; color: rgb(92, 92, 92); background-color: rgb(255, 255, 255);"><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">public</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> </span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">void</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> onCreate(Bundle savedInstanceState) {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">super</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">.onCreate(savedInstanceState);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">Intent intent = getIntent();  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">String action = intent.getAction();  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (!OutgoingCallBroadcaster.ACTION_SIP_SELECT_PHONE.equals(action)) {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    Log.wtf(TAG, <span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;onCreate: got intent action '&quot;</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> + action + </span><span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;', expected &quot;</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            + OutgoingCallBroadcaster.ACTION_SIP_SELECT_PHONE);  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    finish();  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">return</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">;  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">}  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">//取出原始电话拨号intent的副本</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">mIntent = (Intent) intent.getParcelableExtra(OutgoingCallBroadcaster.EXTRA_NEW_CALL_INTENT);  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (mIntent == </span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">null</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">) {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    finish();  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">return</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">;  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">}  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// Allow this activity to be visible in front of the keyguard.</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">getWindow().addFlags(WindowManager.LayoutParams.FLAG_SHOW_WHEN_LOCKED);  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// - If it's a sip: URI, this is definitely a SIP call, regardless</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">//   of whether the data is a SIP address or a regular phone</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">//   number.</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// - If this is a tel: URI but the data contains an &quot;@&quot; character</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">//   (see PhoneNumberUtils.isUriNumber()) we consider that to be a</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">//   SIP number too.</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">boolean</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> voipSupported = PhoneUtils.isVoipSupported();  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (DBG) Log.v(TAG, </span><span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;voipSupported: &quot;</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> + voipSupported);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">mSipProfileDb = <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">new</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> SipProfileDb(</span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">this</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">mSipSharedPreferences = <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">new</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> SipSharedPreferences(</span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">this</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">mCallOption = mSipSharedPreferences.getSipCallOption();  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (DBG) Log.v(TAG, </span><span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;Call option: &quot;</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> + mCallOption);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">Uri uri = mIntent.getData();  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">String scheme = uri.getScheme();  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">mNumber = PhoneNumberUtils.getNumberFromIntent(mIntent, <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">this</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">boolean</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> isInCellNetwork = PhoneGlobals.getInstance().phoneMgr.isRadioOn();  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">boolean</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> isKnownCallScheme = Constants.SCHEME_TEL.equals(scheme)  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        || Constants.SCHEME_SIP.equals(scheme);  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">boolean</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> isRegularCall = Constants.SCHEME_TEL.equals(scheme)  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        &amp;&amp; !PhoneNumberUtils.isUriNumber(mNumber);  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// Bypass the handler if the call scheme is not sip or tel.</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (!isKnownCallScheme) {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    setResultAndFinish();  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">return</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">;  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">}  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// Check if VoIP feature is supported.</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (!voipSupported) {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (!isRegularCall) {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        showDialog(DIALOG_NO_VOIP);  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    } <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">else</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        setResultAndFinish();  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    }  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">return</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">;  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">}  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (!PhoneUtils.hasPhoneProviderExtras(mIntent)) {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (!isNetworkConnected()) {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (!isRegularCall) {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">//显示无网络错误提示对话框</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            showDialog(DIALOG_NO_INTERNET_ERROR);  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">return</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">;  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        }  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    } <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">else</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (mCallOption.equals(Settings.System.SIP_ASK_ME_EACH_TIME)  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                &amp;&amp; isRegularCall &amp;&amp; isInCellNetwork) {  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">//显示电话类型选择对话框</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            showDialog(DIALOG_SELECT_PHONE_TYPE);  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">return</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">;  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        }  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (!mCallOption.equals(Settings.System.SIP_ADDRESS_ONLY)  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                || !isRegularCall) {  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            mUseSipPhone = <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">true</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">;  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        }  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    }  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">}  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (mUseSipPhone) {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// If there is no sip profile and it is a regular call, then we</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// should use pstn network instead.</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> ((mSipProfileDb.getProfilesCount() &gt; </span><span style="margin: 0px; padding: 0px; border: none; color: rgb(192, 0, 0); background-color: inherit;">0</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">) || !isRegularCall) {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        startGetPrimarySipPhoneThread();  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">return</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">;  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    } <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">else</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        mUseSipPhone = <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">false</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">;  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    }  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">}  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">setResultAndFinish();  </span></li></ol></div>
选择SIP拨号还是PSTN拨号
<div style="font-family: Consolas, &apos;Courier New&apos;, Courier, mono, serif; font-size: 12px; width: 693px; overflow: auto; padding-top: 1px; text-align: left; margin: 18px 0px !important; background-color: rgb(231, 229, 220);"><div style="padding-left: 45px;"><div style="padding: 3px 8px 10px 10px; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 9px; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; color: silver; border-left-width: 3px; border-left-style: solid; border-left-color: rgb(108, 226, 108); background-color: rgb(248, 248, 248);"><strong>[java]</strong> <a href="http://blog.csdn.net/yangwen123/article/details/9790715#" style="color: rgb(160, 160, 160); text-decoration: none; border: none; padding: 1px; margin: 0px 10px 0px 0px; font-size: 9px; display: inline-block; width: 16px; height: 16px; text-indent: -2000px; background-image: url(http://static.blog.csdn.net/scripts/SyntaxHighlighter/styles/images/default/ico_plain.gif); background-attachment: initial; background-color: inherit; background-size: initial; background-origin: initial; background-clip: initial; background-position: 0% 0%; background-repeat: no-repeat;" target="_blank" title="view plain">view plain</a><a href="http://blog.csdn.net/yangwen123/article/details/9790715#" style="color: rgb(160, 160, 160); text-decoration: none; border: none; padding: 1px; margin: 0px 10px 0px 0px; font-size: 9px; display: inline-block; width: 16px; height: 16px; text-indent: -2000px; background-image: url(http://static.blog.csdn.net/scripts/SyntaxHighlighter/styles/images/default/ico_copy.gif); background-attachment: initial; background-color: inherit; background-size: initial; background-origin: initial; background-clip: initial; background-position: 0% 0%; background-repeat: no-repeat;" target="_blank" title="copy">copy</a></div></div><ol start="1" style="margin: 0px 0px 1px 45px !important; padding: 0px; border: none; list-style: decimal; color: rgb(92, 92, 92); background-color: rgb(255, 255, 255);"><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">private</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> </span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">void</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> setResultAndFinish() {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    runOnUiThread(<span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">new</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> Runnable() {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">public</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> </span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">void</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> run() {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (mOutgoingSipProfile != </span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">null</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">) {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (!isNetworkConnected()) {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                    showDialog(DIALOG_NO_INTERNET_ERROR);  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">return</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">;  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                }  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (DBG) Log.v(TAG, </span><span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;primary SIP URI is &quot;</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> +  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                        mOutgoingSipProfile.getUriString());  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                createSipPhoneIfNeeded(mOutgoingSipProfile);  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                mIntent.putExtra(OutgoingCallBroadcaster.EXTRA_SIP_PHONE_URI,  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                        mOutgoingSipProfile.getUriString());  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (mMakePrimary) {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                    mSipSharedPreferences.setPrimaryAccount(  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                            mOutgoingSipProfile.getUriString());  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                }  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            }  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">//mUseSipPhone在SipCallOptionHandler的onCreate函数中被设置为false</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (mUseSipPhone &amp;&amp; mOutgoingSipProfile == </span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">null</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">) {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                showDialog(DIALOG_START_SIP_SETTINGS);  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">return</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">;  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            } <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">else</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// Woo hoo -- it's finally OK to initiate the outgoing call!</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                PhoneGlobals.getInstance().callController.placeCall(mIntent);  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            }  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            finish();  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        }  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    });  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">}  </span></li></ol></div>
src\com\android\phone\CallController.java<br/><div style="font-family: Consolas, &apos;Courier New&apos;, Courier, mono, serif; font-size: 12px; width: 693px; overflow: auto; padding-top: 1px; text-align: left; margin: 18px 0px !important; background-color: rgb(231, 229, 220);"><div style="padding-left: 45px;"><div style="padding: 3px 8px 10px 10px; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 9px; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; color: silver; border-left-width: 3px; border-left-style: solid; border-left-color: rgb(108, 226, 108); background-color: rgb(248, 248, 248);"><strong>[java]</strong> <a href="http://blog.csdn.net/yangwen123/article/details/9790715#" style="color: rgb(160, 160, 160); text-decoration: none; border: none; padding: 1px; margin: 0px 10px 0px 0px; font-size: 9px; display: inline-block; width: 16px; height: 16px; text-indent: -2000px; background-image: url(http://static.blog.csdn.net/scripts/SyntaxHighlighter/styles/images/default/ico_plain.gif); background-attachment: initial; background-color: inherit; background-size: initial; background-origin: initial; background-clip: initial; background-position: 0% 0%; background-repeat: no-repeat;" target="_blank" title="view plain">view plain</a><a href="http://blog.csdn.net/yangwen123/article/details/9790715#" style="color: rgb(160, 160, 160); text-decoration: none; border: none; padding: 1px; margin: 0px 10px 0px 0px; font-size: 9px; display: inline-block; width: 16px; height: 16px; text-indent: -2000px; background-image: url(http://static.blog.csdn.net/scripts/SyntaxHighlighter/styles/images/default/ico_copy.gif); background-attachment: initial; background-color: inherit; background-size: initial; background-origin: initial; background-clip: initial; background-position: 0% 0%; background-repeat: no-repeat;" target="_blank" title="copy">copy</a></div></div><ol start="1" style="margin: 0px 0px 1px 45px !important; padding: 0px; border: none; list-style: decimal; color: rgb(92, 92, 92); background-color: rgb(255, 255, 255);"><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">public</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> </span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">void</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> placeCall(Intent intent) {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    log(<span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;placeCall()...  intent = &quot;</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> + intent);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (VDBG) log(</span><span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;extras = &quot;</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> + intent.getExtras());  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">final</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> InCallUiState inCallUiState = mApp.inCallUiState;  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (intent == </span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">null</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">) {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        Log.wtf(TAG, <span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;placeCall: called with null intent&quot;</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">throw</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> </span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">new</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> IllegalArgumentException(</span><span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;placeCall: called with null intent&quot;</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    }  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    String action = intent.getAction();  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    Uri uri = intent.getData();  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (uri == </span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">null</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">) {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        Log.wtf(TAG, <span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;placeCall: intent had no data&quot;</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">throw</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> </span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">new</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> IllegalArgumentException(</span><span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;placeCall: intent had no data&quot;</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    }  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    String scheme = uri.getScheme();  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    String number = PhoneNumberUtils.getNumberFromIntent(intent, mApp);  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (VDBG) {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        log(<span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;- action: &quot;</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> + action);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        log(<span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;- uri: &quot;</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> + uri);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        log(<span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;- scheme: &quot;</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> + scheme);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        log(<span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;- number: &quot;</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> + number);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    }  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (!(Intent.ACTION_CALL.equals(action)  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">          || Intent.ACTION_CALL_EMERGENCY.equals(action)  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">          || Intent.ACTION_CALL_PRIVILEGED.equals(action))) {  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        Log.wtf(TAG, <span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;placeCall: unexpected intent action &quot;</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> + action);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">throw</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> </span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">new</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> IllegalArgumentException(</span><span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;Unexpected action: &quot;</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> + action);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    }  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// Check to see if this is an OTASP call (the &quot;activation&quot; call</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// used to provision CDMA devices), and if so, do some</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// OTASP-specific setup.</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    Phone phone = mApp.mCM.getDefaultPhone();  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (TelephonyCapabilities.supportsOtasp(phone)) {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        checkForOtaspCall(intent);  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    }  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    mApp.setRestoreMuteOnInCallResume(<span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">false</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// If a provider is used, extract the info to build the</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// overlay and route the call.  The overlay will be</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// displayed when the InCallScreen becomes visible.</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (PhoneUtils.hasPhoneProviderExtras(intent)) {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        inCallUiState.setProviderInfo(intent);  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    } <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">else</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        inCallUiState.clearProviderInfo();  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    }  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">//拨号</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    CallStatusCode status = placeCallInternal(intent);  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">switch</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (status) {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">case</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> SUCCESS:  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">case</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> EXITED_ECM:  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (DBG) log(</span><span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;==&gt; placeCall(): success from placeCallInternal(): &quot;</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> + status);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (status == CallStatusCode.EXITED_ECM) {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// Call succeeded, but we also need to tell the</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// InCallScreen to show the &quot;Exiting ECM&quot; warning.</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                inCallUiState.setPendingCallStatusCode(CallStatusCode.EXITED_ECM);  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            } <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">else</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// Call succeeded.  There's no &quot;error condition&quot; that</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// needs to be displayed to the user, so clear out the</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// InCallUiState's &quot;pending call status code&quot;.</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                inCallUiState.clearPendingCallStatusCode();  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            }  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// Notify the phone app that a call is beginning so it can</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// enable the proximity sensor</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            mApp.setBeginningCall(<span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">true</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">break</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">;  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">default</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">:  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// Any other status code is a failure.</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            log(<span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;==&gt; placeCall(): failure code from placeCallInternal(): &quot;</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> + status);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// Handle the various error conditions that can occur when</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// initiating an outgoing call, typically by directing the</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// InCallScreen to display a diagnostic message (via the</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// &quot;pending call status code&quot; flag.)</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            handleOutgoingCallError(status);  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">break</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">;  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    }  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    mApp.displayCallScreen();  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">}  </span></li></ol></div>
该函数首先得到拨打的电话号码及默认的Phone对象，调用placeCallInternal发起拨号请求，同时启动电话呼叫界面InCallScreen。
<h2 style="margin: 0px; padding: 0px;"><a name="t0" style="color: rgb(106, 57, 6); text-decoration: none;"></a><a name="t0" style="color: rgb(106, 57, 6); text-decoration: none;" target="_blank"></a>1.拨号流程</h2><div style="font-family: Consolas, &apos;Courier New&apos;, Courier, mono, serif; font-size: 12px; width: 693px; overflow: auto; padding-top: 1px; text-align: left; margin: 18px 0px !important; background-color: rgb(231, 229, 220);"><div style="padding-left: 45px;"><div style="padding: 3px 8px 10px 10px; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 9px; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; color: silver; border-left-width: 3px; border-left-style: solid; border-left-color: rgb(108, 226, 108); background-color: rgb(248, 248, 248);"><strong>[java]</strong> <a href="http://blog.csdn.net/yangwen123/article/details/9790715#" style="color: rgb(160, 160, 160); text-decoration: none; border: none; padding: 1px; margin: 0px 10px 0px 0px; font-size: 9px; display: inline-block; width: 16px; height: 16px; text-indent: -2000px; background-image: url(http://static.blog.csdn.net/scripts/SyntaxHighlighter/styles/images/default/ico_plain.gif); background-attachment: initial; background-color: inherit; background-size: initial; background-origin: initial; background-clip: initial; background-position: 0% 0%; background-repeat: no-repeat;" target="_blank" title="view plain">view plain</a><a href="http://blog.csdn.net/yangwen123/article/details/9790715#" style="color: rgb(160, 160, 160); text-decoration: none; border: none; padding: 1px; margin: 0px 10px 0px 0px; font-size: 9px; display: inline-block; width: 16px; height: 16px; text-indent: -2000px; background-image: url(http://static.blog.csdn.net/scripts/SyntaxHighlighter/styles/images/default/ico_copy.gif); background-attachment: initial; background-color: inherit; background-size: initial; background-origin: initial; background-clip: initial; background-position: 0% 0%; background-repeat: no-repeat;" target="_blank" title="copy">copy</a></div></div><ol start="1" style="margin: 0px 0px 1px 45px !important; padding: 0px; border: none; list-style: decimal; color: rgb(92, 92, 92); background-color: rgb(255, 255, 255);"><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">private</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> CallStatusCode placeCallInternal(Intent intent) {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">final</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> InCallUiState inCallUiState = mApp.inCallUiState;  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">final</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> Uri uri = intent.getData();  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">final</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> String scheme = (uri != </span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">null</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">) ? uri.getScheme() : </span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">null</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">;  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    String number;  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    Phone phone = <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">null</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">;  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    CallStatusCode okToCallStatus = checkIfOkToInitiateOutgoingCall(  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            mCM.getServiceState());  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">try</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        number = PhoneUtils.getInitialNumber(intent);  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (VDBG) log(</span><span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;- actual number to dial: '&quot;</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> + number + </span><span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;'&quot;</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        String sipPhoneUri = intent.getStringExtra(OutgoingCallBroadcaster.EXTRA_SIP_PHONE_URI);  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        phone = PhoneUtils.pickPhoneBasedOnNumber(mCM, scheme, number, sipPhoneUri);  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (VDBG) log(</span><span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;- got Phone instance: &quot;</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> + phone + </span><span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;, class = &quot;</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> + phone.getClass());  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        okToCallStatus = checkIfOkToInitiateOutgoingCall(phone.getServiceState().getState());  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    } <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">catch</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (PhoneUtils.VoiceMailNumberMissingException ex) {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (okToCallStatus != CallStatusCode.SUCCESS) {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (DBG) log(</span><span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;Voicemail number not reachable in current SIM card state.&quot;</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">return</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> okToCallStatus;  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        }  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (DBG) log(</span><span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;VoiceMailNumberMissingException from getInitialNumber()&quot;</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">return</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> CallStatusCode.VOICEMAIL_NUMBER_MISSING;  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    }  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (number == </span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">null</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">) {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        Log.w(TAG, <span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;placeCall: couldn't get a phone number from Intent &quot;</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> + intent);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">return</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> CallStatusCode.NO_PHONE_NUMBER_SUPPLIED;  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    }  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">boolean</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> isEmergencyNumber = PhoneNumberUtils.isLocalEmergencyNumber(number, mApp);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">boolean</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> isPotentialEmergencyNumber =PhoneNumberUtils.isPotentialLocalEmergencyNumber(number, mApp);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">boolean</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> isEmergencyIntent = Intent.ACTION_CALL_EMERGENCY.equals(intent.getAction());  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">      </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (isPotentialEmergencyNumber &amp;&amp; !isEmergencyIntent) {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        Log.e(TAG, <span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;Non-CALL_EMERGENCY Intent &quot;</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> + intent+ </span><span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot; attempted to call potential emergency number &quot;</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> + number             + </span><span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;.&quot;</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">return</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> CallStatusCode.CALL_FAILED;  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    } <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">else</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> </span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (!isPotentialEmergencyNumber &amp;&amp; isEmergencyIntent) {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        Log.e(TAG, <span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;Received CALL_EMERGENCY Intent &quot;</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> + intent  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                + <span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot; with non-potential-emergency number &quot;</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> + number  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                + <span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot; -- failing call.&quot;</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">return</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> CallStatusCode.CALL_FAILED;  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    }  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// If we're trying to call an emergency number, then it's OK to</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// proceed in certain states where we'd otherwise bring up</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// an error dialog:</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// - If we're in EMERGENCY_ONLY mode, then (obviously) you're allowed</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">//   to dial emergency numbers.</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// - If we're OUT_OF_SERVICE, we still attempt to make a call,</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">//   since the radio will register to any available network.</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (isEmergencyNumber  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        &amp;&amp; ((okToCallStatus == CallStatusCode.EMERGENCY_ONLY)  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            || (okToCallStatus == CallStatusCode.OUT_OF_SERVICE))) {  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (DBG) log(</span><span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;placeCall: Emergency number detected with status = &quot;</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> + okToCallStatus);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        okToCallStatus = CallStatusCode.SUCCESS;  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (DBG) log(</span><span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;==&gt; UPDATING status to: &quot;</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> + okToCallStatus);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    }  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (okToCallStatus != CallStatusCode.SUCCESS) {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// If this is an emergency call, launch the EmergencyCallHelperService</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// to turn on the radio and retry the call.</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (isEmergencyNumber &amp;&amp; (okToCallStatus == CallStatusCode.POWER_OFF)) {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            Log.i(TAG, <span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;placeCall: Trying to make emergency call while POWER_OFF!&quot;</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// If needed, lazily instantiate an EmergencyCallHelper instance.</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">synchronized</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (</span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">this</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">) {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (mEmergencyCallHelper == </span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">null</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">) {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                    mEmergencyCallHelper = <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">new</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> EmergencyCallHelper(</span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">this</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                }  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            }  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// ...and kick off the &quot;emergency call from airplane mode&quot; sequence.</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            mEmergencyCallHelper.startEmergencyCallFromAirplaneModeSequence(number);  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">return</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> CallStatusCode.SUCCESS;  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        } <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">else</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (DBG) log(</span><span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;==&gt; placeCallInternal(): non-success status: &quot;</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> + okToCallStatus);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">return</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> okToCallStatus;  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        }  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    }  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// Ok, we can proceed with this outgoing call.</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    inCallUiState.needToShowCallLostDialog = <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">false</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">;  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    inCallUiState.clearProgressIndication();  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    Uri contactUri = intent.getData();  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">//真正的电话拨号过程</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">int</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> callStatus = PhoneUtils.placeCall(mApp,  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                                          phone,  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                                          number,  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                                          contactUri,  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                                          (isEmergencyNumber || isEmergencyIntent),  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                                          inCallUiState.providerGatewayUri);  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">switch</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (callStatus) {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">case</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> PhoneUtils.CALL_STATUS_DIALED:  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (VDBG) log(</span><span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;placeCall: PhoneUtils.placeCall() succeeded for regular call '&quot;</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                         + number + <span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;'.&quot;</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (VDBG) log (</span><span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;- inCallUiState.inCallScreenMode = &quot;</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                           + inCallUiState.inCallScreenMode);  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (inCallUiState.inCallScreenMode == InCallScreenMode.OTA_NORMAL) {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (VDBG) log (</span><span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;==&gt;  OTA_NORMAL note: switching to OTA_STATUS_LISTENING.&quot;</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                mApp.cdmaOtaScreenState.otaScreenState =  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                        CdmaOtaScreenState.OtaScreenState.OTA_STATUS_LISTENING;  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            }  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">boolean</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> voicemailUriSpecified = scheme != </span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">null</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> &amp;&amp; scheme.equals(</span><span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;voicemail&quot;</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// When voicemail is requested most likely the user wants to open</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// dialpad immediately, so we show it in the first place.</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// Otherwise we want to make sure the user can see the regular</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// in-call UI while the new call is dialing, and when it</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// first gets connected.)</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            inCallUiState.showDialpad = voicemailUriSpecified;  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// For voicemails, we add context text to let the user know they</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// are dialing their voicemail.</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// TODO: This is only set here and becomes problematic when swapping calls</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            inCallUiState.dialpadContextText = voicemailUriSpecified ?  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                phone.getVoiceMailAlphaTag() : <span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;&quot;</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">;  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// Also, in case a previous call was already active (i.e. if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// we just did &quot;Add call&quot;), clear out the &quot;history&quot; of DTMF</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// digits you typed, to make sure it doesn't persist from the</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// previous call to the new call.</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// TODO: it would be more precise to do this when the actual</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// phone state change happens (i.e. when a new foreground</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// call appears and the previous call moves to the</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// background), but the InCallScreen doesn't keep enough</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// state right now to notice that specific transition in</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// onPhoneStateChanged().</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            inCallUiState.dialpadDigits = <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">null</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">;  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// Check for an obscure ECM-related scenario: If the phone</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// is currently in ECM (Emergency callback mode) and we</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// dial a non-emergency number, that automatically</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// *cancels* ECM.  So warn the user about it.</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// (See InCallScreen.showExitingECMDialog() for more info.)</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">boolean</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> exitedEcm = </span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">false</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">;  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (PhoneUtils.isPhoneInEcm(phone) &amp;&amp; !isEmergencyNumber) {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                Log.i(TAG, <span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;About to exit ECM because of an outgoing non-emergency call&quot;</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                exitedEcm = <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">true</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">;  </span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// this will cause us to return EXITED_ECM from this method</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            }  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (phone.getPhoneType() == PhoneConstants.PHONE_TYPE_CDMA) {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// Start the timer for 3 Way CallerInfo</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (mApp.cdmaPhoneCallState.getCurrentCallState()  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                        == CdmaPhoneCallState.PhoneCallState.THRWAY_ACTIVE) {  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">//Unmute for the second MO call</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                    PhoneUtils.setMute(<span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">false</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// This is a &quot;CDMA 3-way call&quot;, which means that you're dialing a</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// 2nd outgoing call while a previous call is already in progress.</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">//</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// Due to the limitations of CDMA this call doesn't actually go</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// through the DIALING/ALERTING states, so we can't tell for sure</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// when (or if) it's actually answered.  But we want to show</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// *some* indication of what's going on in the UI, so we &quot;fake it&quot;</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// by displaying the &quot;Dialing&quot; state for 3 seconds.</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// Set the mThreeWayCallOrigStateDialing state to true</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                    mApp.cdmaPhoneCallState.setThreeWayCallOrigState(<span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">true</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// Schedule the &quot;Dialing&quot; indication to be taken down in 3 seconds:</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                    sendEmptyMessageDelayed(THREEWAY_CALLERINFO_DISPLAY_DONE,  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                                            THREEWAY_CALLERINFO_DISPLAY_TIME);  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                }  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            }  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// Success!</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (exitedEcm) {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">return</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> CallStatusCode.EXITED_ECM;  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            } <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">else</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">return</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> CallStatusCode.SUCCESS;  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            }  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">case</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> PhoneUtils.CALL_STATUS_DIALED_MMI:  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (DBG) log(</span><span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;placeCall: specified number was an MMI code: '&quot;</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> + number + </span><span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;'.&quot;</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// The passed-in number was an MMI code, not a regular phone number!</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// This isn't really a failure; the Dialer may have deliberately</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// fired an ACTION_CALL intent to dial an MMI code, like for a</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// USSD call.</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">//</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// Presumably an MMI_INITIATE message will come in shortly</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// (and we'll bring up the &quot;MMI Started&quot; dialog), or else</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// an MMI_COMPLETE will come in (which will take us to a</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// different Activity; see PhoneUtils.displayMMIComplete()).</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">return</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> CallStatusCode.DIALED_MMI;  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">case</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> PhoneUtils.CALL_STATUS_FAILED:  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            Log.w(TAG, <span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;placeCall: PhoneUtils.placeCall() FAILED for number '&quot;</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                  + number + <span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;'.&quot;</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// We couldn't successfully place the call; there was some</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// failure in the telephony layer.</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">return</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> CallStatusCode.CALL_FAILED;  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">default</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">:  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            Log.wtf(TAG, <span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;placeCall: unknown callStatus &quot;</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> + callStatus  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                    + <span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot; from PhoneUtils.placeCall() for number '&quot;</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> + number + </span><span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;'.&quot;</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">return</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> CallStatusCode.SUCCESS;  </span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// Try to continue anyway...</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    }  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">}  </span></li></ol></div>
该函数通过调用PhoneUtils类的placeCall函数进入Framework层异步完成电话呼叫
<p>src\com\android\phone\PhoneUtils.java<br/></p><div style="font-family: Consolas, &apos;Courier New&apos;, Courier, mono, serif; font-size: 12px; width: 693px; overflow: auto; padding-top: 1px; text-align: left; margin: 18px 0px !important; background-color: rgb(231, 229, 220);"><div style="padding-left: 45px;"><div style="padding: 3px 8px 10px 10px; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 9px; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; color: silver; border-left-width: 3px; border-left-style: solid; border-left-color: rgb(108, 226, 108); background-color: rgb(248, 248, 248);"><strong>[java]</strong> <a href="http://blog.csdn.net/yangwen123/article/details/9790715#" style="color: rgb(160, 160, 160); text-decoration: none; border: none; padding: 1px; margin: 0px 10px 0px 0px; font-size: 9px; display: inline-block; width: 16px; height: 16px; text-indent: -2000px; background-image: url(http://static.blog.csdn.net/scripts/SyntaxHighlighter/styles/images/default/ico_plain.gif); background-attachment: initial; background-color: inherit; background-size: initial; background-origin: initial; background-clip: initial; background-position: 0% 0%; background-repeat: no-repeat;" target="_blank" title="view plain">view plain</a><a href="http://blog.csdn.net/yangwen123/article/details/9790715#" style="color: rgb(160, 160, 160); text-decoration: none; border: none; padding: 1px; margin: 0px 10px 0px 0px; font-size: 9px; display: inline-block; width: 16px; height: 16px; text-indent: -2000px; background-image: url(http://static.blog.csdn.net/scripts/SyntaxHighlighter/styles/images/default/ico_copy.gif); background-attachment: initial; background-color: inherit; background-size: initial; background-origin: initial; background-clip: initial; background-position: 0% 0%; background-repeat: no-repeat;" target="_blank" title="copy">copy</a></div></div><ol start="1" style="margin: 0px 0px 1px 45px !important; padding: 0px; border: none; list-style: decimal; color: rgb(92, 92, 92); background-color: rgb(255, 255, 255);"><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">public</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> </span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">static</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> </span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">int</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> placeCall(Context context, Phone phone,  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        String number, Uri contactRef, <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">boolean</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> isEmergencyCall,  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        Uri gatewayUri) {  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">final</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> PhoneGlobals app = PhoneGlobals.getInstance();  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">boolean</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> useGateway = </span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">false</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">;  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (</span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">null</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> != gatewayUri &amp;&amp;  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        !isEmergencyCall &amp;&amp;  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        PhoneUtils.isRoutableViaGateway(number)) {  <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// Filter out MMI, OTA and other codes.</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        useGateway = <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">true</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">;  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    }  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">int</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> status = CALL_STATUS_DIALED;  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    Connection connection;  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    String numberToDial;  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (useGateway) {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (</span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">null</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> == gatewayUri || !Constants.SCHEME_TEL.equals(gatewayUri.getScheme())) {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            Log.e(LOG_TAG, <span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;Unsupported URL:&quot;</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> + gatewayUri);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">return</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> CALL_STATUS_FAILED;  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        }  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// We can use getSchemeSpecificPart because we don't allow #</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// in the gateway numbers (treated a fragment delim.) However</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// if we allow more complex gateway numbers sequence (with</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// passwords or whatnot) that use #, this may break.</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// TODO: Need to support MMI codes.</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        numberToDial = gatewayUri.getSchemeSpecificPart();  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    } <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">else</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        numberToDial = number;  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    }  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// Remember if the phone state was in IDLE state before this call.</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// After calling CallManager#dial(), getState() will return different state.</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">final</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> </span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">boolean</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> initiallyIdle = app.mCM.getState() == PhoneConstants.State.IDLE;  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">try</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        connection = app.mCM.dial(phone, numberToDial);  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    } <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">catch</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (CallStateException ex) {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// CallStateException means a new outgoing call is not currently</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// possible: either no more call slots exist, or there's another</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// call already in the process of dialing or ringing.</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        Log.w(LOG_TAG, <span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;Exception from app.mCM.dial()&quot;</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">, ex);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">return</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> CALL_STATUS_FAILED;  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// Note that it's possible for CallManager.dial() to return</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// null *without* throwing an exception; that indicates that</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// we dialed an MMI (see below).</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    }  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">int</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> phoneType = phone.getPhoneType();  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// On GSM phones, null is returned for MMI codes</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (</span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">null</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> == connection) {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (phoneType == PhoneConstants.PHONE_TYPE_GSM &amp;&amp; gatewayUri == </span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">null</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">) {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (DBG) log(</span><span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;dialed MMI code: &quot;</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> + number);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            status = CALL_STATUS_DIALED_MMI;  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        } <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">else</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            status = CALL_STATUS_FAILED;  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        }  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    } <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">else</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (phoneType == PhoneConstants.PHONE_TYPE_CDMA) {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            updateCdmaCallStateOnNewOutgoingCall(app);  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        }  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// Clean up the number to be displayed.</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (phoneType == PhoneConstants.PHONE_TYPE_CDMA) {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            number = CdmaConnection.formatDialString(number);  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        }  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        number = PhoneNumberUtils.extractNetworkPortion(number);  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        number = PhoneNumberUtils.convertKeypadLettersToDigits(number);  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        number = PhoneNumberUtils.formatNumber(number);  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (gatewayUri == </span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">null</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">) {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// phone.dial() succeeded: we're now in a normal phone call.</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// attach the URI to the CallerInfo Object if it is there,</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// otherwise just attach the Uri Reference.</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// if the uri does not have a &quot;content&quot; scheme, then we treat</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// it as if it does NOT have a unique reference.</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            String content = context.getContentResolver().SCHEME_CONTENT;  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> ((contactRef != </span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">null</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">) &amp;&amp; (contactRef.getScheme().equals(content))) {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                Object userDataObject = connection.getUserData();  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (userDataObject == </span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">null</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">) {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                    connection.setUserData(contactRef);  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                } <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">else</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// TODO: This branch is dead code, we have</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// just created the connection which has</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// no user data (null) by default.</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (userDataObject </span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">instanceof</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> CallerInfo) {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                    ((CallerInfo) userDataObject).contactRefUri = contactRef;  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                    } <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">else</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                    ((CallerInfoToken) userDataObject).currentInfo.contactRefUri =  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                        contactRef;  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                    }  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                }  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            }  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        } <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">else</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// Get the caller info synchronously because we need the final</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// CallerInfo object to update the dialed number with the one</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// requested by the user (and not the provider's gateway number).</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            CallerInfo info = <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">null</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">;  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            String content = phone.getContext().getContentResolver().SCHEME_CONTENT;  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> ((contactRef != </span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">null</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">) &amp;&amp; (contactRef.getScheme().equals(content))) {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                info = CallerInfo.getCallerInfo(context, contactRef);  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            }  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// Fallback, lookup contact using the phone number if the</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// contact's URI scheme was not content:// or if is was but</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// the lookup failed.</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (</span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">null</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> == info) {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                info = CallerInfo.getCallerInfo(context, number);  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            }  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            info.phoneNumber = number;  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            connection.setUserData(info);  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        }  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        setAudioMode();  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (DBG) log(</span><span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;about to activate speaker&quot;</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// Check is phone in any dock, and turn on speaker accordingly</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">final</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> </span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">boolean</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> speakerActivated = activateSpeakerIfDocked(phone);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// See also similar logic in answerCall().</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (initiallyIdle &amp;&amp; !speakerActivated &amp;&amp; isSpeakerOn(app)  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                &amp;&amp; !app.isBluetoothHeadsetAudioOn()) {  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// This is not an error but might cause users' confusion. Add log just in case.</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            Log.i(LOG_TAG, <span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;Forcing speaker off when initiating a new outgoing call...&quot;</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            PhoneUtils.turnOnSpeaker(app, <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">false</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">, </span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">true</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        }  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    }  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">return</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> status;  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">}  </span></li></ol></div>
该函数调用framework层的CallManager的dial函数。
<div style="font-family: Consolas, &apos;Courier New&apos;, Courier, mono, serif; font-size: 12px; width: 693px; overflow: auto; padding-top: 1px; text-align: left; margin: 18px 0px !important; background-color: rgb(231, 229, 220);"><div style="padding-left: 45px;"><div style="padding: 3px 8px 10px 10px; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 9px; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; color: silver; border-left-width: 3px; border-left-style: solid; border-left-color: rgb(108, 226, 108); background-color: rgb(248, 248, 248);"><strong>[java]</strong> <a href="http://blog.csdn.net/yangwen123/article/details/9790715#" style="color: rgb(160, 160, 160); text-decoration: none; border: none; padding: 1px; margin: 0px 10px 0px 0px; font-size: 9px; display: inline-block; width: 16px; height: 16px; text-indent: -2000px; background-image: url(http://static.blog.csdn.net/scripts/SyntaxHighlighter/styles/images/default/ico_plain.gif); background-attachment: initial; background-color: inherit; background-size: initial; background-origin: initial; background-clip: initial; background-position: 0% 0%; background-repeat: no-repeat;" target="_blank" title="view plain">view plain</a><a href="http://blog.csdn.net/yangwen123/article/details/9790715#" style="color: rgb(160, 160, 160); text-decoration: none; border: none; padding: 1px; margin: 0px 10px 0px 0px; font-size: 9px; display: inline-block; width: 16px; height: 16px; text-indent: -2000px; background-image: url(http://static.blog.csdn.net/scripts/SyntaxHighlighter/styles/images/default/ico_copy.gif); background-attachment: initial; background-color: inherit; background-size: initial; background-origin: initial; background-clip: initial; background-position: 0% 0%; background-repeat: no-repeat;" target="_blank" title="copy">copy</a></div></div><ol start="1" style="margin: 0px 0px 1px 45px !important; padding: 0px; border: none; list-style: decimal; color: rgb(92, 92, 92); background-color: rgb(255, 255, 255);"><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">public</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> Connection dial(Phone phone, String dialString) </span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">throws</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> CallStateException {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    Phone basePhone = getPhoneBase(phone);  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    Connection result;  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (VDBG) {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        Log.d(LOG_TAG, <span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot; dial(&quot;</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> + basePhone + </span><span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;, &quot;</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">+ dialString + </span><span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;)&quot;</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        Log.d(LOG_TAG, <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">this</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">.toString());  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    }  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (!canDial(phone)) {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">throw</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> </span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">new</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> CallStateException(</span><span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;cannot dial in current state&quot;</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    }  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (hasActiveFgCall() ) {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        Phone activePhone = getActiveFgCall().getPhone();  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">boolean</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> hasBgCall = !(activePhone.getBackgroundCall().isIdle());  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (DBG) {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            Log.d(LOG_TAG, <span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;hasBgCall: &quot;</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">+ hasBgCall + </span><span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot; sameChannel:&quot;</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> + (activePhone == basePhone));  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        }  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (activePhone != basePhone) {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (hasBgCall) {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                Log.d(LOG_TAG, <span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;Hangup&quot;</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                getActiveFgCall().hangup();  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            } <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">else</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                Log.d(LOG_TAG, <span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;Switch&quot;</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                activePhone.switchHoldingAndActive();  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            }  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        }  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    }  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    result = basePhone.dial(dialString);  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (VDBG) {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        Log.d(LOG_TAG, <span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;End dial(&quot;</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> + basePhone + </span><span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;, &quot;</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">+ dialString + </span><span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;)&quot;</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        Log.d(LOG_TAG, <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">this</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">.toString());  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    }  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">return</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> result;  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">}  </span></li></ol></div>
函数首先取得相应类型的Phone，并判断该Phone的状态，这里得到PhoneProxy类型的Phone，PhoneProxy是所有类型Phone的代理类，在构造PhoneProxy时，把对应类型的Phone保存在其成员变量mActivePhone中，有关Phone，PhoneProxy，GmsPhone，CDMAPhone之间的关系请参看<a href="http://blog.csdn.net/yangwen123/article/details/8946091" style="color: rgb(59, 89, 152); text-decoration: none; list-style: none; word-break: break-all; word-wrap: break-word; font-family: Verdana, &apos;Lucida Grande&apos;, Arial, Helvetica, sans-serif;" target="_blank">Android电话Phone设计框架介绍</a>，GSM类型的网络对应GSMPhone，因此这里将调用GSMPhone类的dial函数。
<p>./telephony/java/com/android/internal/telephony/gsm/GSMPhone.java<br/></p><div style="font-family: Consolas, &apos;Courier New&apos;, Courier, mono, serif; font-size: 12px; width: 693px; overflow: auto; padding-top: 1px; text-align: left; margin: 18px 0px !important; background-color: rgb(231, 229, 220);"><div style="padding-left: 45px;"><div style="padding: 3px 8px 10px 10px; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 9px; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; color: silver; border-left-width: 3px; border-left-style: solid; border-left-color: rgb(108, 226, 108); background-color: rgb(248, 248, 248);"><strong>[java]</strong> <a href="http://blog.csdn.net/yangwen123/article/details/9790715#" style="color: rgb(160, 160, 160); text-decoration: none; border: none; padding: 1px; margin: 0px 10px 0px 0px; font-size: 9px; display: inline-block; width: 16px; height: 16px; text-indent: -2000px; background-image: url(http://static.blog.csdn.net/scripts/SyntaxHighlighter/styles/images/default/ico_plain.gif); background-attachment: initial; background-color: inherit; background-size: initial; background-origin: initial; background-clip: initial; background-position: 0% 0%; background-repeat: no-repeat;" target="_blank" title="view plain">view plain</a><a href="http://blog.csdn.net/yangwen123/article/details/9790715#" style="color: rgb(160, 160, 160); text-decoration: none; border: none; padding: 1px; margin: 0px 10px 0px 0px; font-size: 9px; display: inline-block; width: 16px; height: 16px; text-indent: -2000px; background-image: url(http://static.blog.csdn.net/scripts/SyntaxHighlighter/styles/images/default/ico_copy.gif); background-attachment: initial; background-color: inherit; background-size: initial; background-origin: initial; background-clip: initial; background-position: 0% 0%; background-repeat: no-repeat;" target="_blank" title="copy">copy</a></div></div><ol start="1" style="margin: 0px 0px 1px 45px !important; padding: 0px; border: none; list-style: decimal; color: rgb(92, 92, 92); background-color: rgb(255, 255, 255);"><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">public</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> Connection dial(String dialString) </span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">throws</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> CallStateException {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">return</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> dial(dialString, </span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">null</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">}  </span></li></ol></div><br/><div style="font-family: Consolas, &apos;Courier New&apos;, Courier, mono, serif; font-size: 12px; width: 693px; overflow: auto; padding-top: 1px; text-align: left; margin: 18px 0px !important; background-color: rgb(231, 229, 220);"><div style="padding-left: 45px;"><div style="padding: 3px 8px 10px 10px; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 9px; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; color: silver; border-left-width: 3px; border-left-style: solid; border-left-color: rgb(108, 226, 108); background-color: rgb(248, 248, 248);"><strong>[java]</strong> <a href="http://blog.csdn.net/yangwen123/article/details/9790715#" style="color: rgb(160, 160, 160); text-decoration: none; border: none; padding: 1px; margin: 0px 10px 0px 0px; font-size: 9px; display: inline-block; width: 16px; height: 16px; text-indent: -2000px; background-image: url(http://static.blog.csdn.net/scripts/SyntaxHighlighter/styles/images/default/ico_plain.gif); background-attachment: initial; background-color: inherit; background-size: initial; background-origin: initial; background-clip: initial; background-position: 0% 0%; background-repeat: no-repeat;" target="_blank" title="view plain">view plain</a><a href="http://blog.csdn.net/yangwen123/article/details/9790715#" style="color: rgb(160, 160, 160); text-decoration: none; border: none; padding: 1px; margin: 0px 10px 0px 0px; font-size: 9px; display: inline-block; width: 16px; height: 16px; text-indent: -2000px; background-image: url(http://static.blog.csdn.net/scripts/SyntaxHighlighter/styles/images/default/ico_copy.gif); background-attachment: initial; background-color: inherit; background-size: initial; background-origin: initial; background-clip: initial; background-position: 0% 0%; background-repeat: no-repeat;" target="_blank" title="copy">copy</a></div></div><ol start="1" style="margin: 0px 0px 1px 45px !important; padding: 0px; border: none; list-style: decimal; color: rgb(92, 92, 92); background-color: rgb(255, 255, 255);"><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">public</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> Connection dial (String dialString, UUSInfo uusInfo) </span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">throws</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> CallStateException {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// Need to make sure dialString gets parsed properly</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    String newDialString = PhoneNumberUtils.stripSeparators(dialString);  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// handle in-call MMI first if applicable</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (handleInCallMmiCommands(newDialString)) {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">return</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> </span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">null</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">;  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    }  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// Only look at the Network portion for mmi</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    String networkPortion = PhoneNumberUtils.extractNetworkPortionAlt(newDialString);  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    GsmMmiCode mmi = GsmMmiCode.newFromDialString(networkPortion, <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">this</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (mmi == </span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">null</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">) {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">return</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> mCT.dial(newDialString, uusInfo);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    } <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">else</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> </span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (mmi.isTemporaryModeCLIR()) {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">return</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> mCT.dial(mmi.dialingNumber, mmi.getCLIRMode(), uusInfo);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    } <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">else</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        mPendingMMIs.add(mmi);  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        mMmiRegistrants.notifyRegistrants(<span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">new</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> AsyncResult(</span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">null</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">, mmi, </span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">null</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">));  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        mmi.processCode();  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// FIXME should this return null or something else?</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">return</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> </span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">null</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">;          </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    }  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">}  </span></li></ol></div>
GSMPhone又通过CallTracker来向RIL发送请求，关于CallTracker的类关系请参阅<a href="http://blog.csdn.net/yangwen123/article/details/8946091" style="color: rgb(59, 89, 152); text-decoration: none; list-style: none; word-break: break-all; word-wrap: break-word; font-family: Verdana, &apos;Lucida Grande&apos;, Arial, Helvetica, sans-serif;" target="_blank">Android电话Phone设计框架介绍</a><p>./telephony/java/com/android/internal/telephony/gsm/GsmCallTracker.java<br/></p><div style="font-family: Consolas, &apos;Courier New&apos;, Courier, mono, serif; font-size: 12px; width: 693px; overflow: auto; padding-top: 1px; text-align: left; margin: 18px 0px !important; background-color: rgb(231, 229, 220);"><div style="padding-left: 45px;"><div style="padding: 3px 8px 10px 10px; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 9px; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; color: silver; border-left-width: 3px; border-left-style: solid; border-left-color: rgb(108, 226, 108); background-color: rgb(248, 248, 248);"><strong>[java]</strong> <a href="http://blog.csdn.net/yangwen123/article/details/9790715#" style="color: rgb(160, 160, 160); text-decoration: none; border: none; padding: 1px; margin: 0px 10px 0px 0px; font-size: 9px; display: inline-block; width: 16px; height: 16px; text-indent: -2000px; background-image: url(http://static.blog.csdn.net/scripts/SyntaxHighlighter/styles/images/default/ico_plain.gif); background-attachment: initial; background-color: inherit; background-size: initial; background-origin: initial; background-clip: initial; background-position: 0% 0%; background-repeat: no-repeat;" target="_blank" title="view plain">view plain</a><a href="http://blog.csdn.net/yangwen123/article/details/9790715#" style="color: rgb(160, 160, 160); text-decoration: none; border: none; padding: 1px; margin: 0px 10px 0px 0px; font-size: 9px; display: inline-block; width: 16px; height: 16px; text-indent: -2000px; background-image: url(http://static.blog.csdn.net/scripts/SyntaxHighlighter/styles/images/default/ico_copy.gif); background-attachment: initial; background-color: inherit; background-size: initial; background-origin: initial; background-clip: initial; background-position: 0% 0%; background-repeat: no-repeat;" target="_blank" title="copy">copy</a></div></div><ol start="1" style="margin: 0px 0px 1px 45px !important; padding: 0px; border: none; list-style: decimal; color: rgb(92, 92, 92); background-color: rgb(255, 255, 255);"><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">synchronized</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> Connection dial (String dialString, </span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">int</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> clirMode, UUSInfo uusInfo) </span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">throws</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> CallStateException {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// note that this triggers call state changed notif</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    clearDisconnected();  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (!canDial()) {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">throw</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> </span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">new</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> CallStateException(</span><span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;cannot dial in current state&quot;</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    }  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// The new call must be assigned to the foreground call.</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// That call must be idle, so place anything that's</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// there on hold</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (foregroundCall.getState() == GsmCall.State.ACTIVE) {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// this will probably be done by the radio anyway</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// but the dial might fail before this happens</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// and we need to make sure the foreground call is clear</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// for the newly dialed connection</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        switchWaitingOrHoldingAndActive();  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// Fake local state so that</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// a) foregroundCall is empty for the newly dialed connection</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// b) hasNonHangupStateChanged remains false in the</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// next poll, so that we don't clear a failed dialing call</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        fakeHoldForegroundBeforeDial();  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    }  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (foregroundCall.getState() != GsmCall.State.IDLE) {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">//we should have failed in !canDial() above before we get here</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">throw</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> </span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">new</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> CallStateException(</span><span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;cannot dial in current state&quot;</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    }  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">//        pendingMO = new GsmConnection(phone.getContext(), checkForTestEmergencyNumber(dialString),</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">//                this, foregroundCall);</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">boolean</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> isStkCall = getStkCall();  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    log(<span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;GsmCallTracker dial: isStkCall=&quot;</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> + isStkCall);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    pendingMO = <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">new</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> GsmConnection(phone.getContext(), dialString, </span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">this</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">, foregroundCall, isStkCall, </span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">false</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    hangupPendingMO = <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">false</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">;  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (pendingMO.address == </span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">null</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> || pendingMO.address.length() == </span><span style="margin: 0px; padding: 0px; border: none; color: rgb(192, 0, 0); background-color: inherit;">0</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        || pendingMO.address.indexOf(PhoneNumberUtils.WILD) &gt;= <span style="margin: 0px; padding: 0px; border: none; color: rgb(192, 0, 0); background-color: inherit;">0</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    ) {  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// Phone number is invalid</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        pendingMO.cause = Connection.DisconnectCause.INVALID_NUMBER;  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// handlePollCalls() will notice this call not present</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// and will mark it as dropped.</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        pollCallsWhenSafe();  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    } <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">else</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// Always unmute when initiating a new call</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        setMute(<span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">false</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">//            cm.dial(pendingMO.address, clirMode, uusInfo, obtainCompleteMessage());</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// Add for bug 121825 Start</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        String tmpAddr = pendingMO.address;  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (PhoneNumberUtils.isCustomEmergencyNumber(pendingMO.address)) {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            Log.d(LOG_TAG,<span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;Pending MO is Custom Emergency call&quot;</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            tmpAddr = tmpAddr + <span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;/1&quot;</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">;  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        }  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">//cm.dial(pendingMO.address, clirMode, uusInfo, isStkCall, obtainCompleteMessage());</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        cm.dial(tmpAddr, clirMode, uusInfo, isStkCall, obtainCompleteMessage());  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// Add for bug 121825 End</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    }  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    updatePhoneState();  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    phone.notifyPreciseCallStateChanged();  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">return</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> pendingMO;  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">}  </span></li></ol></div>
cm的类型为CommandsInterface，RIL.java实现了CommandsInterface接口，因此GsmCallTracker最终是通过RIL来发送拨号请求的。
<p>./telephony/java/com/android/internal/telephony/RIL.java<br/></p><div style="font-family: Consolas, &apos;Courier New&apos;, Courier, mono, serif; font-size: 12px; width: 693px; overflow: auto; padding-top: 1px; text-align: left; margin: 18px 0px !important; background-color: rgb(231, 229, 220);"><div style="padding-left: 45px;"><div style="padding: 3px 8px 10px 10px; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 9px; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; color: silver; border-left-width: 3px; border-left-style: solid; border-left-color: rgb(108, 226, 108); background-color: rgb(248, 248, 248);"><strong>[java]</strong> <a href="http://blog.csdn.net/yangwen123/article/details/9790715#" style="color: rgb(160, 160, 160); text-decoration: none; border: none; padding: 1px; margin: 0px 10px 0px 0px; font-size: 9px; display: inline-block; width: 16px; height: 16px; text-indent: -2000px; background-image: url(http://static.blog.csdn.net/scripts/SyntaxHighlighter/styles/images/default/ico_plain.gif); background-attachment: initial; background-color: inherit; background-size: initial; background-origin: initial; background-clip: initial; background-position: 0% 0%; background-repeat: no-repeat;" target="_blank" title="view plain">view plain</a><a href="http://blog.csdn.net/yangwen123/article/details/9790715#" style="color: rgb(160, 160, 160); text-decoration: none; border: none; padding: 1px; margin: 0px 10px 0px 0px; font-size: 9px; display: inline-block; width: 16px; height: 16px; text-indent: -2000px; background-image: url(http://static.blog.csdn.net/scripts/SyntaxHighlighter/styles/images/default/ico_copy.gif); background-attachment: initial; background-color: inherit; background-size: initial; background-origin: initial; background-clip: initial; background-position: 0% 0%; background-repeat: no-repeat;" target="_blank" title="copy">copy</a></div></div><ol start="1" style="margin: 0px 0px 1px 45px !important; padding: 0px; border: none; list-style: decimal; color: rgb(92, 92, 92); background-color: rgb(255, 255, 255);"><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">public</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> </span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">void</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> dial(String address, </span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">int</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> clirMode, UUSInfo uusInfo, </span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">boolean</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> isStkCall, Message result) {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    RILRequest rr;  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (address.indexOf(</span><span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">'/'</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">) == -</span><span style="margin: 0px; padding: 0px; border: none; color: rgb(192, 0, 0); background-color: inherit;">1</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">) {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        rr = RILRequest.obtain(RIL_REQUEST_DIAL, result);  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    } <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">else</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        rr = RILRequest.obtain(RIL_REQUEST_DIAL_EMERGENCY_CALL, result);  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    }  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    rr.mp.writeString(address);  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    rr.mp.writeInt(clirMode);  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    rr.mp.writeInt(<span style="margin: 0px; padding: 0px; border: none; color: rgb(192, 0, 0); background-color: inherit;">0</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">); </span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// UUS information is absent</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (uusInfo == </span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">null</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">) {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        rr.mp.writeInt(<span style="margin: 0px; padding: 0px; border: none; color: rgb(192, 0, 0); background-color: inherit;">0</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">); </span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// UUS information is absent</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    } <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">else</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        rr.mp.writeInt(<span style="margin: 0px; padding: 0px; border: none; color: rgb(192, 0, 0); background-color: inherit;">1</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">); </span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// UUS information is present</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        rr.mp.writeInt(uusInfo.getType());  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        rr.mp.writeInt(uusInfo.getDcs());  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        rr.mp.writeByteArray(uusInfo.getUserData());  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    }  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    rr.mp.writeInt(isStkCall ? <span style="margin: 0px; padding: 0px; border: none; color: rgb(192, 0, 0); background-color: inherit;">1</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">:</span><span style="margin: 0px; padding: 0px; border: none; color: rgb(192, 0, 0); background-color: inherit;">0</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (RILJ_LOGD) riljLog(rr.serialString() + </span><span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;&gt; &quot;</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> + requestToString(rr.mRequest));  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    send(rr);  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">}  </span></li></ol></div><p> Java部分的request请求号需要与C/C++部分的请求号保持一致。当需要执行某种AT命令request请求时，则需创建一个新的RILRequest，使用RILRequest的obtain函数,该obtain静态函数用于从其内部维护的一个 RIL request池sPool中取下一个request，得到一个RILRequest对象，它里面的请求号和用于回送结果及处理者handler的消息来自传递的实参。当一个RILRequest对象不再使用时，调用release() 函数将其释放回池中。将RILRequest请求放置到消息队列上，然后sender线程将其写入socket，rild侧通过dispatch线程将请求分发出去。在RIL类中，还维护了一个RILRequest请求列表，RILRequest类中的serial作为其id标识。当sender发送一个RIL请求后，则将其添加到该列表中,若发送时出现异常则需再清除；当请求完成并得到回送的response消息后，使用findAndRemoveRequestFromList函数将其移除。RIL请求执行AT是一个异步的过程：调用者调用RIL类的API函数只是往线程的消息队列上添加了一消息就返回；然后线程在执行无限循环时将其写到socket中，并将RILRequest对象添加到一个列表中；当RILReciever线程收到数据并解析，然后查询系列号后得到这是某个先前的RIL请求后，将AT执行的返回结果放到AsynResult中并赋值给Message中的obj成员后，由Message.sendToTarget送回到调用者并由其处理。</p><p><img src="Android电话拨打流程源码分析_files/Image [2].png" type="image/png" style="border: none; max-width: 100%;"/><br/></p><div style="font-family: Consolas, &apos;Courier New&apos;, Courier, mono, serif; font-size: 12px; width: 693px; overflow: auto; padding-top: 1px; text-align: left; margin: 18px 0px !important; background-color: rgb(231, 229, 220);"><div style="padding-left: 45px;"><div style="padding: 3px 8px 10px 10px; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 9px; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; color: silver; border-left-width: 3px; border-left-style: solid; border-left-color: rgb(108, 226, 108); background-color: rgb(248, 248, 248);"><strong>[java]</strong> <a href="http://blog.csdn.net/yangwen123/article/details/9790715#" style="color: rgb(160, 160, 160); text-decoration: none; border: none; padding: 1px; margin: 0px 10px 0px 0px; font-size: 9px; display: inline-block; width: 16px; height: 16px; text-indent: -2000px; background-image: url(http://static.blog.csdn.net/scripts/SyntaxHighlighter/styles/images/default/ico_plain.gif); background-attachment: initial; background-color: inherit; background-size: initial; background-origin: initial; background-clip: initial; background-position: 0% 0%; background-repeat: no-repeat;" target="_blank" title="view plain">view plain</a><a href="http://blog.csdn.net/yangwen123/article/details/9790715#" style="color: rgb(160, 160, 160); text-decoration: none; border: none; padding: 1px; margin: 0px 10px 0px 0px; font-size: 9px; display: inline-block; width: 16px; height: 16px; text-indent: -2000px; background-image: url(http://static.blog.csdn.net/scripts/SyntaxHighlighter/styles/images/default/ico_copy.gif); background-attachment: initial; background-color: inherit; background-size: initial; background-origin: initial; background-clip: initial; background-position: 0% 0%; background-repeat: no-repeat;" target="_blank" title="copy">copy</a></div></div><ol start="1" style="margin: 0px 0px 1px 45px !important; padding: 0px; border: none; list-style: decimal; color: rgb(92, 92, 92); background-color: rgb(255, 255, 255);"><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">protected</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> </span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">void</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> send(RILRequest rr) {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    Message msg;  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (mSocket == </span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">null</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">) {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        rr.onError(RADIO_NOT_AVAILABLE, <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">null</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        rr.release();  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">return</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">;  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    }  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    msg = mSender.obtainMessage(EVENT_SEND, rr);  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    acquireWakeLock();  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    msg.sendToTarget();  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">}  </span></li></ol></div>
RILSender消息处理过程
<div style="font-family: Consolas, &apos;Courier New&apos;, Courier, mono, serif; font-size: 12px; width: 693px; overflow: auto; padding-top: 1px; text-align: left; margin: 18px 0px !important; background-color: rgb(231, 229, 220);"><div style="padding-left: 45px;"><div style="padding: 3px 8px 10px 10px; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 9px; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; color: silver; border-left-width: 3px; border-left-style: solid; border-left-color: rgb(108, 226, 108); background-color: rgb(248, 248, 248);"><strong>[java]</strong> <a href="http://blog.csdn.net/yangwen123/article/details/9790715#" style="color: rgb(160, 160, 160); text-decoration: none; border: none; padding: 1px; margin: 0px 10px 0px 0px; font-size: 9px; display: inline-block; width: 16px; height: 16px; text-indent: -2000px; background-image: url(http://static.blog.csdn.net/scripts/SyntaxHighlighter/styles/images/default/ico_plain.gif); background-attachment: initial; background-color: inherit; background-size: initial; background-origin: initial; background-clip: initial; background-position: 0% 0%; background-repeat: no-repeat;" target="_blank" title="view plain">view plain</a><a href="http://blog.csdn.net/yangwen123/article/details/9790715#" style="color: rgb(160, 160, 160); text-decoration: none; border: none; padding: 1px; margin: 0px 10px 0px 0px; font-size: 9px; display: inline-block; width: 16px; height: 16px; text-indent: -2000px; background-image: url(http://static.blog.csdn.net/scripts/SyntaxHighlighter/styles/images/default/ico_copy.gif); background-attachment: initial; background-color: inherit; background-size: initial; background-origin: initial; background-clip: initial; background-position: 0% 0%; background-repeat: no-repeat;" target="_blank" title="copy">copy</a></div></div><ol start="1" style="margin: 0px 0px 1px 45px !important; padding: 0px; border: none; list-style: decimal; color: rgb(92, 92, 92); background-color: rgb(255, 255, 255);"><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">class</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> RILSender </span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">extends</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> Handler </span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">implements</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> Runnable {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">public</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> RILSender(Looper looper) {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">super</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">(looper);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    }  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">byte</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">[] dataLength = </span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">new</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> </span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">byte</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">[</span><span style="margin: 0px; padding: 0px; border: none; color: rgb(192, 0, 0); background-color: inherit;">4</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">];  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">public</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> </span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">void</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    run() {  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">//setup if needed</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    }  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">      </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(100, 100, 100); background-color: inherit;">@Override</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> </span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">public</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> </span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">void</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    handleMessage(Message msg) {  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        RILRequest rr = (RILRequest)(msg.obj);  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        RILRequest req = <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">null</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">;  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">switch</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (msg.what) {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">case</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> EVENT_SEND:  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">/**</span> </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">                 * mRequestMessagePending++ already happened for every</span> </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">                 * EVENT_SEND, thus we must make sure</span> </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">                 * mRequestMessagePending-- happens once and only once</span> </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">                 */</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">boolean</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> alreadySubtracted = </span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">false</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">;  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">try</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                    LocalSocket s;  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                    s = mSocket;  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (s == </span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">null</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">) {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                        rr.onError(RADIO_NOT_AVAILABLE, <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">null</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                        rr.release();  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                        <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (mRequestMessagesPending &gt; </span><span style="margin: 0px; padding: 0px; border: none; color: rgb(192, 0, 0); background-color: inherit;">0</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">)  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                            mRequestMessagesPending--;  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                        alreadySubtracted = <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">true</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">;  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                        <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">return</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">;  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                    }  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">synchronized</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (mRequestsList) {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                        mRequestsList.add(rr);  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                        mRequestMessagesWaiting++;  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                    }  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (mRequestMessagesPending &gt; </span><span style="margin: 0px; padding: 0px; border: none; color: rgb(192, 0, 0); background-color: inherit;">0</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">)  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                        mRequestMessagesPending--;  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                    alreadySubtracted = <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">true</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">;  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">byte</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">[] data;  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                    data = rr.mp.marshall();  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                    rr.mp.recycle();  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                    rr.mp = <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">null</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">;  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (data.length &gt; RIL_MAX_COMMAND_BYTES) {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                        <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">throw</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> </span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">new</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> RuntimeException(</span><span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;Parcel larger than max bytes allowed! &quot;</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">+ data.length);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                    }  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// parcel length in big endian</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                    dataLength[<span style="margin: 0px; padding: 0px; border: none; color: rgb(192, 0, 0); background-color: inherit;">0</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">] = dataLength[</span><span style="margin: 0px; padding: 0px; border: none; color: rgb(192, 0, 0); background-color: inherit;">1</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">] = </span><span style="margin: 0px; padding: 0px; border: none; color: rgb(192, 0, 0); background-color: inherit;">0</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">;  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                    dataLength[<span style="margin: 0px; padding: 0px; border: none; color: rgb(192, 0, 0); background-color: inherit;">2</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">] = (</span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">byte</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">)((data.length &gt;&gt; </span><span style="margin: 0px; padding: 0px; border: none; color: rgb(192, 0, 0); background-color: inherit;">8</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">) &amp; </span><span style="margin: 0px; padding: 0px; border: none; color: rgb(192, 0, 0); background-color: inherit;">0xff</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                    dataLength[<span style="margin: 0px; padding: 0px; border: none; color: rgb(192, 0, 0); background-color: inherit;">3</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">] = (</span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">byte</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">)((data.length) &amp; </span><span style="margin: 0px; padding: 0px; border: none; color: rgb(192, 0, 0); background-color: inherit;">0xff</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">//Log.v(LOG_TAG, &quot;writing packet: &quot; + data.length + &quot; bytes&quot;);</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                    s.getOutputStream().write(dataLength);  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                    s.getOutputStream().write(data);  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                } <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">catch</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (IOException ex) {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                    Log.e(LOG_TAG, <span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;IOException&quot;</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">, ex);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                    req = findAndRemoveRequestFromList(rr.mSerial);  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// make sure this request has not already been handled,</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// eg, if RILReceiver cleared the list.</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (req != </span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">null</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> || !alreadySubtracted) {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                        rr.onError(RADIO_NOT_AVAILABLE, <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">null</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                        rr.release();  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                    }  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                } <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">catch</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (RuntimeException exc) {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                    Log.e(LOG_TAG, <span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;Uncaught exception &quot;</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">, exc);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                    req = findAndRemoveRequestFromList(rr.mSerial);  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// make sure this request has not already been handled,</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// eg, if RILReceiver cleared the list.</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (req != </span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">null</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> || !alreadySubtracted) {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                        rr.onError(GENERIC_FAILURE, <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">null</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                        rr.release();  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                    }  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                } <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">finally</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// Note: We are &quot;Done&quot; only if there are no outstanding</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// requests or replies. Thus this code path will only release</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// the wake lock on errors.</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                    releaseWakeLockIfDone();  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                }  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (!alreadySubtracted &amp;&amp; mRequestMessagesPending &gt; </span><span style="margin: 0px; padding: 0px; border: none; color: rgb(192, 0, 0); background-color: inherit;">0</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">) {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                    mRequestMessagesPending--;  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                }  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">break</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">;  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        }  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    }  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">}  </span></li></ol></div>
在处理EVENT_SEND消息时，将请求参数写入到rild套接字中，在<a href="http://blog.csdn.net/yangwen123/article/details/8946091" style="color: rgb(59, 89, 152); text-decoration: none; list-style: none; word-break: break-all; word-wrap: break-word; font-family: Verdana, &apos;Lucida Grande&apos;, Arial, Helvetica, sans-serif;" target="_blank">Android电话Phone设计框架介绍</a>中介绍了rild服务进程作为Android电话系统的服务端，接收客户端framework层发送过来的请求，并与modem交互，实现整个拨号过程。关于rild服务在<a href="http://blog.csdn.net/yangwen123/article/details/8914291" style="color: rgb(59, 89, 152); text-decoration: none; list-style: none; word-break: break-all; word-wrap: break-word; font-family: Verdana, &apos;Lucida Grande&apos;, Arial, Helvetica, sans-serif;" target="_blank">Android之rild进程启动源码分析</a>已经详细介绍了，至此电话拨号请求的发送过程就完成了。拨号的本质就是应用层Phone进程首先对拨打的号码进行一系列处理，然后进入framework层，通过framework层的电话客户端发送线程将请求通过套接字的方式发送给电话服务进程rild，rild将该请求映射为相应的AT指令发送到modem中。
<p><br/></p><h2 style="margin: 0px; padding: 0px;"><a name="t1" style="color: rgb(106, 57, 6); text-decoration: none;"></a><a name="t1" style="color: rgb(106, 57, 6); text-decoration: none;" target="_blank"></a>2.拨号界面显示</h2><p>在CallController的placeCall函数中，首先将拨号请求发送到rild服务进程，然后启动呼叫界面InCallScreen，<a href="http://blog.csdn.net/yangwen123/article/details/9367551" style="color: rgb(59, 89, 152); text-decoration: none; list-style: none; word-break: break-all; word-wrap: break-word; font-family: Verdana, &apos;Lucida Grande&apos;, Arial, Helvetica, sans-serif;" target="_blank">Android电话Phone UI分析</a>对InCallScreen的UI布局进行了详细的分析，只有了解InCallScreen的UI布局，才能更好地理解InCallScreen的启动过程。InCallScreen主要是显示通话界面， 并且还负责菜单项各种按键事件和触摸时间的处理。同时本类还复写的finish()方法，所以一般不会被finish掉，调用该方法时它又把自己放回栈中。</p><p>src\com\android\phone\PhoneGlobals.java<br/></p><div style="font-family: Consolas, &apos;Courier New&apos;, Courier, mono, serif; font-size: 12px; width: 693px; overflow: auto; padding-top: 1px; text-align: left; margin: 18px 0px !important; background-color: rgb(231, 229, 220);"><div style="padding-left: 45px;"><div style="padding: 3px 8px 10px 10px; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 9px; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; color: silver; border-left-width: 3px; border-left-style: solid; border-left-color: rgb(108, 226, 108); background-color: rgb(248, 248, 248);"><strong>[java]</strong> <a href="http://blog.csdn.net/yangwen123/article/details/9790715#" style="color: rgb(160, 160, 160); text-decoration: none; border: none; padding: 1px; margin: 0px 10px 0px 0px; font-size: 9px; display: inline-block; width: 16px; height: 16px; text-indent: -2000px; background-image: url(http://static.blog.csdn.net/scripts/SyntaxHighlighter/styles/images/default/ico_plain.gif); background-attachment: initial; background-color: inherit; background-size: initial; background-origin: initial; background-clip: initial; background-position: 0% 0%; background-repeat: no-repeat;" target="_blank" title="view plain">view plain</a><a href="http://blog.csdn.net/yangwen123/article/details/9790715#" style="color: rgb(160, 160, 160); text-decoration: none; border: none; padding: 1px; margin: 0px 10px 0px 0px; font-size: 9px; display: inline-block; width: 16px; height: 16px; text-indent: -2000px; background-image: url(http://static.blog.csdn.net/scripts/SyntaxHighlighter/styles/images/default/ico_copy.gif); background-attachment: initial; background-color: inherit; background-size: initial; background-origin: initial; background-clip: initial; background-position: 0% 0%; background-repeat: no-repeat;" target="_blank" title="copy">copy</a></div></div><ol start="1" style="margin: 0px 0px 1px 45px !important; padding: 0px; border: none; list-style: decimal; color: rgb(92, 92, 92); background-color: rgb(255, 255, 255);"><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">void</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> displayCallScreen() {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (VDBG) Log.d(LOG_TAG, </span><span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;displayCallScreen()...&quot;</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// On non-voice-capable devices we shouldn't ever be trying to</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// bring up the InCallScreen in the first place.</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (!sVoiceCapable) {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        Log.w(LOG_TAG, <span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;displayCallScreen() not allowed: non-voice-capable device&quot;</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">,</span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">new</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> Throwable(</span><span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;stack dump&quot;</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">));    </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">return</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">;  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    }  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">//启动电话呼叫界面InCallScreen</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">try</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        startActivity(createInCallIntent());  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    } <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">catch</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (ActivityNotFoundException e) {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        Log.w(LOG_TAG, <span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;displayCallScreen: transition to InCallScreen failed: &quot;</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> + e);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    }  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    Profiler.callScreenRequested();  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">}  </span></li></ol></div><p><br/></p><div style="font-family: Consolas, &apos;Courier New&apos;, Courier, mono, serif; font-size: 12px; width: 693px; overflow: auto; padding-top: 1px; text-align: left; margin: 18px 0px !important; background-color: rgb(231, 229, 220);"><div style="padding-left: 45px;"><div style="padding: 3px 8px 10px 10px; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 9px; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; color: silver; border-left-width: 3px; border-left-style: solid; border-left-color: rgb(108, 226, 108); background-color: rgb(248, 248, 248);"><strong>[java]</strong> <a href="http://blog.csdn.net/yangwen123/article/details/9790715#" style="color: rgb(160, 160, 160); text-decoration: none; border: none; padding: 1px; margin: 0px 10px 0px 0px; font-size: 9px; display: inline-block; width: 16px; height: 16px; text-indent: -2000px; background-image: url(http://static.blog.csdn.net/scripts/SyntaxHighlighter/styles/images/default/ico_plain.gif); background-attachment: initial; background-color: inherit; background-size: initial; background-origin: initial; background-clip: initial; background-position: 0% 0%; background-repeat: no-repeat;" target="_blank" title="view plain">view plain</a><a href="http://blog.csdn.net/yangwen123/article/details/9790715#" style="color: rgb(160, 160, 160); text-decoration: none; border: none; padding: 1px; margin: 0px 10px 0px 0px; font-size: 9px; display: inline-block; width: 16px; height: 16px; text-indent: -2000px; background-image: url(http://static.blog.csdn.net/scripts/SyntaxHighlighter/styles/images/default/ico_copy.gif); background-attachment: initial; background-color: inherit; background-size: initial; background-origin: initial; background-clip: initial; background-position: 0% 0%; background-repeat: no-repeat;" target="_blank" title="copy">copy</a></div></div><ol start="1" style="margin: 0px 0px 1px 45px !important; padding: 0px; border: none; list-style: decimal; color: rgb(92, 92, 92); background-color: rgb(255, 255, 255);"><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">static</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> Intent createInCallIntent() {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    Intent intent = <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">new</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> Intent(Intent.ACTION_MAIN, </span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">null</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            | Intent.FLAG_ACTIVITY_EXCLUDE_FROM_RECENTS  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            | Intent.FLAG_ACTIVITY_NO_USER_ACTION);  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    intent.setClassName(<span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;com.android.phone&quot;</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">, getCallScreenClassName());  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">return</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> intent;  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">}  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">private</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> </span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">static</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> String getCallScreenClassName() {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">return</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> InCallScreen.</span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">class</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">.getName();  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">}  </span></li></ol></div><p>第一次启动InCallScreen，首先调用其onCreate函数</p>
src\com\android\phone\InCallScreen.java<br/><div style="font-family: Consolas, &apos;Courier New&apos;, Courier, mono, serif; font-size: 12px; width: 693px; overflow: auto; padding-top: 1px; text-align: left; margin: 18px 0px !important; background-color: rgb(231, 229, 220);"><div style="padding-left: 45px;"><div style="padding: 3px 8px 10px 10px; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 9px; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; color: silver; border-left-width: 3px; border-left-style: solid; border-left-color: rgb(108, 226, 108); background-color: rgb(248, 248, 248);"><strong>[java]</strong> <a href="http://blog.csdn.net/yangwen123/article/details/9790715#" style="color: rgb(160, 160, 160); text-decoration: none; border: none; padding: 1px; margin: 0px 10px 0px 0px; font-size: 9px; display: inline-block; width: 16px; height: 16px; text-indent: -2000px; background-image: url(http://static.blog.csdn.net/scripts/SyntaxHighlighter/styles/images/default/ico_plain.gif); background-attachment: initial; background-color: inherit; background-size: initial; background-origin: initial; background-clip: initial; background-position: 0% 0%; background-repeat: no-repeat;" target="_blank" title="view plain">view plain</a><a href="http://blog.csdn.net/yangwen123/article/details/9790715#" style="color: rgb(160, 160, 160); text-decoration: none; border: none; padding: 1px; margin: 0px 10px 0px 0px; font-size: 9px; display: inline-block; width: 16px; height: 16px; text-indent: -2000px; background-image: url(http://static.blog.csdn.net/scripts/SyntaxHighlighter/styles/images/default/ico_copy.gif); background-attachment: initial; background-color: inherit; background-size: initial; background-origin: initial; background-clip: initial; background-position: 0% 0%; background-repeat: no-repeat;" target="_blank" title="copy">copy</a></div></div><ol start="1" style="margin: 0px 0px 1px 45px !important; padding: 0px; border: none; list-style: decimal; color: rgb(92, 92, 92); background-color: rgb(255, 255, 255);"><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">protected</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> </span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">void</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> onCreate(Bundle icicle) {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    Log.i(LOG_TAG, <span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;onCreate()...  this = &quot;</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> + </span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">this</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">//获得通话界面被创建的时间</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    Profiler.callScreenOnCreate();  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">super</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">.onCreate(icicle);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// Make sure this is a voice-capable device.</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (!PhoneGlobals.sVoiceCapable) {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        Log.wtf(LOG_TAG, <span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;onCreate() reached on non-voice-capable device&quot;</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        finish();  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">return</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">;  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    }  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    mApp = PhoneGlobals.getInstance();  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    mApp.setInCallScreenInstance(<span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">this</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// set this flag so this activity will stay in front of the keyguard</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">int</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> flags = WindowManager.LayoutParams.FLAG_SHOW_WHEN_LOCKED  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            | WindowManager.LayoutParams.FLAG_TURN_SCREEN_ON;  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (mApp.getPhoneState() == PhoneConstants.State.OFFHOOK) {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        flags |= WindowManager.LayoutParams.FLAG_DISMISS_KEYGUARD;  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    }  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    WindowManager.LayoutParams lp = getWindow().getAttributes();  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    lp.flags |= flags;  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (!mApp.proximitySensorModeEnabled()) {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// If we don't have a proximity sensor, then the in-call screen explicitly</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// controls user activity.  This is to prevent spurious touches from waking</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// the display.</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        lp.inputFeatures |= WindowManager.LayoutParams.INPUT_FEATURE_DISABLE_USER_ACTIVITY;  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    }  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">//设置窗体属性</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    getWindow().setAttributes(lp);  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    setPhone(mApp.phone);  <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// Sets mPhone</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    mCM =  mApp.mCM;  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    log(<span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;- onCreate: phone state = &quot;</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> + mCM.getState());  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    mBluetoothAdapter = BluetoothAdapter.getDefaultAdapter();  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (mBluetoothAdapter != </span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">null</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">) {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        mBluetoothAdapter.getProfileProxy(getApplicationContext(), mBluetoothProfileServiceListener,  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                                BluetoothProfile.HEADSET);  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    }  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">//设置窗体显示风格</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    requestWindowFeature(Window.FEATURE_NO_TITLE);  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">//加载布局文件</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    setContentView(R.layout.incall_screen);  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">final</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> ViewStub touchUiStub = (ViewStub) findViewById(  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            mPhone.getPhoneType() == PhoneConstants.PHONE_TYPE_CDMA  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            ? R.id.inCallTouchUiCdmaStub : R.id.inCallTouchUiStub);  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (touchUiStub != </span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">null</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">) touchUiStub.inflate();  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">//加载各种view组建</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    initInCallScreen();  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">//对通话的各种状态进行广播。</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    registerForPhoneStates();  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">//判断是否使用了OTA技术，通过该判断设置通话界面的样式。</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (icicle == </span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">null</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">) {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (DBG) log(</span><span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;onCreate(): this is our very first launch, checking intent...&quot;</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        internalResolveIntent(getIntent());  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    }  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">//记录通话界面创建完成后的时间</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    Profiler.callScreenCreated();  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (DBG) log(</span><span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;onCreate(): exit&quot;</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">}  </span></li></ol></div>
UI初始化过程，为了能更好的理解UI初始化过程，请查看<a href="http://blog.csdn.net/yangwen123/article/details/9367551" style="color: rgb(59, 89, 152); text-decoration: none; list-style: none; word-break: break-all; word-wrap: break-word; font-family: Verdana, &apos;Lucida Grande&apos;, Arial, Helvetica, sans-serif;" target="_blank">Android电话Phone UI分析</a>一文了解电话呼叫界面的UI布局。
<div style="font-family: Consolas, &apos;Courier New&apos;, Courier, mono, serif; font-size: 12px; width: 693px; overflow: auto; padding-top: 1px; text-align: left; margin: 18px 0px !important; background-color: rgb(231, 229, 220);"><div style="padding-left: 45px;"><div style="padding: 3px 8px 10px 10px; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 9px; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; color: silver; border-left-width: 3px; border-left-style: solid; border-left-color: rgb(108, 226, 108); background-color: rgb(248, 248, 248);"><strong>[java]</strong> <a href="http://blog.csdn.net/yangwen123/article/details/9790715#" style="color: rgb(160, 160, 160); text-decoration: none; border: none; padding: 1px; margin: 0px 10px 0px 0px; font-size: 9px; display: inline-block; width: 16px; height: 16px; text-indent: -2000px; background-image: url(http://static.blog.csdn.net/scripts/SyntaxHighlighter/styles/images/default/ico_plain.gif); background-attachment: initial; background-color: inherit; background-size: initial; background-origin: initial; background-clip: initial; background-position: 0% 0%; background-repeat: no-repeat;" target="_blank" title="view plain">view plain</a><a href="http://blog.csdn.net/yangwen123/article/details/9790715#" style="color: rgb(160, 160, 160); text-decoration: none; border: none; padding: 1px; margin: 0px 10px 0px 0px; font-size: 9px; display: inline-block; width: 16px; height: 16px; text-indent: -2000px; background-image: url(http://static.blog.csdn.net/scripts/SyntaxHighlighter/styles/images/default/ico_copy.gif); background-attachment: initial; background-color: inherit; background-size: initial; background-origin: initial; background-clip: initial; background-position: 0% 0%; background-repeat: no-repeat;" target="_blank" title="copy">copy</a></div></div><ol start="1" style="margin: 0px 0px 1px 45px !important; padding: 0px; border: none; list-style: decimal; color: rgb(92, 92, 92); background-color: rgb(255, 255, 255);"><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">private</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> </span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">void</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> initInCallScreen() {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (VDBG) log(</span><span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;initInCallScreen()...&quot;</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// Have the WindowManager filter out touch events that are &quot;too fat&quot;.</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    getWindow().addFlags(WindowManager.LayoutParams.FLAG_IGNORE_CHEEK_PRESSES);  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// Initialize the CallCard.</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    mCallCard = (CallCard) findViewById(R.id.callCard);  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (VDBG) log(</span><span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;  - mCallCard = &quot;</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> + mCallCard);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    mCallCard.setInCallScreenInstance(<span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">this</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// Initialize the onscreen UI elements.</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    initInCallTouchUi();  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// Helper class to keep track of enabledness/state of UI controls</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    mInCallControlState = <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">new</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> InCallControlState(</span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">this</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">, mCM);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// Helper class to run the &quot;Manage conference&quot; UI</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    mManageConferenceUtils = <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">new</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> ManageConferenceUtils(</span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">this</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">, mCM);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// The DTMF Dialpad.</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    ViewStub stub = (ViewStub) findViewById(R.id.dtmf_twelve_key_dialer_stub);  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    mDialer = <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">new</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> DTMFTwelveKeyDialer(</span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">this</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">, stub);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    mPowerManager = (PowerManager) getSystemService(Context.POWER_SERVICE);  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">}  </span></li></ol></div><br/><div style="font-family: Consolas, &apos;Courier New&apos;, Courier, mono, serif; font-size: 12px; width: 693px; overflow: auto; padding-top: 1px; text-align: left; margin: 18px 0px !important; background-color: rgb(231, 229, 220);"><div style="padding-left: 45px;"><div style="padding: 3px 8px 10px 10px; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 9px; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; color: silver; border-left-width: 3px; border-left-style: solid; border-left-color: rgb(108, 226, 108); background-color: rgb(248, 248, 248);"><strong>[java]</strong> <a href="http://blog.csdn.net/yangwen123/article/details/9790715#" style="color: rgb(160, 160, 160); text-decoration: none; border: none; padding: 1px; margin: 0px 10px 0px 0px; font-size: 9px; display: inline-block; width: 16px; height: 16px; text-indent: -2000px; background-image: url(http://static.blog.csdn.net/scripts/SyntaxHighlighter/styles/images/default/ico_plain.gif); background-attachment: initial; background-color: inherit; background-size: initial; background-origin: initial; background-clip: initial; background-position: 0% 0%; background-repeat: no-repeat;" target="_blank" title="view plain">view plain</a><a href="http://blog.csdn.net/yangwen123/article/details/9790715#" style="color: rgb(160, 160, 160); text-decoration: none; border: none; padding: 1px; margin: 0px 10px 0px 0px; font-size: 9px; display: inline-block; width: 16px; height: 16px; text-indent: -2000px; background-image: url(http://static.blog.csdn.net/scripts/SyntaxHighlighter/styles/images/default/ico_copy.gif); background-attachment: initial; background-color: inherit; background-size: initial; background-origin: initial; background-clip: initial; background-position: 0% 0%; background-repeat: no-repeat;" target="_blank" title="copy">copy</a></div></div><ol start="1" style="margin: 0px 0px 1px 45px !important; padding: 0px; border: none; list-style: decimal; color: rgb(92, 92, 92); background-color: rgb(255, 255, 255);"><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">private</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> </span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">void</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> internalResolveIntent(Intent intent) {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (intent == </span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">null</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> || intent.getAction() == </span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">null</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">) {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">return</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">;  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    }  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    String action = intent.getAction();  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (DBG) log(</span><span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;internalResolveIntent: action=&quot;</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> + action);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (action.equals(intent.ACTION_MAIN)) {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (intent.hasExtra(SHOW_DIALPAD_EXTRA)) {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">boolean</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> showDialpad = intent.getBooleanExtra(SHOW_DIALPAD_EXTRA, </span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">false</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (VDBG) log(</span><span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;- internalResolveIntent: SHOW_DIALPAD_EXTRA: &quot;</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> + showDialpad);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            mApp.inCallUiState.showDialpad = showDialpad;  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">final</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> </span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">boolean</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> hasActiveCall = mCM.hasActiveFgCall();  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">final</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> </span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">boolean</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> hasHoldingCall = mCM.hasActiveBgCall();  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (showDialpad &amp;&amp; !hasActiveCall &amp;&amp; hasHoldingCall) {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                PhoneUtils.switchHoldingAndActive(mCM.getFirstActiveBgCall());  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            }  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        }  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">return</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">;  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    }  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (action.equals(OtaUtils.ACTION_DISPLAY_ACTIVATION_SCREEN)) {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (!TelephonyCapabilities.supportsOtasp(mPhone)) {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">throw</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> </span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">new</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> IllegalStateException(  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                <span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;Received ACTION_DISPLAY_ACTIVATION_SCREEN intent on non-OTASP-capable device: &quot;</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                + intent);  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        }  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        setInCallScreenMode(InCallScreenMode.OTA_NORMAL);  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> ((mApp.cdmaOtaProvisionData != </span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">null</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">)  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            &amp;&amp; (!mApp.cdmaOtaProvisionData.isOtaCallIntentProcessed)) {  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            mApp.cdmaOtaProvisionData.isOtaCallIntentProcessed = <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">true</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">;  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            mApp.cdmaOtaScreenState.otaScreenState =  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                    CdmaOtaScreenState.OtaScreenState.OTA_STATUS_ACTIVATION;  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        }  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">return</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">;  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    }  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (action.equals(OtaUtils.ACTION_PERFORM_CDMA_PROVISIONING)) {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">throw</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> </span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">new</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> IllegalStateException(  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            <span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;Unexpected ACTION_PERFORM_CDMA_PROVISIONING received by InCallScreen: &quot;</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">+ intent);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    } <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">else</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> </span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (action.equals(Intent.ACTION_CALL) || action.equals(Intent.ACTION_CALL_EMERGENCY)) {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// ACTION_CALL* intents go to the OutgoingCallBroadcaster, which now</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// translates them into CallController.placeCall() calls rather than</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// launching the InCallScreen directly.</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">throw</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> </span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">new</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> IllegalStateException(</span><span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;Unexpected CALL action received by InCallScreen: &quot;</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">+ intent);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    } <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">else</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> </span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> (action.equals(ACTION_UNDEFINED)) {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// This action is only used for internal bookkeeping; we should</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// never actually get launched with it.</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        Log.wtf(LOG_TAG, <span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;internalResolveIntent: got launched with ACTION_UNDEFINED&quot;</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">return</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">;  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    } <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">else</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        Log.wtf(LOG_TAG, <span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;internalResolveIntent: unexpected intent action: &quot;</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"> + action);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// But continue the best we can (basically treating this case</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">// like ACTION_MAIN...)</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">return</span><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">;  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    }  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-style: none none none solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">}  </span></li></ol></div><img src="Android电话拨打流程源码分析_files/Image [3].png" type="image/png" height="500" style="border: none; max-width: 100%;" width="700"/></div><div style="zoom: 1; float: right;"><a href="http://blog.csdn.net/kevinx_xu/article/details/11845619#" style="color: rgb(51, 51, 51); text-decoration: none; float: left; font-size: 12px; padding-left: 17px; height: 16px; cursor: pointer; margin: 6px 6px 6px 0px; background-image: url(http://bdimg.share.baidu.com/static/api/img/share/icons_0_16.png?v=d754dcc0.png) !important; background-position: 0px 0px !important; background-repeat: no-repeat;" target="_blank"></a><a href="http://blog.csdn.net/kevinx_xu/article/details/11845619#" style="color: rgb(106, 57, 6); text-decoration: none; float: left; font-size: 12px; padding-left: 17px; height: 16px; cursor: pointer; margin: 6px 6px 6px 0px; background-image: url(http://bdimg.share.baidu.com/static/api/img/share/icons_0_16.png?v=91362611.png); background-position: 0px -52px !important; background-repeat: no-repeat;" target="_blank" title="分享到QQ空间"></a><a href="http://blog.csdn.net/kevinx_xu/article/details/11845619#" style="color: rgb(106, 57, 6); text-decoration: none; float: left; font-size: 12px; padding-left: 17px; height: 16px; cursor: pointer; margin: 6px 6px 6px 0px; background-image: url(http://bdimg.share.baidu.com/static/api/img/share/icons_0_16.png?v=91362611.png); background-position: 0px -104px !important; background-repeat: no-repeat;" target="_blank" title="分享到新浪微博"></a><a href="http://blog.csdn.net/kevinx_xu/article/details/11845619#" style="color: rgb(106, 57, 6); text-decoration: none; float: left; font-size: 12px; padding-left: 17px; height: 16px; cursor: pointer; margin: 6px 6px 6px 0px; background-image: url(http://bdimg.share.baidu.com/static/api/img/share/icons_0_16.png?v=91362611.png); background-position: 0px -260px !important; background-repeat: no-repeat;" target="_blank" title="分享到腾讯微博"></a><a href="http://blog.csdn.net/kevinx_xu/article/details/11845619#" style="color: rgb(106, 57, 6); text-decoration: none; float: left; font-size: 12px; padding-left: 17px; height: 16px; cursor: pointer; margin: 6px 6px 6px 0px; background-image: url(http://bdimg.share.baidu.com/static/api/img/share/icons_0_16.png?v=91362611.png); background-position: 0px -208px !important; background-repeat: no-repeat;" target="_blank" title="分享到人人网"></a><a href="http://blog.csdn.net/kevinx_xu/article/details/11845619#" style="color: rgb(106, 57, 6); text-decoration: none; float: left; font-size: 12px; padding-left: 17px; height: 16px; cursor: pointer; margin: 6px 6px 6px 0px; background-image: url(http://bdimg.share.baidu.com/static/api/img/share/icons_0_16.png?v=91362611.png); background-position: 0px -1612px !important; background-repeat: no-repeat;" target="_blank" title="分享到微信"></a></div><div style="display: block; clear: both; width: 182px; margin: 0px auto; padding: 30px 0px 15px; text-align: center;"><dl style="display: inline-block; float: left; width: 72px; height: 72px; overflow: hidden; margin: 0px 2px; text-align: center; cursor: pointer; background: rgb(255, 121, 0);"><dt style="margin: 0px; padding: 12px 0px 3px; color: rgb(255, 255, 255); font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 27px; font-family: &apos;Microsoft YaHei&apos;;">顶</dt><dd style="margin: 0px; color: rgb(255, 255, 255); font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 12px; font-family: Arial;">1</dd></dl><dl style="display: inline-block; float: left; width: 72px; height: 72px; overflow: hidden; margin: 0px 2px; text-align: center; cursor: pointer; background: rgb(255, 121, 0);"><dt style="margin: 0px; padding: 12px 0px 3px; color: rgb(255, 255, 255); font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 27px; font-family: &apos;Microsoft YaHei&apos;;">踩</dt><dd style="margin: 0px; color: rgb(255, 255, 255); font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 12px; font-family: Arial;">0</dd></dl></div><ul style="margin: 0px 0px 5px; display: block; color: rgb(102, 102, 102); font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 14px; font-family: &apos;Microsoft YaHei&apos;, Arial, Helvetica, sans-serif; clear: both; float: left; padding: 10px 0px 0px;"><li style="list-style-type: none; clear: both; padding: 0px 0px 3px; overflow: hidden;"><span style="display: block; float: left; width: 52px; padding: 0px 0px 0px 27px; height: 26px; color: rgb(255, 255, 255); font-size: 14px; margin-right: 7px; background-image: url(http://static.blog.csdn.net/skin/ink/images/blog-page-arr.png); background-color: rgb(153, 153, 153); background-position: 9px 8px; background-repeat: no-repeat;">上一篇</span><a href="http://blog.csdn.net/kevinx_xu/article/details/11832913" style="color: rgb(51, 51, 51); text-decoration: none; display: block; float: left; font-size: 14px;">Android4.1电话呼叫界面布局设计：</a></li></ul><div style="overflow: hidden;"><h4 style="margin: 0px; padding: 0px; font-size: 16px; color: rgb(51, 51, 51);">我的同类文章</h4><div style="border: 1px solid rgb(187, 187, 187); margin: 20px 0px 0px;"><div style="height: 45px; border-bottom-style: solid; border-bottom-width: 1px; border-bottom-color: rgb(220, 220, 220);"><span style="cursor: pointer;">RIL（radio interface layer）<em style="font-style: normal;">（15）</em></span></div><div style="max-height: 195px; overflow-y: auto; padding: 10px 20px; background: rgb(252, 252, 252);"><ul style="float: left; width: 322.406px; list-style: none; margin: 0px; padding: 0px;"><li><em style="font-style: normal; display: inline-block; vertical-align: middle; margin-right: 10px;">•</em><a href="http://blog.csdn.net/kevinx_xu/article/details/11846219" style="color: rgb(51, 51, 51); text-decoration: none; display: inline-block; width: 161.203px; text-overflow: ellipsis; white-space: nowrap; overflow: hidden; vertical-align: middle;" target="_blank" title="Android Phone 模块3">Android Phone 模块3</a><span style="font-size: 12px; color: rgb(187, 187, 187); display: inline-block; margin-left: 9px;">2013-09-20</span><i style="font-weight: normal; font-style: normal;">阅读</i><b style="font-weight: normal; font-style: normal; margin-left: 5px;">1640</b><em style="font-style: normal; display: inline-block; vertical-align: middle; margin-right: 10px;">•</em><a href="http://blog.csdn.net/kevinx_xu/article/details/11846137" style="color: rgb(51, 51, 51); text-decoration: none; display: inline-block; width: 161.203px; text-overflow: ellipsis; white-space: nowrap; overflow: hidden; vertical-align: middle;" target="_blank" title="Android电话来电流程源码分析">Android电话来电流程源码分析</a><span style="font-size: 12px; color: rgb(187, 187, 187); display: inline-block; margin-left: 9px;">2013-09-20</span><i style="font-weight: normal; font-style: normal;">阅读</i><b style="font-weight: normal; font-style: normal; margin-left: 5px;">8311</b><em style="font-style: normal; display: inline-block; vertical-align: middle; margin-right: 10px;">•</em><a href="http://blog.csdn.net/kevinx_xu/article/details/11832859" style="color: rgb(51, 51, 51); text-decoration: none; display: inline-block; width: 161.203px; text-overflow: ellipsis; white-space: nowrap; overflow: hidden; vertical-align: middle;" target="_blank" title="Android phone 拨号UI">Android phone 拨号UI</a><span style="font-size: 12px; color: rgb(187, 187, 187); display: inline-block; margin-left: 9px;">2013-09-19</span><i style="font-weight: normal; font-style: normal;">阅读</i><b style="font-weight: normal; font-style: normal; margin-left: 5px;">2945</b><em style="font-style: normal; display: inline-block; vertical-align: middle; margin-right: 10px;">•</em><a href="http://blog.csdn.net/kevinx_xu/article/details/11829817" style="color: rgb(51, 51, 51); text-decoration: none; display: inline-block; width: 161.203px; text-overflow: ellipsis; white-space: nowrap; overflow: hidden; vertical-align: middle;" target="_blank" title="Android 电话系统框架介绍">Android 电话系统框架介绍</a><span style="font-size: 12px; color: rgb(187, 187, 187); display: inline-block; margin-left: 9px;">2013-09-19</span><i style="font-weight: normal; font-style: normal;">阅读</i><b style="font-weight: normal; font-style: normal; margin-left: 5px;">2940</b><em style="font-style: normal; display: inline-block; vertical-align: middle; margin-right: 10px;">•</em><a href="http://blog.csdn.net/kevinx_xu/article/details/11748203" style="color: rgb(51, 51, 51); text-decoration: none; display: inline-block; width: 161.203px; text-overflow: ellipsis; white-space: nowrap; overflow: hidden; vertical-align: middle;" target="_blank" title="Android RIL与 WindowsMobile RIL">Android RIL与 WindowsMobile RIL</a><span style="font-size: 12px; color: rgb(187, 187, 187); display: inline-block; margin-left: 9px;">2013-09-16</span><i style="font-weight: normal; font-style: normal;">阅读</i><b style="font-weight: normal; font-style: normal; margin-left: 5px;">539</b></li></ul><ul style="float: right; width: 322.406px; list-style: none; margin: 0px; padding: 0px;"><li><em style="font-style: normal; display: inline-block; vertical-align: middle; margin-right: 10px;">•</em><a href="http://blog.csdn.net/kevinx_xu/article/details/11846183" style="color: rgb(51, 51, 51); text-decoration: none; display: inline-block; width: 161.203px; text-overflow: ellipsis; white-space: nowrap; overflow: hidden; vertical-align: middle;" target="_blank" title="Android Phone模块 一">Android Phone模块 一</a><span style="font-size: 12px; color: rgb(187, 187, 187); display: inline-block; margin-left: 9px;">2013-09-20</span><i style="font-weight: normal; font-style: normal;">阅读</i><b style="font-weight: normal; font-style: normal; margin-left: 5px;">4865</b><em style="font-style: normal; display: inline-block; vertical-align: middle; margin-right: 10px;">•</em><a href="http://blog.csdn.net/kevinx_xu/article/details/11832913" style="color: rgb(51, 51, 51); text-decoration: none; display: inline-block; width: 161.203px; text-overflow: ellipsis; white-space: nowrap; overflow: hidden; vertical-align: middle;" target="_blank" title="Android4.1电话呼叫界面布局设计：">Android4.1电话呼叫界面布局设计：</a><span style="font-size: 12px; color: rgb(187, 187, 187); display: inline-block; margin-left: 9px;">2013-09-19</span><i style="font-weight: normal; font-style: normal;">阅读</i><b style="font-weight: normal; font-style: normal; margin-left: 5px;">3300</b><em style="font-style: normal; display: inline-block; vertical-align: middle; margin-right: 10px;">•</em><a href="http://blog.csdn.net/kevinx_xu/article/details/11832097" style="color: rgb(51, 51, 51); text-decoration: none; display: inline-block; width: 161.203px; text-overflow: ellipsis; white-space: nowrap; overflow: hidden; vertical-align: middle;" target="_blank" title="Android Phone设计介绍">Android Phone设计介绍</a><span style="font-size: 12px; color: rgb(187, 187, 187); display: inline-block; margin-left: 9px;">2013-09-19</span><i style="font-weight: normal; font-style: normal;">阅读</i><b style="font-weight: normal; font-style: normal; margin-left: 5px;">5602</b><em style="font-style: normal; display: inline-block; vertical-align: middle; margin-right: 10px;">•</em><a href="http://blog.csdn.net/kevinx_xu/article/details/11748213" style="color: rgb(51, 51, 51); text-decoration: none; display: inline-block; width: 161.203px; text-overflow: ellipsis; white-space: nowrap; overflow: hidden; vertical-align: middle;" target="_blank" title="Android RIL的java框架">Android RIL的java框架</a><span style="font-size: 12px; color: rgb(187, 187, 187); display: inline-block; margin-left: 9px;">2013-09-16</span><i style="font-weight: normal; font-style: normal;">阅读</i><b style="font-weight: normal; font-style: normal; margin-left: 5px;">644</b></li></ul><a href="http://blog.csdn.net/kevinx_xu/article/category/1639955" style="color: rgb(102, 102, 102); text-decoration: none; clear: both; display: block; height: 35px; font-size: 12px; text-align: center; background: rgb(252, 252, 252);">更多文章</a></div></div></div></div><dl style="clear: both; overflow: hidden; margin: 0px 0px 10px; padding: 0px 20px 20px; background: rgb(245, 245, 245);"><dt style="clear: both; overflow: visible; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 16px; font-family: &apos;Microsoft YaHei&apos;; padding: 0px; height: 35px; margin: 10px 0px 15px; border-bottom-width: 2px; border-bottom-style: solid; border-bottom-color: rgb(204, 204, 204);"><span style="display: block; float: left; height: 35px; border-bottom-width: 2px; border-bottom-color: rgb(204, 0, 0); border-bottom-style: solid;">猜你在找</span></dt><dd><div style="width: 294px; float: left;"><div><dl><dd style="color: rgb(51, 102, 153); width: 291.047px; float: left; overflow: hidden; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 12px; font-family: SimSun; height: 23px; margin: 0px 30px 0px 0px; padding: 0px 0px 0px 10px; white-space: nowrap; background: url(http://static.blog.csdn.net/skin/default/images/blog-dot-red3.gif) 0px 10px no-repeat;"><a href="http://edu.csdn.net/course/detail/335" style="color: rgb(0, 0, 0); text-decoration: none;" target="_blank" title="JavaScript for Qt Quick(QML)">JavaScript for Qt Quick(QML)</a></dd><dd style="color: rgb(51, 102, 153); width: 291.047px; float: left; overflow: hidden; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 12px; font-family: SimSun; height: 23px; margin: 0px 30px 0px 0px; padding: 0px 0px 0px 10px; white-space: nowrap; background: url(http://static.blog.csdn.net/skin/default/images/blog-dot-red3.gif) 0px 10px no-repeat;"><a href="http://edu.csdn.net/course/detail/1676" style="color: rgb(0, 0, 0); text-decoration: none;" target="_blank" title="威哥全套Android开发课程【基础与UI技术】">威哥全套Android开发课程【基础与UI技术】</a></dd><dd style="color: rgb(51, 102, 153); width: 291.047px; float: left; overflow: hidden; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 12px; font-family: SimSun; height: 23px; margin: 0px 30px 0px 0px; padding: 0px 0px 0px 10px; white-space: nowrap; background: url(http://static.blog.csdn.net/skin/default/images/blog-dot-red3.gif) 0px 10px no-repeat;"><a href="http://edu.csdn.net/course/detail/1498" style="color: rgb(0, 0, 0); text-decoration: none;" target="_blank" title="Android必备的Java基础知识(三)">Android必备的Java基础知识(三)</a></dd><dd style="color: rgb(51, 102, 153); width: 291.047px; float: left; overflow: hidden; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 12px; font-family: SimSun; height: 23px; margin: 0px 30px 0px 0px; padding: 0px 0px 0px 10px; white-space: nowrap; background: url(http://static.blog.csdn.net/skin/default/images/blog-dot-red3.gif) 0px 10px no-repeat;"><a href="http://edu.csdn.net/course/detail/793" style="color: rgb(0, 0, 0); text-decoration: none;" target="_blank" title="Android开源项目实践之UI篇">Android开源项目实践之UI篇</a></dd><dd style="color: rgb(51, 102, 153); width: 291.047px; float: left; overflow: hidden; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 12px; font-family: SimSun; height: 23px; margin: 0px 30px 0px 0px; padding: 0px 0px 0px 10px; white-space: nowrap; background: url(http://static.blog.csdn.net/skin/default/images/blog-dot-red3.gif) 0px 10px no-repeat;"><a href="http://edu.csdn.net/course/detail/1644" style="color: rgb(0, 0, 0); text-decoration: none;" target="_blank" title="Android开发精品课程【Java核心知识】">Android开发精品课程【Java核心知识】</a></dd></dl></div></div></dd></dl><div style="clear: both; height: 24px; padding: 0px 10px; color: rgb(54, 46, 43); font-weight: bold; font-style: normal; font-variant: normal; font-stretch: normal; font-size: 12px; font-family: Arial; text-indent: 5px; background: url(http://static.blog.csdn.net/skin/ink/images/nav_bg.gif) 50% 0% repeat-x;">查看评论<a name="comments" style="color: rgb(106, 57, 6); text-decoration: none;"></a></div><div><dl style="margin: 2px 10px; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 12px; font-family: Arial, Helvetica, sans-serif;"><dt style="border-radius: 5px; clear: both; color: rgb(136, 136, 136); padding: 1px 4px; background: rgb(247, 235, 214);">1楼 <a href="http://blog.csdn.net/zhaojigao" style="color: rgb(106, 57, 6); text-decoration: none;" target="_blank">zhaojigao</a> 2013-10-16 15:22发表 <a href="http://blog.csdn.net/kevinx_xu/article/details/11845619#reply" style="color: rgb(106, 57, 6); text-decoration: none; overflow: hidden; display: inline-block; width: 16px; height: 16px; padding: 1px; margin-bottom: -5px; text-indent: -2000px; background-image: url(http://static.blog.csdn.net/images/ico_reply.png); background-position: 0% 0%; background-repeat: no-repeat;" title="回复">[回复]</a></dt><dd style="float: left; margin: 4px;"><a href="http://blog.csdn.net/zhaojigao" style="color: rgb(106, 57, 6); text-decoration: none;" target="_blank"><img height="40" src="http://avatar.csdn.net/3/E/7/3_zhaojigao.jpg" style="border: none; width: 40px; height: 40px;" width="40"></img></a></dd><dd style="margin-left: 50px; padding: 5px; min-height: 35px;">高手……</dd></dl></div><div><a name="commentbox" style="color: rgb(106, 57, 6); text-decoration: none;"></a><a name="reply" style="color: rgb(106, 57, 6); text-decoration: none;"></a><a name="quote" style="color: rgb(106, 57, 6); text-decoration: none;"></a><div><div style="clear: both; height: 24px; padding: 0px 10px; color: rgb(54, 46, 43); font-weight: bold; font-style: normal; font-variant: normal; font-stretch: normal; font-size: 12px; font-family: Arial; text-indent: 5px; background: url(http://static.blog.csdn.net/skin/ink/images/nav_bg.gif) 50% 0% repeat-x;">发表评论</div><ul style="clear: both; margin: 0px; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 12px; font-family: Arial, Helvetica, sans-serif;"><li style="margin: 0px; list-style-type: none; float: left; display: block; width: 80px;">用 户 名：</li><li style="margin: 0px 0px 0px 90px; list-style-type: none; display: block;">android_ruben</li></ul><ul style="clear: both; margin: 0px; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 12px; font-family: Arial, Helvetica, sans-serif;"><li style="margin: 0px; list-style-type: none; float: left; display: block; width: 80px;">评论内容：</li><li style="margin: 0px 0px 0px 90px; list-style-type: none; display: block; position: relative;"><div><a href="http://blog.csdn.net/kevinx_xu/article/details/11845619#insertcode" style="color: rgb(106, 57, 6); text-decoration: none;"><img alt="插入代码" border="0" src="http://static.blog.csdn.net/images/ubb/code.gif" style="border: none;" title="插入代码"></img></a></div></li></ul><ul style="clear: both; margin: 0px; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 12px; font-family: Arial, Helvetica, sans-serif;"><li>  </li></ul></div></div><div style="padding: 5px 0px 10px 111px; color: rgb(102, 102, 102);">* 以上用户言论只代表其个人观点，不代表CSDN网站的观点或立场<a name="reply" style="color: rgb(106, 57, 6); text-decoration: none;"></a><a name="quote" style="color: rgb(106, 57, 6); text-decoration: none;"></a></div><div style="border: 1px solid rgb(215, 203, 193); color: rgb(0, 0, 0); font-size: 12px; list-style: none outside none; margin: 10px 14.7969px 0px 7.39063px; padding: 1px; background: none 0px 0px repeat scroll rgb(255, 255, 255);"><h5 style="color: rgb(71, 56, 28); font-size: 12px; height: 24px; padding: 0px 5px; margin: 0px; background: none 0px 0px repeat scroll rgb(224, 219, 211);"><a href="http://www.csdn.net/tag/" style="color: rgb(71, 56, 28); text-decoration: none;" target="_blank">核心技术类目</a></h5><div style="margin: 10px 0px; padding: 4px 12px 8px;"><a href="http://www.csdn.net/tag" style="color: rgb(106, 57, 6); text-decoration: none; margin-right: 20px; white-space: nowrap;" target="_blank" title="全部主题">全部主题</a> <a href="http://g.csdn.net/5272865" style="color: rgb(106, 57, 6); text-decoration: none; margin-right: 20px; white-space: nowrap;" target="_blank" title="Hadoop">Hadoop</a> <a href="http://g.csdn.net/5272866" style="color: rgb(106, 57, 6); text-decoration: none; margin-right: 20px; white-space: nowrap;" target="_blank" title="AWS">AWS</a> <a href="http://g.csdn.net/5272870" style="color: rgb(106, 57, 6); text-decoration: none; margin-right: 20px; white-space: nowrap;" target="_blank" title="移动游戏">移动游戏</a> <a href="http://g.csdn.net/5272871" style="color: rgb(106, 57, 6); text-decoration: none; margin-right: 20px; white-space: nowrap;" target="_blank" title="Java">Java</a> <a href="http://g.csdn.net/5272872" style="color: rgb(106, 57, 6); text-decoration: none; margin-right: 20px; white-space: nowrap;" target="_blank" title="Android">Android</a> <a href="http://g.csdn.net/5272873" style="color: rgb(106, 57, 6); text-decoration: none; margin-right: 20px; white-space: nowrap;" target="_blank" title="iOS">iOS</a> <a href="http://g.csdn.net/5272868" style="color: rgb(106, 57, 6); text-decoration: none; margin-right: 20px; white-space: nowrap;" target="_blank" title="Swift">Swift</a> <a href="http://g.csdn.net/5272869" style="color: rgb(106, 57, 6); text-decoration: none; margin-right: 20px; white-space: nowrap;" target="_blank" title="智能硬件">智能硬件</a> <a href="http://g.csdn.net/5272867" style="color: rgb(106, 57, 6); text-decoration: none; margin-right: 20px; white-space: nowrap;" target="_blank" title="Docker">Docker</a> <a href="http://g.csdn.net/5272925" style="color: rgb(106, 57, 6); text-decoration: none; margin-right: 20px; white-space: nowrap;" target="_blank" title="OpenStack">OpenStack</a><a href="http://www.csdn.net/tag/vpn" style="color: rgb(106, 57, 6); text-decoration: none; margin-right: 20px; white-space: nowrap;" target="_blank" title="VPN">VPN</a> <a href="http://g.csdn.net/5272924" style="color: rgb(106, 57, 6); text-decoration: none; margin-right: 20px; white-space: nowrap;" target="_blank" title="Spark">Spark</a> <a href="http://www.csdn.net/tag/erp" style="color: rgb(106, 57, 6); text-decoration: none; margin-right: 20px; white-space: nowrap;" target="_blank" title="ERP">ERP</a> <a href="http://www.csdn.net/tag/ie10" style="color: rgb(106, 57, 6); text-decoration: none; margin-right: 20px; white-space: nowrap;" target="_blank" title="IE10">IE10</a> <a href="http://www.csdn.net/tag/eclipse" style="color: rgb(106, 57, 6); text-decoration: none; margin-right: 20px; white-space: nowrap;" target="_blank" title="Eclipse">Eclipse</a> <a href="http://www.csdn.net/tag/crm" style="color: rgb(106, 57, 6); text-decoration: none; margin-right: 20px; white-space: nowrap;" target="_blank" title="CRM">CRM</a> <a href="http://www.csdn.net/tag/javascript" style="color: rgb(106, 57, 6); text-decoration: none; margin-right: 20px; white-space: nowrap;" target="_blank" title="JavaScript">JavaScript</a> <a href="http://www.csdn.net/tag/%E6%95%B0%E6%8D%AE%E5%BA%93" style="color: rgb(106, 57, 6); text-decoration: none; margin-right: 20px; white-space: nowrap;" target="_blank" title="数据库">数据库</a> <a href="http://www.csdn.net/tag/ubuntu" style="color: rgb(106, 57, 6); text-decoration: none; margin-right: 20px; white-space: nowrap;" target="_blank" title="Ubuntu">Ubuntu</a> <a href="http://www.csdn.net/tag/nfc" style="color: rgb(106, 57, 6); text-decoration: none; margin-right: 20px; white-space: nowrap;" target="_blank" title="NFC">NFC</a> <a href="http://www.csdn.net/tag/wap" style="color: rgb(106, 57, 6); text-decoration: none; margin-right: 20px; white-space: nowrap;" target="_blank" title="WAP">WAP</a> <a href="http://www.csdn.net/tag/jquery" style="color: rgb(106, 57, 6); text-decoration: none; margin-right: 20px; white-space: nowrap;" target="_blank" title="jQuery">jQuery</a><a href="http://www.csdn.net/tag/bi" style="color: rgb(106, 57, 6); text-decoration: none; margin-right: 20px; white-space: nowrap;" target="_blank" title="BI">BI</a> <a href="http://www.csdn.net/tag/html5" style="color: rgb(106, 57, 6); text-decoration: none; margin-right: 20px; white-space: nowrap;" target="_blank" title="HTML5">HTML5</a> <a href="http://www.csdn.net/tag/spring" style="color: rgb(106, 57, 6); text-decoration: none; margin-right: 20px; white-space: nowrap;" target="_blank" title="Spring">Spring</a> <a href="http://www.csdn.net/tag/apache" style="color: rgb(106, 57, 6); text-decoration: none; margin-right: 20px; white-space: nowrap;" target="_blank" title="Apache">Apache</a> <a href="http://www.csdn.net/tag/.net" style="color: rgb(106, 57, 6); text-decoration: none; margin-right: 20px; white-space: nowrap;" target="_blank" title=".NET">.NET</a> <a href="http://www.csdn.net/tag/api" style="color: rgb(106, 57, 6); text-decoration: none; margin-right: 20px; white-space: nowrap;" target="_blank" title="API">API</a> <a href="http://www.csdn.net/tag/html" style="color: rgb(106, 57, 6); text-decoration: none; margin-right: 20px; white-space: nowrap;" target="_blank" title="HTML">HTML</a> <a href="http://www.csdn.net/tag/sdk" style="color: rgb(106, 57, 6); text-decoration: none; margin-right: 20px; white-space: nowrap;" target="_blank" title="SDK">SDK</a> <a href="http://www.csdn.net/tag/iis" style="color: rgb(106, 57, 6); text-decoration: none; margin-right: 20px; white-space: nowrap;" target="_blank" title="IIS">IIS</a> <a href="http://www.csdn.net/tag/fedora" style="color: rgb(106, 57, 6); text-decoration: none; margin-right: 20px; white-space: nowrap;" target="_blank" title="Fedora">Fedora</a> <a href="http://www.csdn.net/tag/xml" style="color: rgb(106, 57, 6); text-decoration: none; margin-right: 20px; white-space: nowrap;" target="_blank" title="XML">XML</a> <a href="http://www.csdn.net/tag/lbs" style="color: rgb(106, 57, 6); text-decoration: none; margin-right: 20px; white-space: nowrap;" target="_blank" title="LBS">LBS</a> <a href="http://www.csdn.net/tag/unity" style="color: rgb(106, 57, 6); text-decoration: none; margin-right: 20px; white-space: nowrap;" target="_blank" title="Unity">Unity</a><a href="http://www.csdn.net/tag/splashtop" style="color: rgb(106, 57, 6); text-decoration: none; margin-right: 20px; white-space: nowrap;" target="_blank" title="Splashtop">Splashtop</a> <a href="http://www.csdn.net/tag/uml" style="color: rgb(106, 57, 6); text-decoration: none; margin-right: 20px; white-space: nowrap;" target="_blank" title="UML">UML</a> <a href="http://www.csdn.net/tag/components" style="color: rgb(106, 57, 6); text-decoration: none; margin-right: 20px; white-space: nowrap;" target="_blank" title="components">components</a> <a href="http://www.csdn.net/tag/windowsmobile" style="color: rgb(106, 57, 6); text-decoration: none; margin-right: 20px; white-space: nowrap;" target="_blank" title="Windows Mobile">Windows Mobile</a> <a href="http://www.csdn.net/tag/rails" style="color: rgb(106, 57, 6); text-decoration: none; margin-right: 20px; white-space: nowrap;" target="_blank" title="Rails">Rails</a> <a href="http://www.csdn.net/tag/qemu" style="color: rgb(106, 57, 6); text-decoration: none; margin-right: 20px; white-space: nowrap;" target="_blank" title="QEMU">QEMU</a> <a href="http://www.csdn.net/tag/kde" style="color: rgb(106, 57, 6); text-decoration: none; margin-right: 20px; white-space: nowrap;" target="_blank" title="KDE">KDE</a> <a href="http://www.csdn.net/tag/cassandra" style="color: rgb(106, 57, 6); text-decoration: none; margin-right: 20px; white-space: nowrap;" target="_blank" title="Cassandra">Cassandra</a> <a href="http://www.csdn.net/tag/cloudstack" style="color: rgb(106, 57, 6); text-decoration: none; margin-right: 20px; white-space: nowrap;" target="_blank" title="CloudStack">CloudStack</a><a href="http://www.csdn.net/tag/ftc" style="color: rgb(106, 57, 6); text-decoration: none; margin-right: 20px; white-space: nowrap;" target="_blank" title="FTC">FTC</a> <a href="http://www.csdn.net/tag/coremail" style="color: rgb(106, 57, 6); text-decoration: none; margin-right: 20px; white-space: nowrap;" target="_blank" title="coremail">coremail</a> <a href="http://www.csdn.net/tag/ophone" style="color: rgb(106, 57, 6); text-decoration: none; margin-right: 20px; white-space: nowrap;" target="_blank" title="OPhone">OPhone </a><a href="http://www.csdn.net/tag/couchbase" style="color: rgb(106, 57, 6); text-decoration: none; margin-right: 20px; white-space: nowrap;" target="_blank" title="CouchBase">CouchBase</a> <a href="http://www.csdn.net/tag/%E4%BA%91%E8%AE%A1%E7%AE%97" style="color: rgb(106, 57, 6); text-decoration: none; margin-right: 20px; white-space: nowrap;" target="_blank" title="云计算">云计算</a> <a href="http://www.csdn.net/tag/iOS6" style="color: rgb(106, 57, 6); text-decoration: none; margin-right: 20px; white-space: nowrap;" target="_blank" title="iOS6">iOS6</a> <a href="http://www.csdn.net/tag/rackspace" style="color: rgb(106, 57, 6); text-decoration: none; margin-right: 20px; white-space: nowrap;" target="_blank" title="Rackspace">Rackspace </a><a href="http://www.csdn.net/tag/webapp" style="color: rgb(106, 57, 6); text-decoration: none; margin-right: 20px; white-space: nowrap;" target="_blank" title="Web App">Web App</a> <a href="http://www.csdn.net/tag/springside" style="color: rgb(106, 57, 6); text-decoration: none; margin-right: 20px; white-space: nowrap;" target="_blank" title="SpringSide">SpringSide</a> <a href="http://www.csdn.net/tag/maemo" style="color: rgb(106, 57, 6); text-decoration: none; margin-right: 20px; white-space: nowrap;" target="_blank" title="Maemo">Maemo</a><a href="http://www.csdn.net/tag/compuware" style="color: rgb(106, 57, 6); text-decoration: none; margin-right: 20px; white-space: nowrap;" target="_blank" title="Compuware">Compuware</a> <a href="http://www.csdn.net/tag/%E5%A4%A7%E6%95%B0%E6%8D%AE" style="color: rgb(106, 57, 6); text-decoration: none; margin-right: 20px; white-space: nowrap;" target="_blank" title="大数据">大数据</a> <a href="http://www.csdn.net/tag/aptech" style="color: rgb(106, 57, 6); text-decoration: none; margin-right: 20px; white-space: nowrap;" target="_blank" title="aptech">aptech</a> <a href="http://www.csdn.net/tag/perl" style="color: rgb(106, 57, 6); text-decoration: none; margin-right: 20px; white-space: nowrap;" target="_blank" title="Perl">Perl</a> <a href="http://www.csdn.net/tag/tornado" style="color: rgb(106, 57, 6); text-decoration: none; margin-right: 20px; white-space: nowrap;" target="_blank" title="Tornado">Tornado</a> <a href="http://www.csdn.net/tag/ruby" style="color: rgb(106, 57, 6); text-decoration: none; margin-right: 20px; white-space: nowrap;" target="_blank" title="Ruby">Ruby</a> <a href="http://www.csdn.net/hibernate" style="color: rgb(106, 57, 6); text-decoration: none; margin-right: 20px; white-space: nowrap;" target="_blank" title="Hibernate">Hibernate</a> <a href="http://www.csdn.net/tag/thinkphp" style="color: rgb(106, 57, 6); text-decoration: none; margin-right: 20px; white-space: nowrap;" target="_blank" title="ThinkPHP">ThinkPHP</a> <a href="http://www.csdn.net/tag/hbase" style="color: rgb(106, 57, 6); text-decoration: none; margin-right: 20px; white-space: nowrap;" target="_blank" title="HBase">HBase</a> <a href="http://www.csdn.net/tag/pure" style="color: rgb(106, 57, 6); text-decoration: none; margin-right: 20px; white-space: nowrap;" target="_blank" title="Pure">Pure</a> <a href="http://www.csdn.net/tag/solr" style="color: rgb(106, 57, 6); text-decoration: none; margin-right: 20px; white-space: nowrap;" target="_blank" title="Solr">Solr</a><a href="http://www.csdn.net/tag/angular" style="color: rgb(106, 57, 6); text-decoration: none; margin-right: 20px; white-space: nowrap;" target="_blank" title="Angular">Angular</a> <a href="http://www.csdn.net/tag/cloudfoundry" style="color: rgb(106, 57, 6); text-decoration: none; margin-right: 20px; white-space: nowrap;" target="_blank" title="Cloud Foundry">Cloud Foundry</a> <a href="http://www.csdn.net/tag/redis" style="color: rgb(106, 57, 6); text-decoration: none; margin-right: 20px; white-space: nowrap;" target="_blank" title="Redis">Redis</a> <a href="http://www.csdn.net/tag/scala" style="color: rgb(106, 57, 6); text-decoration: none; margin-right: 20px; white-space: nowrap;" target="_blank" title="Scala">Scala</a> <a href="http://www.csdn.net/tag/django" style="color: rgb(106, 57, 6); text-decoration: none; margin-right: 20px; white-space: nowrap;" target="_blank" title="Django">Django</a> <a href="http://www.csdn.net/tag/bootstrap" style="color: rgb(106, 57, 6); text-decoration: none; margin-right: 20px; white-space: nowrap;" target="_blank" title="Bootstrap">Bootstrap</a></div></div></div></div><div style="float: left; width: 200px; overflow: hidden;"><div style="padding: 1px; border: 1px solid rgb(221, 221, 221); margin: 0px 0px 10px; background: rgb(255, 255, 255);"><ul style="clear: both; height: 24px; padding: 0px; color: rgb(54, 46, 43); font-weight: bold; font-style: normal; font-variant: normal; font-stretch: normal; font-size: 12px; font-family: Arial; text-indent: 5px; margin: 0px; background: url(http://static.blog.csdn.net/skin/ink/images/nav_bg.gif) 50% 0% repeat-x;"><li><span style="color: rgb(51, 51, 51);">个人资料</span></li></ul><ul style="margin: 0px; padding: 3px 10px 10px 12px;"><li style="margin: 0px 0px 5px; padding: 10px; text-align: center;"><a href="http://my.csdn.net/kevinx_xu" style="color: rgb(51, 51, 51); text-decoration: none;" target="_blank"><img src="Android电话拨打流程源码分析_files/Image.jpg" type="image/jpeg" style="border: 1px solid rgb(221, 221, 221); max-width: 90%; padding: 2px;" title="访问我的空间"/> </a><br/><span style="color: rgb(51, 51, 51); display: block; font-weight: bold; text-align: center;"><a href="http://my.csdn.net/kevinx_xu" style="color: rgb(51, 51, 51); text-decoration: none;" target="_blank">小K仔</a></span></li><li style="padding: 0px 0px 15px; text-align: center;"><a style="color: rgb(106, 57, 6); text-decoration: none; display: inline-block; width: 59px; height: 20px; overflow: hidden; cursor: pointer; background: url(http://static.blog.csdn.net/images/btn_attent.gif) 0px 0px no-repeat;" title="[加关注]"></a> <a style="color: rgb(106, 57, 6); text-decoration: none; display: inline-block; width: 59px; height: 20px; overflow: hidden; cursor: pointer; margin: 0px 10px 0px 0px; background: url(http://static.blog.csdn.net/images/btn_sendletter.gif) 0px 0px no-repeat;" title="[发私信]"></a></li><li style="text-align: center;"><div style="display: block; margin-top: 4px; padding: 14px 4px 4px 0px; border-top-style: dashed; border-top-width: 1px; border-top-color: rgb(204, 204, 204); text-align: left;"><a style="color: rgb(106, 57, 6); text-decoration: none;" target="_blank"><img alt="1" src="http://c.csdnimg.cn/jifen/images/xunzhang/xunzhang/chizhiyiheng.png" style="border: none; margin-left: 6px; cursor: pointer;"></img></a></div></li><li style="list-style: none; display: inline"><ul style="margin: 0px; padding: 0px 0px 5px; display: block; background: url(http://static.blog.csdn.net/skin/ink/images/line_1.gif) 50% 100% repeat-x;"><li>访问：<span style="padding-left: 6px; position: relative; color: rgb(51, 51, 51);">413396次</span>积分：<span style="padding-left: 6px; position: relative; color: rgb(51, 51, 51);">4970</span>等级： <span style="padding-left: 6px; position: relative; color: rgb(51, 51, 51); display: inline-block; z-index: 1;"><img src="http://c.csdnimg.cn/jifen/images/xunzhang/jianzhang/blog5.png" style="border: none; vertical-align: middle;"></img></span>排名：<span style="padding-left: 6px; position: relative; color: rgb(51, 51, 51);">第3288名</span></li></ul><ul style="margin: 10px 10px 0px; padding: 0px; display: block;"><li>原创：<span style="padding-left: 6px; position: relative; color: rgb(51, 51, 51);">52篇</span>转载：<span style="padding-left: 6px; position: relative; color: rgb(51, 51, 51);">311篇</span>译文：<span style="padding-left: 6px; position: relative; color: rgb(51, 51, 51);">0篇</span>评论：<span style="padding-left: 6px; position: relative; color: rgb(51, 51, 51);">38条</span></li></ul></li></ul></div><div style="padding: 1px; border: 1px solid rgb(224, 198, 166); margin: 10px 0px 0px; background: rgb(255, 255, 255);"><ul style="clear: both; height: 24px; padding: 0px; color: rgb(54, 46, 43); font-weight: bold; font-style: normal; font-variant: normal; font-stretch: normal; font-size: 12px; font-family: Arial; text-indent: 5px; margin: 0px; background: url(http://static.blog.csdn.net/skin/ink/images/nav_bg.gif) 50% 0% repeat-x;"><li>文章搜索</li></ul><ul style="margin: 0px; padding: 3px 10px 10px 12px;"><li><a style="color: rgb(106, 57, 6); text-decoration: none;" target="_blank"></a></li></ul></div><div style="padding: 1px; border: 1px solid rgb(221, 221, 221); margin: 10px 0px 0px; border-radius: 5px; background: rgb(255, 255, 255);"><ul style="clear: both; height: 24px; padding: 0px; color: rgb(54, 46, 43); font-weight: bold; font-style: normal; font-variant: normal; font-stretch: normal; font-size: 12px; font-family: Arial; text-indent: 5px; margin: 0px; background: url(http://static.blog.csdn.net/skin/ink/images/nav_bg.gif) 50% 0% repeat-x;"><li>文章分类</li></ul><ul style="margin: 0px; padding: 3px 10px 10px 12px;"><li><a href="http://blog.csdn.net/kevinx_xu/article/category/1321915" style="color: rgb(106, 57, 6); text-decoration: none;">电池</a><span style="padding-left: 6px; position: relative;">(1)</span><a href="http://blog.csdn.net/kevinx_xu/article/category/1321917" style="color: rgb(106, 57, 6); text-decoration: none;">LCD</a><span style="padding-left: 6px; position: relative;">(11)</span><a href="http://blog.csdn.net/kevinx_xu/article/category/1321919" style="color: rgb(106, 57, 6); text-decoration: none;">Android</a><span style="padding-left: 6px; position: relative;">(30)</span><a href="http://blog.csdn.net/kevinx_xu/article/category/1321921" style="color: rgb(106, 57, 6); text-decoration: none;">camera 驱动</a><span style="padding-left: 6px; position: relative;">(5)</span><a href="http://blog.csdn.net/kevinx_xu/article/category/1321922" style="color: rgb(106, 57, 6); text-decoration: none;">c++</a><span style="padding-left: 6px; position: relative;">(9)</span><a href="http://blog.csdn.net/kevinx_xu/article/category/1321923" style="color: rgb(106, 57, 6); text-decoration: none;">C</a><span style="padding-left: 6px; position: relative;">(2)</span><a href="http://blog.csdn.net/kevinx_xu/article/category/1321924" style="color: rgb(106, 57, 6); text-decoration: none;">input</a><span style="padding-left: 6px; position: relative;">(3)</span><a href="http://blog.csdn.net/kevinx_xu/article/category/1321925" style="color: rgb(106, 57, 6); text-decoration: none;">G—sensor</a><span style="padding-left: 6px; position: relative;">(1)</span><a href="http://blog.csdn.net/kevinx_xu/article/category/1321929" style="color: rgb(106, 57, 6); text-decoration: none;">linux 环境编程</a><span style="padding-left: 6px; position: relative;">(4)</span><a href="http://blog.csdn.net/kevinx_xu/article/category/1321930" style="color: rgb(106, 57, 6); text-decoration: none;">linux 内核</a><span style="padding-left: 6px; position: relative;">(4)</span><a href="http://blog.csdn.net/kevinx_xu/article/category/1321931" style="color: rgb(106, 57, 6); text-decoration: none;">编译技巧</a><span style="padding-left: 6px; position: relative;">(1)</span><a href="http://blog.csdn.net/kevinx_xu/article/category/1321934" style="color: rgb(106, 57, 6); text-decoration: none;">VM</a><span style="padding-left: 6px; position: relative;">(1)</span><a href="http://blog.csdn.net/kevinx_xu/article/category/1323982" style="color: rgb(106, 57, 6); text-decoration: none;">Android 休眠与唤醒</a><span style="padding-left: 6px; position: relative;">(2)</span><a href="http://blog.csdn.net/kevinx_xu/article/category/1326346" style="color: rgb(106, 57, 6); text-decoration: none;">sound</a><span style="padding-left: 6px; position: relative;">(3)</span><a href="http://blog.csdn.net/kevinx_xu/article/category/1326347" style="color: rgb(106, 57, 6); text-decoration: none;">i2s</a><span style="padding-left: 6px; position: relative;">(2)</span><a href="http://blog.csdn.net/kevinx_xu/article/category/1326439" style="color: rgb(106, 57, 6); text-decoration: none;">shell</a><span style="padding-left: 6px; position: relative;">(5)</span><a href="http://blog.csdn.net/kevinx_xu/article/category/1327251" style="color: rgb(106, 57, 6); text-decoration: none;">ALSA_sound</a><span style="padding-left: 6px; position: relative;">(29)</span><a href="http://blog.csdn.net/kevinx_xu/article/category/1336536" style="color: rgb(106, 57, 6); text-decoration: none;">device</a><span style="padding-left: 6px; position: relative;">(1)</span><a href="http://blog.csdn.net/kevinx_xu/article/category/1346528" style="color: rgb(106, 57, 6); text-decoration: none;">android recovery 升级</a><span style="padding-left: 6px; position: relative;">(11)</span><a href="http://blog.csdn.net/kevinx_xu/article/category/1347226" style="color: rgb(106, 57, 6); text-decoration: none;">android mtd-utils使用</a><span style="padding-left: 6px; position: relative;">(1)</span><a href="http://blog.csdn.net/kevinx_xu/article/category/1360163" style="color: rgb(106, 57, 6); text-decoration: none;">VFS 虚拟文件系统</a><span style="padding-left: 6px; position: relative;">(1)</span><a href="http://blog.csdn.net/kevinx_xu/article/category/1365660" style="color: rgb(106, 57, 6); text-decoration: none;">wifi</a><span style="padding-left: 6px; position: relative;">(10)</span><a href="http://blog.csdn.net/kevinx_xu/article/category/1375127" style="color: rgb(106, 57, 6); text-decoration: none;">ALSA_utils</a><span style="padding-left: 6px; position: relative;">(1)</span><a href="http://blog.csdn.net/kevinx_xu/article/category/1376194" style="color: rgb(106, 57, 6); text-decoration: none;">DAMP</a><span style="padding-left: 6px; position: relative;">(5)</span><a href="http://blog.csdn.net/kevinx_xu/article/category/1376942" style="color: rgb(106, 57, 6); text-decoration: none;">DAPM</a><span style="padding-left: 6px; position: relative;">(1)</span><a href="http://blog.csdn.net/kevinx_xu/article/category/1378449" style="color: rgb(106, 57, 6); text-decoration: none;">3G</a><span style="padding-left: 6px; position: relative;">(2)</span><a href="http://blog.csdn.net/kevinx_xu/article/category/1381670" style="color: rgb(106, 57, 6); text-decoration: none;">bluetooth</a><span style="padding-left: 6px; position: relative;">(4)</span><a href="http://blog.csdn.net/kevinx_xu/article/category/1381706" style="color: rgb(106, 57, 6); text-decoration: none;">GPS</a><span style="padding-left: 6px; position: relative;">(1)</span><a href="http://blog.csdn.net/kevinx_xu/article/category/1398357" style="color: rgb(106, 57, 6); text-decoration: none;">git</a><span style="padding-left: 6px; position: relative;">(9)</span><a href="http://blog.csdn.net/kevinx_xu/article/category/1408921" style="color: rgb(106, 57, 6); text-decoration: none;">python</a><span style="padding-left: 6px; position: relative;">(14)</span><a href="http://blog.csdn.net/kevinx_xu/article/category/1408954" style="color: rgb(106, 57, 6); text-decoration: none;">mantis</a><span style="padding-left: 6px; position: relative;">(2)</span><a href="http://blog.csdn.net/kevinx_xu/article/category/1445731" style="color: rgb(106, 57, 6); text-decoration: none;">nand flash</a><span style="padding-left: 6px; position: relative;">(2)</span><a href="http://blog.csdn.net/kevinx_xu/article/category/1452897" style="color: rgb(106, 57, 6); text-decoration: none;">Qt学习</a><span style="padding-left: 6px; position: relative;">(2)</span><a href="http://blog.csdn.net/kevinx_xu/article/category/1510693" style="color: rgb(106, 57, 6); text-decoration: none;">TVBOx OTT 区别</a><span style="padding-left: 6px; position: relative;">(1)</span><a href="http://blog.csdn.net/kevinx_xu/article/category/1561029" style="color: rgb(106, 57, 6); text-decoration: none;">Android_java</a><span style="padding-left: 6px; position: relative;">(2)</span><a href="http://blog.csdn.net/kevinx_xu/article/category/1566173" style="color: rgb(106, 57, 6); text-decoration: none;">UART</a><span style="padding-left: 6px; position: relative;">(4)</span><a href="http://blog.csdn.net/kevinx_xu/article/category/1639955" style="color: rgb(106, 57, 6); text-decoration: none;">RIL（radio interface layer）</a><span style="padding-left: 6px; position: relative;">(16)</span><a href="http://blog.csdn.net/kevinx_xu/article/category/1677313" style="color: rgb(106, 57, 6); text-decoration: none;">KVM</a><span style="padding-left: 6px; position: relative;">(1)</span><a href="http://blog.csdn.net/kevinx_xu/article/category/1677315" style="color: rgb(106, 57, 6); text-decoration: none;">bridge</a><span style="padding-left: 6px; position: relative;">(1)</span><a href="http://blog.csdn.net/kevinx_xu/article/category/1700791" style="color: rgb(106, 57, 6); text-decoration: none;">Android—apk</a><span style="padding-left: 6px; position: relative;">(2)</span><a href="http://blog.csdn.net/kevinx_xu/article/category/1700883" style="color: rgb(106, 57, 6); text-decoration: none;">tinymix</a><span style="padding-left: 6px; position: relative;">(1)</span><a href="http://blog.csdn.net/kevinx_xu/article/category/1700905" style="color: rgb(106, 57, 6); text-decoration: none;">audio</a><span style="padding-left: 6px; position: relative;">(1)</span><a href="http://blog.csdn.net/kevinx_xu/article/category/1702081" style="color: rgb(106, 57, 6); text-decoration: none;">APKDEC</a><span style="padding-left: 6px; position: relative;">(2)</span><a href="http://blog.csdn.net/kevinx_xu/article/category/1704865" style="color: rgb(106, 57, 6); text-decoration: none;">SDK 环境搭建</a><span style="padding-left: 6px; position: relative;">(2)</span><a href="http://blog.csdn.net/kevinx_xu/article/category/1706283" style="color: rgb(106, 57, 6); text-decoration: none;">vim 技巧</a><span style="padding-left: 6px; position: relative;">(2)</span><a href="http://blog.csdn.net/kevinx_xu/article/category/1709905" style="color: rgb(106, 57, 6); text-decoration: none;">Eclipse</a><span style="padding-left: 6px; position: relative;">(1)</span><a href="http://blog.csdn.net/kevinx_xu/article/category/1714231" style="color: rgb(106, 57, 6); text-decoration: none;">android input</a><span style="padding-left: 6px; position: relative;">(1)</span><a href="http://blog.csdn.net/kevinx_xu/article/category/1716105" style="color: rgb(106, 57, 6); text-decoration: none;">Android增加物理按键</a><span style="padding-left: 6px; position: relative;">(3)</span><a href="http://blog.csdn.net/kevinx_xu/article/category/1716969" style="color: rgb(106, 57, 6); text-decoration: none;">android webkit</a><span style="padding-left: 6px; position: relative;">(1)</span><a href="http://blog.csdn.net/kevinx_xu/article/category/1720395" style="color: rgb(106, 57, 6); text-decoration: none;">NFC</a><span style="padding-left: 6px; position: relative;">(2)</span><a href="http://blog.csdn.net/kevinx_xu/article/category/1720431" style="color: rgb(106, 57, 6); text-decoration: none;">bootload</a><span style="padding-left: 6px; position: relative;">(0)</span><a href="http://blog.csdn.net/kevinx_xu/article/category/1720433" style="color: rgb(106, 57, 6); text-decoration: none;">bootloader__TAGLIST</a><span style="padding-left: 6px; position: relative;">(1)</span><a href="http://blog.csdn.net/kevinx_xu/article/category/1720659" style="color: rgb(106, 57, 6); text-decoration: none;">android Input touch</a><span style="padding-left: 6px; position: relative;">(2)</span><a href="http://blog.csdn.net/kevinx_xu/article/category/1721355" style="color: rgb(106, 57, 6); text-decoration: none;">APK启动第三方APK</a><span style="padding-left: 6px; position: relative;">(1)</span><a href="http://blog.csdn.net/kevinx_xu/article/category/1721413" style="color: rgb(106, 57, 6); text-decoration: none;">android prop</a><span style="padding-left: 6px; position: relative;">(2)</span><a href="http://blog.csdn.net/kevinx_xu/article/category/1721625" style="color: rgb(106, 57, 6); text-decoration: none;">Android Intent</a><span style="padding-left: 6px; position: relative;">(1)</span><a href="http://blog.csdn.net/kevinx_xu/article/category/1733229" style="color: rgb(106, 57, 6); text-decoration: none;">Android permission</a><span style="padding-left: 6px; position: relative;">(1)</span><a href="http://blog.csdn.net/kevinx_xu/article/category/1736565" style="color: rgb(106, 57, 6); text-decoration: none;">SQL</a><span style="padding-left: 6px; position: relative;">(2)</span><a href="http://blog.csdn.net/kevinx_xu/article/category/1754895" style="color: rgb(106, 57, 6); text-decoration: none;">Java JNI</a><span style="padding-left: 6px; position: relative;">(1)</span><a href="http://blog.csdn.net/kevinx_xu/article/category/1759619" style="color: rgb(106, 57, 6); text-decoration: none;">Android 异步处理机制</a><span style="padding-left: 6px; position: relative;">(4)</span><a href="http://blog.csdn.net/kevinx_xu/article/category/1759883" style="color: rgb(106, 57, 6); text-decoration: none;">java</a><span style="padding-left: 6px; position: relative;">(2)</span><a href="http://blog.csdn.net/kevinx_xu/article/category/1760003" style="color: rgb(106, 57, 6); text-decoration: none;">java int string char 转换</a><span style="padding-left: 6px; position: relative;">(1)</span><a href="http://blog.csdn.net/kevinx_xu/article/category/1765423" style="color: rgb(106, 57, 6); text-decoration: none;">linux gpio to i2c</a><span style="padding-left: 6px; position: relative;">(3)</span><a href="http://blog.csdn.net/kevinx_xu/article/category/1768759" style="color: rgb(106, 57, 6); text-decoration: none;">linux delay</a><span style="padding-left: 6px; position: relative;">(1)</span><a href="http://blog.csdn.net/kevinx_xu/article/category/1790481" style="color: rgb(106, 57, 6); text-decoration: none;">intent</a><span style="padding-left: 6px; position: relative;">(1)</span><a href="http://blog.csdn.net/kevinx_xu/article/category/1800369" style="color: rgb(106, 57, 6); text-decoration: none;">android thread</a><span style="padding-left: 6px; position: relative;">(1)</span><a href="http://blog.csdn.net/kevinx_xu/article/category/1833693" style="color: rgb(106, 57, 6); text-decoration: none;">压缩</a><span style="padding-left: 6px; position: relative;">(1)</span><a href="http://blog.csdn.net/kevinx_xu/article/category/1935483" style="color: rgb(106, 57, 6); text-decoration: none;">binder</a><span style="padding-left: 6px; position: relative;">(8)</span><a href="http://blog.csdn.net/kevinx_xu/article/category/1937349" style="color: rgb(106, 57, 6); text-decoration: none;">kernel</a><span style="padding-left: 6px; position: relative;">(1)</span><a href="http://blog.csdn.net/kevinx_xu/article/category/1999963" style="color: rgb(106, 57, 6); text-decoration: none;">intput</a><span style="padding-left: 6px; position: relative;">(0)</span><a href="http://blog.csdn.net/kevinx_xu/article/category/2017629" style="color: rgb(106, 57, 6); text-decoration: none;">Event</a><span style="padding-left: 6px; position: relative;">(3)</span><a href="http://blog.csdn.net/kevinx_xu/article/category/2017735" style="color: rgb(106, 57, 6); text-decoration: none;">Android 图片缓存技术</a><span style="padding-left: 6px; position: relative;">(3)</span><a href="http://blog.csdn.net/kevinx_xu/article/category/2017989" style="color: rgb(106, 57, 6); text-decoration: none;">LINUX ACK-gerp</a><span style="padding-left: 6px; position: relative;">(1)</span><a href="http://blog.csdn.net/kevinx_xu/article/category/2095691" style="color: rgb(106, 57, 6); text-decoration: none;">makefile</a><span style="padding-left: 6px; position: relative;">(1)</span><a href="http://blog.csdn.net/kevinx_xu/article/category/2119327" style="color: rgb(106, 57, 6); text-decoration: none;">USB MTP</a><span style="padding-left: 6px; position: relative;">(1)</span><a href="http://blog.csdn.net/kevinx_xu/article/category/2119331" style="color: rgb(106, 57, 6); text-decoration: none;">ramdisk.img</a><span style="padding-left: 6px; position: relative;">(1)</span><a href="http://blog.csdn.net/kevinx_xu/article/category/2120001" style="color: rgb(106, 57, 6); text-decoration: none;">mysql</a><span style="padding-left: 6px; position: relative;">(10)</span><a href="http://blog.csdn.net/kevinx_xu/article/category/2120007" style="color: rgb(106, 57, 6); text-decoration: none;">LruCache</a><span style="padding-left: 6px; position: relative;">(1)</span><a href="http://blog.csdn.net/kevinx_xu/article/category/2130243" style="color: rgb(106, 57, 6); text-decoration: none;">hdmi</a><span style="padding-left: 6px; position: relative;">(2)</span><a href="http://blog.csdn.net/kevinx_xu/article/category/2130569" style="color: rgb(106, 57, 6); text-decoration: none;">Android view</a><span style="padding-left: 6px; position: relative;">(1)</span><a href="http://blog.csdn.net/kevinx_xu/article/category/2165739" style="color: rgb(106, 57, 6); text-decoration: none;">接口介绍</a><span style="padding-left: 6px; position: relative;">(3)</span><a href="http://blog.csdn.net/kevinx_xu/article/category/2179581" style="color: rgb(106, 57, 6); text-decoration: none;">hardware</a><span style="padding-left: 6px; position: relative;">(1)</span><a href="http://blog.csdn.net/kevinx_xu/article/category/2180119" style="color: rgb(106, 57, 6); text-decoration: none;">linux 库函数使用</a><span style="padding-left: 6px; position: relative;">(1)</span><a href="http://blog.csdn.net/kevinx_xu/article/category/2180635" style="color: rgb(106, 57, 6); text-decoration: none;">USB touch screen</a><span style="padding-left: 6px; position: relative;">(1)</span><a href="http://blog.csdn.net/kevinx_xu/article/category/2186647" style="color: rgb(106, 57, 6); text-decoration: none;">USB</a><span style="padding-left: 6px; position: relative;">(2)</span><a href="http://blog.csdn.net/kevinx_xu/article/category/2191661" style="color: rgb(106, 57, 6); text-decoration: none;">USB HID</a><span style="padding-left: 6px; position: relative;">(1)</span><a href="http://blog.csdn.net/kevinx_xu/article/category/2234883" style="color: rgb(106, 57, 6); text-decoration: none;">android Async</a><span style="padding-left: 6px; position: relative;">(0)</span><a href="http://blog.csdn.net/kevinx_xu/article/category/2234885" style="color: rgb(106, 57, 6); text-decoration: none;">android AsyncTask</a><span style="padding-left: 6px; position: relative;">(1)</span><a href="http://blog.csdn.net/kevinx_xu/article/category/2237219" style="color: rgb(106, 57, 6); text-decoration: none;">android pager</a><span style="padding-left: 6px; position: relative;">(1)</span><a href="http://blog.csdn.net/kevinx_xu/article/category/2237859" style="color: rgb(106, 57, 6); text-decoration: none;">android surfaceview</a><span style="padding-left: 6px; position: relative;">(2)</span><a href="http://blog.csdn.net/kevinx_xu/article/category/2240805" style="color: rgb(106, 57, 6); text-decoration: none;">屏</a><span style="padding-left: 6px; position: relative;">(1)</span><a href="http://blog.csdn.net/kevinx_xu/article/category/2270113" style="color: rgb(106, 57, 6); text-decoration: none;">Android 编译过程</a><span style="padding-left: 6px; position: relative;">(3)</span><a href="http://blog.csdn.net/kevinx_xu/article/category/2274929" style="color: rgb(106, 57, 6); text-decoration: none;">Android dumpstate</a><span style="padding-left: 6px; position: relative;">(1)</span><a href="http://blog.csdn.net/kevinx_xu/article/category/2274935" style="color: rgb(106, 57, 6); text-decoration: none;">Android 常用命令</a><span style="padding-left: 6px; position: relative;">(1)</span><a href="http://blog.csdn.net/kevinx_xu/article/category/2284193" style="color: rgb(106, 57, 6); text-decoration: none;">source insight error</a><span style="padding-left: 6px; position: relative;">(1)</span><a href="http://blog.csdn.net/kevinx_xu/article/category/2288747" style="color: rgb(106, 57, 6); text-decoration: none;">Linux串口上网的简单实现</a><span style="padding-left: 6px; position: relative;">(1)</span><a href="http://blog.csdn.net/kevinx_xu/article/category/2288975" style="color: rgb(106, 57, 6); text-decoration: none;">strace</a><span style="padding-left: 6px; position: relative;">(1)</span><a href="http://blog.csdn.net/kevinx_xu/article/category/2309681" style="color: rgb(106, 57, 6); text-decoration: none;">Android launcher</a><span style="padding-left: 6px; position: relative;">(1)</span><a href="http://blog.csdn.net/kevinx_xu/article/category/2309699" style="color: rgb(106, 57, 6); text-decoration: none;">Android systemUI</a><span style="padding-left: 6px; position: relative;">(1)</span><a href="http://blog.csdn.net/kevinx_xu/article/category/2345563" style="color: rgb(106, 57, 6); text-decoration: none;">linux oops panic</a><span style="padding-left: 6px; position: relative;">(1)</span><a href="http://blog.csdn.net/kevinx_xu/article/category/2345595" style="color: rgb(106, 57, 6); text-decoration: none;">linux 串kh</a><span style="padding-left: 6px; position: relative;">(0)</span><a href="http://blog.csdn.net/kevinx_xu/article/category/2345599" style="color: rgb(106, 57, 6); text-decoration: none;">linux 串口编程</a><span style="padding-left: 6px; position: relative;">(1)</span><a href="http://blog.csdn.net/kevinx_xu/article/category/2354127" style="color: rgb(106, 57, 6); text-decoration: none;">Android listview adapter</a><span style="padding-left: 6px; position: relative;">(1)</span><a href="http://blog.csdn.net/kevinx_xu/article/category/2359999" style="color: rgb(106, 57, 6); text-decoration: none;">NFS + tftp</a><span style="padding-left: 6px; position: relative;">(1)</span><a href="http://blog.csdn.net/kevinx_xu/article/category/2361571" style="color: rgb(106, 57, 6); text-decoration: none;">android nfs</a><span style="padding-left: 6px; position: relative;">(1)</span><a href="http://blog.csdn.net/kevinx_xu/article/category/2364215" style="color: rgb(106, 57, 6); text-decoration: none;">android bu</a><span style="padding-left: 6px; position: relative;">(0)</span><a href="http://blog.csdn.net/kevinx_xu/article/category/2364217" style="color: rgb(106, 57, 6); text-decoration: none;">android bundle</a><span style="padding-left: 6px; position: relative;">(1)</span><a href="http://blog.csdn.net/kevinx_xu/article/category/2368941" style="color: rgb(106, 57, 6); text-decoration: none;">gdb</a><span style="padding-left: 6px; position: relative;">(2)</span><a href="http://blog.csdn.net/kevinx_xu/article/category/2368971" style="color: rgb(106, 57, 6); text-decoration: none;">linux Debug</a><span style="padding-left: 6px; position: relative;">(2)</span><a href="http://blog.csdn.net/kevinx_xu/article/category/2404619" style="color: rgb(106, 57, 6); text-decoration: none;">sh</a><span style="padding-left: 6px; position: relative;">(0)</span><a href="http://blog.csdn.net/kevinx_xu/article/category/2488443" style="color: rgb(106, 57, 6); text-decoration: none;">adb</a><span style="padding-left: 6px; position: relative;">(1)</span><a href="http://blog.csdn.net/kevinx_xu/article/category/2519759" style="color: rgb(106, 57, 6); text-decoration: none;">android json</a><span style="padding-left: 6px; position: relative;">(1)</span><a href="http://blog.csdn.net/kevinx_xu/article/category/2520861" style="color: rgb(106, 57, 6); text-decoration: none;">java set</a><span style="padding-left: 6px; position: relative;">(1)</span><a href="http://blog.csdn.net/kevinx_xu/article/category/2530287" style="color: rgb(106, 57, 6); text-decoration: none;">android 关机</a><span style="padding-left: 6px; position: relative;">(1)</span><a href="http://blog.csdn.net/kevinx_xu/article/category/2736851" style="color: rgb(106, 57, 6); text-decoration: none;">加密</a><span style="padding-left: 6px; position: relative;">(1)</span><a href="http://blog.csdn.net/kevinx_xu/article/category/2919793" style="color: rgb(106, 57, 6); text-decoration: none;">windows7</a><span style="padding-left: 6px; position: relative;">(1)</span><a href="http://blog.csdn.net/kevinx_xu/article/category/5679349" style="color: rgb(106, 57, 6); text-decoration: none;">虚拟SD卡</a><span style="padding-left: 6px; position: relative;">(1)</span><a href="http://blog.csdn.net/kevinx_xu/article/category/5775357" style="color: rgb(106, 57, 6); text-decoration: none;">CVBS</a><span style="padding-left: 6px; position: relative;">(1)</span><a href="http://blog.csdn.net/kevinx_xu/article/category/5826019" style="color: rgb(106, 57, 6); text-decoration: none;">Mstar_MHL</a><span style="padding-left: 6px; position: relative;">(0)</span><a href="http://blog.csdn.net/kevinx_xu/article/category/5826489" style="color: rgb(106, 57, 6); text-decoration: none;">Mstar_CEC</a><span style="padding-left: 6px; position: relative;">(0)</span><a href="http://blog.csdn.net/kevinx_xu/article/category/5828357" style="color: rgb(106, 57, 6); text-decoration: none;">Android_定时开关机</a><span style="padding-left: 6px; position: relative;">(1)</span><a href="http://blog.csdn.net/kevinx_xu/article/category/5864585" style="color: rgb(106, 57, 6); text-decoration: none;">Mstar_DTV</a><span style="padding-left: 6px; position: relative;">(1)</span><a href="http://blog.csdn.net/kevinx_xu/article/category/6136749" style="color: rgb(106, 57, 6); text-decoration: none;">beyong</a><span style="padding-left: 6px; position: relative;">(0)</span><a href="http://blog.csdn.net/kevinx_xu/article/category/6136750" style="color: rgb(106, 57, 6); text-decoration: none;">beyond compare</a><span style="padding-left: 6px; position: relative;">(1)</span></li></ul></div><div style="padding: 1px; border: 1px solid rgb(224, 198, 166); margin-bottom: 10px; background: rgb(255, 255, 255);"><ul style="clear: both; height: 24px; padding: 0px; color: rgb(54, 46, 43); font-weight: bold; font-style: normal; font-variant: normal; font-stretch: normal; font-size: 12px; font-family: Arial; text-indent: 5px; margin: 0px; background: url(http://static.blog.csdn.net/skin/ink/images/nav_bg.gif) 50% 0% repeat-x;"><li>阅读排行</li></ul><ul style="margin: 0px; padding: 3px 10px 10px 12px;"><li><a href="http://blog.csdn.net/kevinx_xu/article/details/8178746" style="color: rgb(106, 57, 6); text-decoration: none; display: inline-block; white-space: nowrap; width: 130px; height: 15px; overflow: hidden;" title="linux 中/proc 详解">linux 中/proc 详解</a><span style="padding-left: 6px; position: relative; display: inline-block; height: 14px; float: right;">(20695)</span><a href="http://blog.csdn.net/kevinx_xu/article/details/11660915" style="color: rgb(106, 57, 6); text-decoration: none; display: inline-block; white-space: nowrap; width: 130px; height: 15px; overflow: hidden;" title="git format-patch 使用方法">git format-patch 使用方法</a><span style="padding-left: 6px; position: relative; display: inline-block; height: 14px; float: right;">(16576)</span><a href="http://blog.csdn.net/kevinx_xu/article/details/9714875" style="color: rgb(106, 57, 6); text-decoration: none; display: inline-block; white-space: nowrap; width: 130px; height: 15px; overflow: hidden;" title="shell脚本参数">shell脚本参数</a><span style="padding-left: 6px; position: relative; display: inline-block; height: 14px; float: right;">(14021)</span><a href="http://blog.csdn.net/kevinx_xu/article/details/20465561" style="color: rgb(106, 57, 6); text-decoration: none; display: inline-block; white-space: nowrap; width: 130px; height: 15px; overflow: hidden;" title="Android瀑布流照片墙实现，体验不规则排列的美感">Android瀑布流照片墙实现，体验不规则排列的美感</a><span style="padding-left: 6px; position: relative; display: inline-block; height: 14px; float: right;">(11858)</span><a href="http://blog.csdn.net/kevinx_xu/article/details/11845619" style="color: rgb(106, 57, 6); text-decoration: none; display: inline-block; white-space: nowrap; width: 130px; height: 15px; overflow: hidden;" title="Android电话拨打流程源码分析">Android电话拨打流程源码分析</a><span style="padding-left: 6px; position: relative; display: inline-block; height: 14px; float: right;">(10989)</span><a href="http://blog.csdn.net/kevinx_xu/article/details/44108021" style="color: rgb(106, 57, 6); text-decoration: none; display: inline-block; white-space: nowrap; width: 130px; height: 15px; overflow: hidden;" title="windows7 内部版本7601 此windows副本不是正版 ---解决方案">windows7 内部版本7601 此windows副本不是正版 ---解决方案</a><span style="padding-left: 6px; position: relative; display: inline-block; height: 14px; float: right;">(9361)</span><a href="http://blog.csdn.net/kevinx_xu/article/details/11846289" style="color: rgb(106, 57, 6); text-decoration: none; display: inline-block; white-space: nowrap; width: 130px; height: 15px; overflow: hidden;" title="dumpsys工具使用">dumpsys工具使用</a><span style="padding-left: 6px; position: relative; display: inline-block; height: 14px; float: right;">(8780)</span><a href="http://blog.csdn.net/kevinx_xu/article/details/11846137" style="color: rgb(106, 57, 6); text-decoration: none; display: inline-block; white-space: nowrap; width: 130px; height: 15px; overflow: hidden;" title="Android电话来电流程源码分析">Android电话来电流程源码分析</a><span style="padding-left: 6px; position: relative; display: inline-block; height: 14px; float: right;">(8309)</span><a href="http://blog.csdn.net/kevinx_xu/article/details/11832097" style="color: rgb(106, 57, 6); text-decoration: none; display: inline-block; white-space: nowrap; width: 130px; height: 15px; overflow: hidden;" title="Android Phone设计介绍">Android Phone设计介绍</a><span style="padding-left: 6px; position: relative; display: inline-block; height: 14px; float: right;">(5599)</span><a href="http://blog.csdn.net/kevinx_xu/article/details/8674468" style="color: rgb(106, 57, 6); text-decoration: none; display: inline-block; white-space: nowrap; width: 130px; height: 15px; overflow: hidden;" title="Android Wifi驱动--底层">Android Wifi驱动--底层</a><span style="padding-left: 6px; position: relative; display: inline-block; height: 14px; float: right;">(4936)</span></li></ul></div><div style="padding: 1px; border: 1px solid rgb(224, 198, 166); margin-bottom: 10px; background: rgb(255, 255, 255);"><ul style="clear: both; height: 24px; padding: 0px; color: rgb(54, 46, 43); font-weight: bold; font-style: normal; font-variant: normal; font-stretch: normal; font-size: 12px; font-family: Arial; text-indent: 5px; margin: 0px; background: url(http://static.blog.csdn.net/skin/ink/images/nav_bg.gif) 50% 0% repeat-x;"><li>评论排行</li></ul><ul style="margin: 0px; padding: 3px 10px 10px 12px;"><li><a href="http://blog.csdn.net/kevinx_xu/article/details/11832913" style="color: rgb(106, 57, 6); text-decoration: none; display: inline-block; white-space: nowrap; width: 130px; height: 15px; overflow: hidden;" title="Android4.1电话呼叫界面布局设计：">Android4.1电话呼叫界面布局设计：</a><span style="padding-left: 6px; position: relative; display: inline-block; height: 14px; float: right;">(5)</span><a href="http://blog.csdn.net/kevinx_xu/article/details/8254410" style="color: rgb(106, 57, 6); text-decoration: none; display: inline-block; white-space: nowrap; width: 130px; height: 15px; overflow: hidden;" title="android Activity 的7个生命周期">android Activity 的7个生命周期</a><span style="padding-left: 6px; position: relative; display: inline-block; height: 14px; float: right;">(4)</span><a href="http://blog.csdn.net/kevinx_xu/article/details/11832097" style="color: rgb(106, 57, 6); text-decoration: none; display: inline-block; white-space: nowrap; width: 130px; height: 15px; overflow: hidden;" title="Android Phone设计介绍">Android Phone设计介绍</a><span style="padding-left: 6px; position: relative; display: inline-block; height: 14px; float: right;">(4)</span><a href="http://blog.csdn.net/kevinx_xu/article/details/20465561" style="color: rgb(106, 57, 6); text-decoration: none; display: inline-block; white-space: nowrap; width: 130px; height: 15px; overflow: hidden;" title="Android瀑布流照片墙实现，体验不规则排列的美感">Android瀑布流照片墙实现，体验不规则排列的美感</a><span style="padding-left: 6px; position: relative; display: inline-block; height: 14px; float: right;">(4)</span><a href="http://blog.csdn.net/kevinx_xu/article/details/21728375" style="color: rgb(106, 57, 6); text-decoration: none; display: inline-block; white-space: nowrap; width: 130px; height: 15px; overflow: hidden;" title="Android高级图片滚动控件，编写3D版的图片轮播器">Android高级图片滚动控件，编写3D版的图片轮播器</a><span style="padding-left: 6px; position: relative; display: inline-block; height: 14px; float: right;">(4)</span><a href="http://blog.csdn.net/kevinx_xu/article/details/11846219" style="color: rgb(106, 57, 6); text-decoration: none; display: inline-block; white-space: nowrap; width: 130px; height: 15px; overflow: hidden;" title="Android Phone 模块3">Android Phone 模块3</a><span style="padding-left: 6px; position: relative; display: inline-block; height: 14px; float: right;">(3)</span><a href="http://blog.csdn.net/kevinx_xu/article/details/26688643" style="color: rgb(106, 57, 6); text-decoration: none; display: inline-block; white-space: nowrap; width: 130px; height: 15px; overflow: hidden;" title="Source Insight3.5 注册码以及提示 a valid serial number was not entered解决">Source Insight3.5 注册码以及提示 a valid serial number was not entered解决</a><span style="padding-left: 6px; position: relative; display: inline-block; height: 14px; float: right;">(2)</span><a href="http://blog.csdn.net/kevinx_xu/article/details/11832859" style="color: rgb(106, 57, 6); text-decoration: none; display: inline-block; white-space: nowrap; width: 130px; height: 15px; overflow: hidden;" title="Android phone 拨号UI">Android phone 拨号UI</a><span style="padding-left: 6px; position: relative; display: inline-block; height: 14px; float: right;">(2)</span><a href="http://blog.csdn.net/kevinx_xu/article/details/8178746" style="color: rgb(106, 57, 6); text-decoration: none; display: inline-block; white-space: nowrap; width: 130px; height: 15px; overflow: hidden;" title="linux 中/proc 详解">linux 中/proc 详解</a><span style="padding-left: 6px; position: relative; display: inline-block; height: 14px; float: right;">(1)</span><a href="http://blog.csdn.net/kevinx_xu/article/details/11660915" style="color: rgb(106, 57, 6); text-decoration: none; display: inline-block; white-space: nowrap; width: 130px; height: 15px; overflow: hidden;" title="git format-patch 使用方法">git format-patch 使用方法</a><span style="padding-left: 6px; position: relative; display: inline-block; height: 14px; float: right;">(1)</span></li></ul></div><div style="padding: 1px; border: 1px solid rgb(224, 198, 166); margin-bottom: 10px; background: rgb(255, 255, 255);"><ul style="clear: both; height: 24px; padding: 0px; color: rgb(54, 46, 43); font-weight: bold; font-style: normal; font-variant: normal; font-stretch: normal; font-size: 12px; font-family: Arial; text-indent: 5px; margin: 0px; background: url(http://static.blog.csdn.net/skin/ink/images/nav_bg.gif) 50% 0% repeat-x;"><li>推荐文章</li></ul><ul style="margin: 0px; padding: 3px 10px 10px 12px;"><li style="list-style: none; display: inline"><ul style="margin: 0px; padding: 0px;"><li><a href="http://blog.csdn.net/diyangxia/article/details/40348765" style="color: rgb(106, 57, 6); text-decoration: none;" target="_blank">*Viewpager实现底部滑动菜单，同时取消预加载</a><a href="http://blog.csdn.net/woshimalingyi/article/details/50964787" style="color: rgb(106, 57, 6); text-decoration: none;" target="_blank">*Android框架设计模式（三）——Observer Method</a><a href="http://blog.csdn.net/fanyun_01/article/details/50921678" style="color: rgb(106, 57, 6); text-decoration: none;" target="_blank">*浅谈Storm流式处理框架</a><a href="http://blog.csdn.net/u013088062/article/details/50893901" style="color: rgb(106, 57, 6); text-decoration: none;" target="_blank">*有关深度学习领域的几点想法</a><a href="http://blog.csdn.net/wangpeng198688/article/details/50964828" style="color: rgb(106, 57, 6); text-decoration: none;" target="_blank">* 管理Java垃圾回收的五个建议</a><a href="http://blog.csdn.net/u014421556/article/details/50964505" style="color: rgb(106, 57, 6); text-decoration: none;" target="_blank">* 大数据并发问题</a></li></ul></li></ul></div><div style="padding: 1px; border: 1px solid rgb(224, 198, 166); margin-bottom: 10px; background: rgb(255, 255, 255);"><ul style="clear: both; height: 24px; padding: 0px; color: rgb(54, 46, 43); font-weight: bold; font-style: normal; font-variant: normal; font-stretch: normal; font-size: 12px; font-family: Arial; text-indent: 5px; margin: 0px; background: url(http://static.blog.csdn.net/skin/ink/images/nav_bg.gif) 50% 0% repeat-x;"><li>最新评论</li></ul><ul style="margin: 0px; padding: 3px 10px 10px 12px;"><li><a href="http://blog.csdn.net/kevinx_xu/article/details/11832913#comments" style="color: rgb(106, 57, 6); text-decoration: none; display: inline-block; white-space: nowrap; width: 170.516px; height: 15px; overflow: hidden;">Android4.1电话呼叫界面布局设计：</a><a href="http://blog.csdn.net/kevinx_xu/article/details/8479586#comments" style="color: rgb(106, 57, 6); text-decoration: none; display: inline-block; white-space: nowrap; width: 170.516px; height: 15px; overflow: hidden;">android 开机logo修改</a><a href="http://blog.csdn.net/kevinx_xu/article/details/49887893#comments" style="color: rgb(106, 57, 6); text-decoration: none; display: inline-block; white-space: nowrap; width: 170.516px; height: 15px; overflow: hidden;">Mstar 6A638 DTMB DTV节目存储与管理 (1) 之DTV节目存储文件的创建</a><a href="http://blog.csdn.net/kevinx_xu/article/details/49887893#comments" style="color: rgb(106, 57, 6); text-decoration: none; display: inline-block; white-space: nowrap; width: 170.516px; height: 15px; overflow: hidden;">Mstar 6A638 DTMB DTV节目存储与管理 (1) 之DTV节目存储文件的创建</a><a href="http://blog.csdn.net/kevinx_xu/article/details/49887893#comments" style="color: rgb(106, 57, 6); text-decoration: none; display: inline-block; white-space: nowrap; width: 170.516px; height: 15px; overflow: hidden;">Mstar 6A638 DTMB DTV节目存储与管理 (1) 之DTV节目存储文件的创建</a><a href="http://blog.csdn.net/kevinx_xu/article/details/21728375#comments" style="color: rgb(106, 57, 6); text-decoration: none; display: inline-block; white-space: nowrap; width: 170.516px; height: 15px; overflow: hidden;">Android高级图片滚动控件，编写3D版的图片轮播器</a><a href="http://blog.csdn.net/kevinx_xu/article/details/11846219#comments" style="color: rgb(106, 57, 6); text-decoration: none; display: inline-block; white-space: nowrap; width: 170.516px; height: 15px; overflow: hidden;">Android Phone 模块3</a><a href="http://blog.csdn.net/kevinx_xu/article/details/11846219#comments" style="color: rgb(106, 57, 6); text-decoration: none; display: inline-block; white-space: nowrap; width: 170.516px; height: 15px; overflow: hidden;">Android Phone 模块3</a><a href="http://blog.csdn.net/kevinx_xu/article/details/11846219#comments" style="color: rgb(106, 57, 6); text-decoration: none; display: inline-block; white-space: nowrap; width: 170.516px; height: 15px; overflow: hidden;">Android高级图片滚动控件，编写3D版的图片轮播器</a><a href="http://blog.csdn.net/kevinx_xu/article/details/20465561#comments" style="color: rgb(106, 57, 6); text-decoration: none; display: inline-block; white-space: nowrap; width: 170.516px; height: 15px; overflow: hidden;">Android瀑布流照片墙实现，体验不规则排列的美感</a></li><li style="margin: 0px;"><a href="http://blog.csdn.net/chenjiechenyan" style="color: rgb(106, 57, 6); text-decoration: none; display: inline; white-space: nowrap; width: auto; height: 15px; overflow: hidden;">chenjiechenyan</a>: 楼主，求源码1149394287@qq.com.谢谢呀</li><li style="margin: 0px;"><a href="http://blog.csdn.net/liangjn1984" style="color: rgb(106, 57, 6); text-decoration: none; display: inline; white-space: nowrap; width: auto; height: 15px; overflow: hidden;">小道人家</a>: 标题和内容不一样！！</li><li style="margin: 0px;"><a href="http://blog.csdn.net/GDUT_Carl" style="color: rgb(106, 57, 6); text-decoration: none; display: inline; white-space: nowrap; width: auto; height: 15px; overflow: hidden;">GDUT_Carl</a>: 徐鹏，这个不能发，签了保密协议的</li><li style="margin: 0px;"><a href="http://blog.csdn.net/kevinx_xu" style="color: rgb(106, 57, 6); text-decoration: none; display: inline; white-space: nowrap; width: auto; height: 15px; overflow: hidden;">小K仔</a>: @mwyting:不知道喽，现在还没人通知过我，不能发，因为自己刚开始做Mstar 方案的时候，在网...</li><li style="margin: 0px;"><a href="http://blog.csdn.net/mwyting" style="color: rgb(106, 57, 6); text-decoration: none; display: inline; white-space: nowrap; width: auto; height: 15px; overflow: hidden;">崔廷佐</a>: 发这个，Mstar没意见？</li><li style="margin: 0px;"><a href="http://blog.csdn.net/u013955271" style="color: rgb(106, 57, 6); text-decoration: none; display: inline; white-space: nowrap; width: auto; height: 15px; overflow: hidden;">风之深谷</a>: 怎么让这个图片垂直滑动</li><li style="margin: 0px;"><a href="http://blog.csdn.net/chenlvke" style="color: rgb(106, 57, 6); text-decoration: none; display: inline; white-space: nowrap; width: auto; height: 15px; overflow: hidden;">chenlvke</a>: 赞</li><li style="margin: 0px;"><a href="http://blog.csdn.net/chenlvke" style="color: rgb(106, 57, 6); text-decoration: none; display: inline; white-space: nowrap; width: auto; height: 15px; overflow: hidden;">chenlvke</a>: 赞</li><li style="margin: 0px;"><a href="http://blog.csdn.net/apple2360541" style="color: rgb(106, 57, 6); text-decoration: none; display: inline; white-space: nowrap; width: auto; height: 15px; overflow: hidden;">apple2360541</a>: 为什么设计非得5张图片以上才能显示啊，3张，4张图片不可以吗，还有支不支持从网络上加装图片</li><li style="margin: 0px;"><a href="http://blog.csdn.net/u012975705" style="color: rgb(106, 57, 6); text-decoration: none; display: inline; white-space: nowrap; width: auto; height: 15px; overflow: hidden;">z_zhaojun1</a>: 学习下</li></ul></div></div></div><div style="width: 1841px; margin-top: 10px; overflow: hidden; border-top-width: 1px; border-top-style: solid; border-top-color: rgb(240, 240, 240); background-color: rgb(255, 255, 255);"><div style="width: 1170px; overflow: hidden; margin: 0px auto 20px;"><dl style="margin: 0px; padding: 0px;"><dd style="margin: 15px 0px 0px; padding: 0px; width: 1170px; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: rgb(224, 224, 224); font-size: 14px; overflow: hidden;"><a href="http://www.csdn.net/company/about.html" style="color: rgb(102, 102, 102); text-decoration: none; font-family: &apos;microsoft yahei&apos;; display: block; height: 20px; float: left; margin-bottom: 10px;" target="_blank">公司简介</a><span style="color: rgb(209, 209, 209); padding: 0px 8px; display: block; float: left; height: 20px; margin-bottom: 10px;">|</span><a href="http://www.csdn.net/company/recruit.html" style="color: rgb(102, 102, 102); text-decoration: none; font-family: &apos;microsoft yahei&apos;; display: block; height: 20px; float: left; margin-bottom: 10px;" target="_blank">招贤纳士</a><span style="color: rgb(209, 209, 209); padding: 0px 8px; display: block; float: left; height: 20px; margin-bottom: 10px;">|</span><a href="http://www.csdn.net/company/marketing.html" style="color: rgb(102, 102, 102); text-decoration: none; font-family: &apos;microsoft yahei&apos;; display: block; height: 20px; float: left; margin-bottom: 10px;" target="_blank">广告服务</a><span style="color: rgb(209, 209, 209); padding: 0px 8px; display: block; float: left; height: 20px; margin-bottom: 10px;">|</span><a href="http://www.csdn.net/company/account.html" style="color: rgb(102, 102, 102); text-decoration: none; font-family: &apos;microsoft yahei&apos;; display: block; height: 20px; float: left; margin-bottom: 10px;" target="_blank">银行汇款帐号</a><span style="color: rgb(209, 209, 209); padding: 0px 8px; display: block; float: left; height: 20px; margin-bottom: 10px;">|</span><a href="http://www.csdn.net/company/contact.html" style="color: rgb(102, 102, 102); text-decoration: none; font-family: &apos;microsoft yahei&apos;; display: block; height: 20px; float: left; margin-bottom: 10px;" target="_blank">联系方式</a><span style="color: rgb(209, 209, 209); padding: 0px 8px; display: block; float: left; height: 20px; margin-bottom: 10px;">|</span><a href="http://www.csdn.net/company/statement.html" style="color: rgb(102, 102, 102); text-decoration: none; font-family: &apos;microsoft yahei&apos;; display: block; height: 20px; float: left; margin-bottom: 10px;" target="_blank">版权声明</a><span style="color: rgb(209, 209, 209); padding: 0px 8px; display: block; float: left; height: 20px; margin-bottom: 10px;">|</span><a href="http://www.csdn.net/company/layer.html" style="color: rgb(102, 102, 102); text-decoration: none; font-family: &apos;microsoft yahei&apos;; display: block; height: 20px; float: left; margin-bottom: 10px;" target="_blank">法律顾问</a><span style="color: rgb(209, 209, 209); padding: 0px 8px; display: block; float: left; height: 20px; margin-bottom: 10px;">|</span><a href="mailto:webmaster@csdn.net" style="color: rgb(102, 102, 102); text-decoration: none; font-family: &apos;microsoft yahei&apos;; display: block; height: 20px; float: left; margin-bottom: 10px;">问题报告</a><span style="color: rgb(209, 209, 209); padding: 0px 8px; display: block; float: left; height: 20px; margin-bottom: 10px;">|</span><a href="http://www.csdn.net/friendlink.html" style="color: rgb(102, 102, 102); text-decoration: none; font-family: &apos;microsoft yahei&apos;; display: block; height: 20px; float: left; margin-bottom: 10px;" target="_blank">合作伙伴</a><span style="color: rgb(209, 209, 209); padding: 0px 8px; display: block; float: left; height: 20px; margin-bottom: 10px;">|</span><a href="http://bbs.csdn.net/forums/Service" style="color: rgb(102, 102, 102); text-decoration: none; font-family: &apos;microsoft yahei&apos;; display: block; height: 20px; float: left; margin-bottom: 10px;" target="_blank">论坛反馈</a></dd><dd style="margin: 0px; padding: 0px; font-family: &apos;microsoft yahei&apos;; font-size: 12px; overflow: hidden; width: 1170px;"><a href="http://wpa.qq.com/msgrd?v=3&amp;uin=2355263776&amp;site=qq&amp;menu=yes" style="color: rgb(102, 102, 102); text-decoration: none; display: block; float: left; height: 35px; padding-left: 20px; margin-right: 9px; background: url(http://csdnimg.cn/pubfooter/images/qq_icon.png) 0% 10px no-repeat;" target="_blank">网站客服</a><a href="http://wpa.qq.com/msgrd?v=3&amp;uin=2251809102&amp;site=qq&amp;menu=yes" style="color: rgb(102, 102, 102); text-decoration: none; display: block; float: left; height: 35px; padding-left: 20px; margin-right: 9px; background: url(http://csdnimg.cn/pubfooter/images/qq_icon.png) 0% 10px no-repeat;" target="_blank">杂志客服</a><a href="http://e.weibo.com/csdnsupport/profile" style="color: rgb(102, 102, 102); text-decoration: none; display: block; float: left; height: 35px; padding-left: 23px; margin-right: 9px; background: url(http://csdnimg.cn/pubfooter/images/weibo_icon.png) 0% 10px no-repeat;" target="_blank">微博客服</a><a href="mailto:webmaster@csdn.net" style="color: rgb(102, 102, 102); text-decoration: none; display: block; float: left; height: 35px; padding-left: 20px; margin-right: 9px; background: url(http://csdnimg.cn/pubfooter/images/mail_icon.png) 0% 11px no-repeat;" title="联系邮箱">webmaster@csdn.net</a><span style="display: block; float: left; height: 35px; color: rgb(102, 102, 102); padding-left: 20px; background: url(http://csdnimg.cn/pubfooter/images/phone_icon.png) 0% 11px no-repeat;" title="服务热线">400-600-2320</span><span style="color: rgb(102, 102, 102); padding: 0px 6px; margin: 0px; display: block; float: left; height: 35px;">|</span><span style="display: block; float: left; height: 35px; color: rgb(102, 102, 102);">北京创新乐知信息技术有限公司 版权所有</span><span style="color: rgb(102, 102, 102); padding: 0px 6px; margin: 0px; display: block; float: left; height: 35px;">|</span><span style="display: block; float: left; height: 35px; color: rgb(102, 102, 102);">江苏乐知网络技术有限公司 提供商务支持</span></dd><dd style="margin: 0px; padding: 0px; font-size: 12px; color: rgb(156, 156, 156); font-family: &apos;microsoft yahei&apos;; width: 1170px;"><span style="display: block; float: left; height: 21px;">京 ICP 证 09002463 号</span><span style="color: rgb(209, 209, 209); padding: 0px 6px; margin: 0px; display: block; float: left; height: 21px;">|</span><span style="display: block; float: left; height: 21px;">Copyright © 1999-2014, CSDN.NET, All Rights Reserved </span><a href="http://www.hd315.gov.cn/beian/view.asp?bianhao=010202001032100010" style="color: rgb(106, 57, 6); text-decoration: none; display: block; float: left; height: 21px;" target="_blank"><img alt="GongshangLogo" src="http://c.csdnimg.cn/pubfooter/images/gongshang_logos.gif" style="border: none; height: 21px; padding-left: 10px;"></img></a></dd></dl></div></div><img border="0" height="0" src="http://counter.csdn.net/pv.aspx?id=24" style="border: none;" width="0"></img></div><div><br/></div></span>
</div></body></html> 