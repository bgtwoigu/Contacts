<html>
<head>
  <title>43开机部分常用客制化</title>
  <basefont face="Microsoft YaHei" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/301769 (zh-CN); Windows/6.3.9600 (Win64);"/>
  <style>
    body, td {
      font-family: Microsoft YaHei;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="846"/>
<h1>43开机部分常用客制化</h1>

<div>
<span><div style="box-sizing: border-box; color: rgb(53, 54, 48); font-family: RionaSans, Helvetica, 微軟雅黑, &apos;Microsoft YaHei&apos;, Song, PMingLiU, sans-serif; font-size: 12px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; visibility: visible; background-color: rgb(247, 247, 247);"><span style="box-sizing: border-box; font-size: large;">[DESCRIPTION]</span></div><div style="box-sizing: border-box; color: rgb(53, 54, 48); font-family: RionaSans, Helvetica, 微軟雅黑, &apos;Microsoft YaHei&apos;, Song, PMingLiU, sans-serif; font-size: 12px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; visibility: visible; background-color: rgb(247, 247, 247);">（1）在Pluto/FTE版本，客户需要替换现有的开机LOGO;</div><div style="box-sizing: border-box; color: rgb(53, 54, 48); font-family: RionaSans, Helvetica, 微軟雅黑, &apos;Microsoft YaHei&apos;, Song, PMingLiU, sans-serif; font-size: 12px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; visibility: visible; background-color: rgb(247, 247, 247);">（1）在Pluto/FTE版本，客户需要替换现有的开机动画;</div><div style="box-sizing: border-box; color: rgb(53, 54, 48); font-family: RionaSans, Helvetica, 微軟雅黑, &apos;Microsoft YaHei&apos;, Song, PMingLiU, sans-serif; font-size: 12px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; visibility: visible; background-color: rgb(247, 247, 247);">（3）在开机动画之后，开机流程中添加一个检验流程</div><div style="box-sizing: border-box; color: rgb(53, 54, 48); font-family: RionaSans, Helvetica, 微軟雅黑, &apos;Microsoft YaHei&apos;, Song, PMingLiU, sans-serif; font-size: 12px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; visibility: visible; background-color: rgb(247, 247, 247);">（4）开机流程中获取电池电量并使用pop框提示</div><div style="box-sizing: border-box; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; visibility: visible; background-color: rgb(247, 247, 247);"><div style="box-sizing: border-box; visibility: visible;"><span style="color: rgb(53, 54, 48);"><span style="font-size: 12px;"><span style="font-family: RionaSans, Helvetica, 微軟雅黑, &apos;Microsoft YaHei&apos;, Song, PMingLiU, sans-serif;"><span style="box-sizing: border-box; font-size: large;">[SOLUTION]</span></span></span></span></div><div style="box-sizing: border-box; visibility: visible;"><span style="color: rgb(53, 54, 48);"><span style="font-size: 12px;"><span style="font-family: RionaSans, Helvetica, 微軟雅黑, &apos;Microsoft YaHei&apos;, Song, PMingLiU, sans-serif;"><span style="box-sizing: border-box; font-size: large;">Q1：<span style="box-sizing: border-box; color: rgb(51, 102, 255);">替换开机logo</span></span></span></span></span></div><div style="box-sizing: border-box; visibility: visible;"><span style="color: rgb(53, 54, 48);"><span style="font-size: 12px;"><span style="font-family: RionaSans, Helvetica, 微軟雅黑, &apos;Microsoft YaHei&apos;, Song, PMingLiU, sans-serif;"><span style="box-sizing: border-box; font-size: small;">1：将客制化图片添加到mcu\plutommi\customer\image\FTE***x***\MainLCD\Active\Poweronoff目录下，替换logo.bmp,同时压缩MainLCD成image.zip;</span></span></span></span></div><div style="box-sizing: border-box; visibility: visible;"><span style="color: rgb(53, 54, 48);"><span style="font-size: 12px;"><span style="font-family: RionaSans, Helvetica, 微軟雅黑, &apos;Microsoft YaHei&apos;, Song, PMingLiU, sans-serif;"><span style="box-sizing: border-box; font-size: small;">2：make resgen &amp; make remake mmiresource；</span></span></span></span></div><div style="box-sizing: border-box; visibility: visible;"><span style="color: rgb(53, 54, 48);"><span style="font-size: 12px;"><span style="font-family: RionaSans, Helvetica, 微軟雅黑, &apos;Microsoft YaHei&apos;, Song, PMingLiU, sans-serif;"><span style="box-sizing: border-box; font-size: small;"><span style="box-sizing: border-box; color: rgb(51, 102, 255);">注意</span>：当前开机logo的图片格式和mmi_features.log里面<span style="box-sizing: border-box; color: rgb(255, 0, 0);">__MMI_RES_TYPE_BOOTUP_LOGO_IMAGE__</span>的设定相关</span></span></span></span></div><div style="box-sizing: border-box; visibility: visible;"><span style="color: rgb(53, 54, 48);"><span style="font-size: 12px;"><span style="font-family: RionaSans, Helvetica, 微軟雅黑, &apos;Microsoft YaHei&apos;, Song, PMingLiU, sans-serif;"> </span></span></span></div><div style="box-sizing: border-box; visibility: visible;"><div style="box-sizing: border-box; visibility: visible;"><span style="color: rgb(53, 54, 48);"><span style="font-size: 12px;"><span style="font-family: RionaSans, Helvetica, 微軟雅黑, &apos;Microsoft YaHei&apos;, Song, PMingLiU, sans-serif;"><span style="box-sizing: border-box; font-size: large;">Q2：<span style="box-sizing: border-box; color: rgb(51, 102, 255);">替换开机动画</span></span></span></span></span></div><div style="box-sizing: border-box; visibility: visible;"><span style="color: rgb(53, 54, 48);"><span style="font-size: 12px;"><span style="font-family: RionaSans, Helvetica, 微軟雅黑, &apos;Microsoft YaHei&apos;, Song, PMingLiU, sans-serif;"><span style="box-sizing: border-box; font-size: small;">1：将客制化图片添加到mcu\plutommi\customer\image\FTE***x***\MainLCD\Active\Poweronoff目录下，替换POONOFF.gif,同时压缩MainLCD成image.zip;</span></span></span></span></div><div style="box-sizing: border-box; visibility: visible;"><span style="color: rgb(53, 54, 48);"><span style="font-size: 12px;"><span style="font-family: RionaSans, Helvetica, 微軟雅黑, &apos;Microsoft YaHei&apos;, Song, PMingLiU, sans-serif;"><span style="box-sizing: border-box; font-size: small;">2：make resgen &amp; make remake mmiresource；</span></span></span></span></div><div style="box-sizing: border-box; visibility: visible;"><span style="color: rgb(53, 54, 48);"><span style="font-size: 12px;"><span style="font-family: RionaSans, Helvetica, 微軟雅黑, &apos;Microsoft YaHei&apos;, Song, PMingLiU, sans-serif;"><span style="box-sizing: border-box; font-size: small;"><span style="box-sizing: border-box; color: rgb(51, 102, 255);">注意</span>：当前开机动画的的图片格式和mmi_features.log里面<span style="box-sizing: border-box; color: rgb(255, 0, 0);">__MMI_RES_TYPE_BOOTUP_POWER_ONOFF__</span>的设定相关,除此之外，动画的下显示和<span style="box-sizing: border-box; color: rgb(255, 0, 0);">__MMI_POWER_ON_OFF_DISPLAY__</span>有关。当此宏控定义时才会显示动画，否则从开机进入idle界面之前只会显示开机logo</span></span></span></span></div><div style="box-sizing: border-box; visibility: visible;"><span style="color: rgb(53, 54, 48);"><span style="font-size: 12px;"><span style="font-family: RionaSans, Helvetica, 微軟雅黑, &apos;Microsoft YaHei&apos;, Song, PMingLiU, sans-serif;"> </span></span></span></div><div style="box-sizing: border-box; visibility: visible;"><div style="box-sizing: border-box; visibility: visible;"><div style="box-sizing: border-box; visibility: visible;"><span style="color: rgb(53, 54, 48);"><span style="font-size: 12px;"><span style="font-family: RionaSans, Helvetica, 微軟雅黑, &apos;Microsoft YaHei&apos;, Song, PMingLiU, sans-serif;"><span style="box-sizing: border-box; font-size: large;">Q3：<span style="box-sizing: border-box; color: rgb(51, 102, 255);">开机流程中客制化密码校验</span></span></span></span></span></div><div style="box-sizing: border-box; visibility: visible;"><span style="color: rgb(53, 54, 48);"><span style="font-size: 12px;"><span style="font-family: RionaSans, Helvetica, 微軟雅黑, &apos;Microsoft YaHei&apos;, Song, PMingLiU, sans-serif;"><span style="box-sizing: border-box; font-size: small;">1：获取到开机流程中安全校验的入口函数mmi_bootup_flow_security,同时参考phonelock的验证流程添加secury verify的流程，参考如下code;</span></span></span></span></div><div style="box-sizing: border-box; visibility: visible;"><div><img src="43开机部分常用客制化_files/Image.png" type="image/png"/></div></div><div style="box-sizing: border-box; visibility: visible;"><span style="color: rgb(53, 54, 48);"><span style="font-size: 12px;"><span style="font-family: RionaSans, Helvetica, 微軟雅黑, &apos;Microsoft YaHei&apos;, Song, PMingLiU, sans-serif;"><span style="box-sizing: border-box; font-size: small;">参定义一个全局变量标志当前客制化校验是否执行：</span></span></span></span></div><div style="box-sizing: border-box; visibility: visible;"><div><img src="43开机部分常用客制化_files/Image [1].png" type="image/png"/></div></div><div style="box-sizing: border-box; visibility: visible;"><span style="color: rgb(53, 54, 48);"><span style="font-size: 12px;"><span style="font-family: RionaSans, Helvetica, 微軟雅黑, &apos;Microsoft YaHei&apos;, Song, PMingLiU, sans-serif;"> </span></span></span></div><div style="box-sizing: border-box; visibility: visible;"><span style="color: rgb(53, 54, 48);"><span style="font-size: 12px;"><span style="font-family: RionaSans, Helvetica, 微軟雅黑, &apos;Microsoft YaHei&apos;, Song, PMingLiU, sans-serif;"><span style="box-sizing: border-box; font-size: small;">2：设置最大的校验次数以及相关的设置参数；</span></span></span></span></div><div style="box-sizing: border-box; visibility: visible;"><div><img src="43开机部分常用客制化_files/Image [2].png" type="image/png"/></div></div><div style="box-sizing: border-box; visibility: visible;"><div><img src="43开机部分常用客制化_files/Image [3].png" type="image/png"/></div></div><div style="box-sizing: border-box; visibility: visible;"><span style="color: rgb(53, 54, 48);"><span style="font-size: 12px;"><span style="font-family: RionaSans, Helvetica, 微軟雅黑, &apos;Microsoft YaHei&apos;, Song, PMingLiU, sans-serif;"><span style="box-sizing: border-box; font-size: small;">3：对当前输入的密码进行验证，phonelock是将用户输入密码送入底层底层进行校验，客户可参考验证思路添加函数来验证密码是否正确，再发送相应的验证结果，可参考下列code:</span></span></span></span></div><div style="box-sizing: border-box; visibility: visible;"><div><img src="43开机部分常用客制化_files/Image [4].png" type="image/png"/></div></div><div style="box-sizing: border-box; visibility: visible;"><div style="box-sizing: border-box; visibility: visible;"><span style="color: rgb(53, 54, 48);"><span style="font-size: 12px;"><span style="font-family: RionaSans, Helvetica, 微軟雅黑, &apos;Microsoft YaHei&apos;, Song, PMingLiU, sans-serif;"><span style="box-sizing: border-box; font-size: large;">Q4：<span style="box-sizing: border-box; color: rgb(51, 102, 255);">开机流程中添加电量提示</span></span></span></span></span></div><div style="box-sizing: border-box; visibility: visible;"><span style="color: rgb(53, 54, 48);"><span style="font-size: 12px;"><span style="font-family: RionaSans, Helvetica, 微軟雅黑, &apos;Microsoft YaHei&apos;, Song, PMingLiU, sans-serif;"><span style="box-sizing: border-box; font-size: small;">1：获取到开机流程中安全校验的入口函数mmi_bootup_flow_battery_check,同时获取当前电量对low battery之外的case以confirm的pop框进行提示：</span></span></span></span></div><div style="box-sizing: border-box; visibility: visible;"><div><img src="43开机部分常用客制化_files/Image [5].png" type="image/png"/></div></div><div style="box-sizing: border-box; visibility: visible;"><span style="color: rgb(53, 54, 48);"><span style="font-size: 12px;"><span style="font-family: RionaSans, Helvetica, 微軟雅黑, &apos;Microsoft YaHei&apos;, Song, PMingLiU, sans-serif;"><span style="box-sizing: border-box; font-size: small;">2：点击confirm pop框的ok按钮后才会进入下一个流程，及callback函数的调用</span></span></span></span></div><div style="box-sizing: border-box; visibility: visible;"><span style="color: rgb(53, 54, 48);"><span style="font-size: 12px;"><span style="font-family: RionaSans, Helvetica, 微軟雅黑, &apos;Microsoft YaHei&apos;, Song, PMingLiU, sans-serif;"><span style="box-sizing: border-box; font-size: small;">3：在资源文件中针对各个电量定义对应的pop 框显示文字：</span></span></span></span></div><div style="box-sizing: border-box; visibility: visible;"><div><img src="43开机部分常用客制化_files/Image [6].png" type="image/png"/></div></div><div style="box-sizing: border-box; visibility: visible;"><div><span style="color: rgb(53, 54, 48);"><span style="font-size: 12px;"><span style="font-family: RionaSans, Helvetica, 微軟雅黑, &apos;Microsoft YaHei&apos;, Song, PMingLiU, sans-serif;"><span style="box-sizing: border-box; font-size: small;"><span style="box-sizing: border-box; color: rgb(51, 102, 255);">注意</span>：开机流程请参考BootupFlow.c中的<span style="box-sizing: border-box; color: rgb(255, 0, 0);">g_mmi_bootup_main_flow</span></span></span></span></span></div></div></div></div></div></div></div></span>
</div></body></html> 