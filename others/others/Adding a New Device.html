<html>
<head>
  <title>Adding a New Device</title>
  <basefont face="Microsoft YaHei" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/301769 (zh-CN); Windows/6.3.9600 (Win64);"/>
  <style>
    body, td {
      font-family: Microsoft YaHei;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="1334"/>
<h1>Adding a New Device</h1>

<div>
<span><div style="padding: 2.2em 0px 0.2em; color: rgb(34, 34, 34); font-family: Roboto, sans-serif; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><div style="margin: 0px auto; width: 940px; clear: both; transition: all 0.25s ease-out; max-width: 940px; height: 41px; border-bottom-width: 1px; border-bottom-style: solid; border-color: rgb(204, 204, 204); position: relative;"><div style="display: inline; float: left; margin: -3px 30px 0px 0px; width: 140px; padding-right: 0px; border-right-width: 1px; border-right-style: solid; border-right-color: rgb(204, 204, 204);"><a href="http://source.android.com/index.html" style="color: rgb(37, 138, 175); text-decoration: none;"><img alt="Android Open Source Project" height="25" src="http://source.android.com/assets/images/sac_logo.png" style="border: 0px; vertical-align: middle; max-width: 100%;" width="123"></img></a></div><ul style="margin: -2px 10px 0px 0px; padding: 0px; display: inline; float: left; width: 520px; list-style-type: none;"><li style="margin: 0px 45px 5px 0px; display: block; float: left; transition: all 0.25s linear;"><a href="http://source.android.com/source/index.html" style="color: rgb(51, 181, 229); text-decoration: none; font-size: 16px;">Source</a></li><li style="margin: 0px 45px 5px 0px; display: block; float: left; transition: all 0.25s linear;"><a href="http://source.android.com/devices/index.html" style="color: rgb(51, 51, 51); text-decoration: none; font-size: 16px;">Devices</a></li><li style="margin: 0px 45px 5px 0px; display: block; float: left; transition: all 0.25s linear;"><a href="http://source.android.com/security/index.html" style="color: rgb(51, 51, 51); text-decoration: none; font-size: 16px;">Security</a></li><li style="margin: 0px 45px 5px 0px; display: block; float: left; transition: all 0.25s linear;"><a href="http://source.android.com/compatibility/index.html" style="color: rgb(51, 51, 51); text-decoration: none; font-size: 16px;">Compatibility</a></li></ul><div style="position: absolute; right: 6px; top: -9px; width: 40px; height: 35px; z-index: 99; overflow: hidden; opacity: 0; transform-origin: 100% 0% 0px; transition-property: -webkit-opacity; transition-duration: 0.25s; transition-timing-function: ease;"><div style="width: 228px; padding: 10px 20px 0px; background: url(http://source.android.com/assets/images/more_mid.png) repeat-y;"><div style="border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: rgb(204, 204, 204); font-weight: bold;">Android Sites</div><ul style="margin: 10px 10px 20px 0px; padding: 0px;"><li><a style="color: rgb(34, 34, 34) !important;">Android Open Source Project</a><a href="http://www.android.com/" style="color: rgb(37, 138, 175); text-decoration: none;">Android.com</a><a href="http://developer.android.com/" style="color: rgb(37, 138, 175); text-decoration: none;">Android Developers</a></li></ul><br/></div></div></div></div><div style="margin: 0px auto; width: 940px; clear: both; color: rgb(34, 34, 34); font-family: Roboto, sans-serif; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><div style="display: inline; float: left; margin-left: 0px; margin-right: 10px; width: 220px; min-height: 5px; margin-bottom: 1px; overflow: hidden;"><div style="outline: none; width: 220px; margin: 20px 0px 0px; overflow: hidden; padding: 0px; height: 922px; left: 450.5px;"><div style="overflow: hidden; position: relative; width: 220px; height: 922px;"><div style="position: absolute; overflow: hidden; width: 220px; padding: 0px; top: 0px;"><ul style="margin: 0px; padding: 0px 0px 30px; width: 216px;"><li style="margin: 0px; list-style-type: none; font-size: 14px; padding: 0px;"><div style="position: relative; margin-bottom: 1px; padding: 0px 30px 0px 0px;"><a href="http://source.android.com/source/index.html" style="color: rgb(51, 51, 51); text-decoration: none; word-wrap: break-word; display: block; font-weight: 500; padding: 10px 0px 10px 10px;">Overview</a></div></li><li style="margin: 0px; list-style-type: none; font-size: 14px; padding: 0px;"><div style="position: relative; margin-bottom: 1px; padding: 0px 30px 0px 0px;"><a href="http://source.android.com/source/requirements.html" style="color: rgb(51, 51, 51); text-decoration: none; word-wrap: break-word; display: block; font-weight: 500; padding: 10px 0px 10px 10px;">Downloading and Building</a></div></li><li style="margin: 0px; list-style-type: none; font-size: 14px; padding: 0px;"><div style="position: relative; margin-bottom: 1px; padding: 0px 30px 0px 0px; background: rgba(0, 0, 0, 0.0470588);"><a href="http://source.android.com/source/developing.html" style="color: rgb(51, 51, 51); text-decoration: none; word-wrap: break-word; display: block; font-weight: 500; padding: 10px 0px 10px 10px;">Developing</a></div></li><li style="list-style: none; display: inline"><ul style="margin: 0px; padding: 0px; display: block; overflow: hidden;"><li style="margin: 0px; list-style-type: none; font-size: 14px; padding: 0px; background: rgba(0, 0, 0, 0.027451);"><a href="http://source.android.com/source/using-repo.html" style="color: rgb(85, 85, 85); text-decoration: none; word-wrap: break-word; display: block; font-weight: normal; text-transform: none; padding: 7px 5px 7px 10px;">Using Repo</a></li><li style="margin: 0px; list-style-type: none; font-size: 14px; padding: 0px; background: rgba(0, 0, 0, 0.027451);"><a href="http://source.android.com/source/git-resources.html" style="color: rgb(85, 85, 85); text-decoration: none; word-wrap: break-word; display: block; font-weight: normal; text-transform: none; padding: 7px 5px 7px 10px;">Learning Git</a></li><li style="margin: 0px; list-style-type: none; font-size: 14px; padding: 0px; background: rgba(0, 0, 0, 0.027451);"><a href="http://source.android.com/source/add-device.html" style="color: rgb(0, 153, 204); text-decoration: none; word-wrap: break-word; display: block; font-weight: normal; text-transform: none; padding: 7px 5px 7px 10px;">Adding a New Device</a></li><li style="margin: 0px; list-style-type: none; font-size: 14px; padding: 0px 0px 5px; background: rgba(0, 0, 0, 0.027451);"><a href="http://source.android.com/source/64-bit-builds.html" style="color: rgb(85, 85, 85); text-decoration: none; word-wrap: break-word; display: block; font-weight: normal; text-transform: none; padding: 7px 5px 7px 10px;">Understanding 64-bit Builds</a></li></ul></li><li style="margin: 0px; list-style-type: none; font-size: 14px; padding: 0px;"><div style="position: relative; margin-bottom: 1px; padding: 0px 30px 0px 0px;"><a href="http://source.android.com/source/contributing.html" style="color: rgb(51, 51, 51); text-decoration: none; word-wrap: break-word; display: block; font-weight: 500; padding: 10px 0px 10px 10px;">Contributing</a></div></li><li style="margin: 0px; list-style-type: none; font-size: 14px; padding: 0px;"><div style="position: relative; margin-bottom: 1px; padding: 0px 30px 0px 0px;"><a href="http://source.android.com/source/community.html" style="color: rgb(51, 51, 51); text-decoration: none; word-wrap: break-word; display: block; font-weight: 500; padding: 10px 0px 10px 10px;">Community</a></div></li></ul></div></div></div></div><div style="display: inline; float: left; margin-left: 10px; margin-right: 0px; width: 700px;"><h1 style="color: rgb(51, 51, 51); font-size: 34px; margin: 36px 0px 27px; padding: 0px 0px 10px; font-weight: 300;">Adding a New Device</h1><div><div style="float: right; clear: right; margin: -27px 0px 0px 20px; padding: 0px 0px 20px;"><div style="font-size: 13px; width: 238px; border: 1px solid rgb(204, 204, 204); float: right;"><h2 style="color: rgb(51, 51, 51); font-size: inherit; margin: 10px 15px; padding: 0px; font-weight: 300; text-transform: uppercase; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: gainsboro;">IN THIS DOCUMENT</h2><ol style="margin: 0px 15px 15px; padding: 0px; font-size: inherit; list-style: none;"><li style="margin: 0px 0px 5px; font-size: inherit;"><a href="http://source.android.com/source/add-device.html#build-layers" style="color: rgb(37, 138, 175); text-decoration: none; font-size: inherit;">Understand Build Layers</a></li><li style="margin: 0px 0px 5px; font-size: inherit;"><a href="http://source.android.com/source/add-device.html#build-variants" style="color: rgb(37, 138, 175); text-decoration: none; font-size: inherit;">Use Build Variants</a></li><li style="margin: 0px 0px 5px; font-size: inherit;"><a href="http://source.android.com/source/add-device.html#build-a-product" style="color: rgb(37, 138, 175); text-decoration: none; font-size: inherit;">Build a Product</a><ol style="margin: 3px 0px 3px 15px; padding: 0px; font-size: inherit; list-style: none;"><li style="margin: 0px 0px 5px; font-size: inherit;"><a href="http://source.android.com/source/add-device.html#makefiles" style="color: rgb(37, 138, 175); text-decoration: none; font-size: inherit;">Write the Makefiles</a></li><li style="margin: 0px 0px 5px; font-size: inherit;"><a href="http://source.android.com/source/add-device.html#prod-def" style="color: rgb(37, 138, 175); text-decoration: none; font-size: inherit;">Set Product Definition Variables</a></li></ol></li></ol></div></div><p style="margin: 0px 0px 15px;">Use the information in this page to create the Makefiles for your device and product. Please note, unlike the other pages in this section, the contents here are applicable only when creating an entirely new device type and are intended for company build and product teams only.</p><h2 style="color: rgb(51, 51, 51); font-size: 26px; margin: 32px 0px 0px; padding: 0px; font-weight: 300;">Understand Build Layers</h2><hr style="height: 1px; margin: 5px 0px 20px; border: 0px; background: rgb(204, 204, 204);"/><p style="margin: 0px 0px 15px;">The build hierarchy includes the abstraction layers that correspond to the physical makeup of a device. These layers are described in the table below. Each layer relates to the one above it in a one-to-many relationship. For example, an architecture can have more than one board and each board can have more than one product. You may define an element in a given layer as a specialization of an element in the same layer, thus eliminating copying and simplifying maintenance.</p><table style="font-size: 1em; margin: 0.5em 1em 1em 0px; border-collapse: collapse; border-spacing: 0px; border: 0px; width: 699px; background-color: rgb(247, 247, 247);"><tbody><tr><th style="padding: 4px 12px; vertical-align: top; text-align: left; color: rgb(255, 255, 255); border: 1px solid rgb(221, 221, 221); font-weight: normal; background-color: rgb(153, 153, 153);">Layer</th><th style="padding: 4px 12px; vertical-align: top; text-align: left; color: rgb(255, 255, 255); border: 1px solid rgb(221, 221, 221); font-weight: normal; background-color: rgb(153, 153, 153);">Example</th><th style="padding: 4px 12px; vertical-align: top; text-align: left; color: rgb(255, 255, 255); border: 1px solid rgb(221, 221, 221); font-weight: normal; background-color: rgb(153, 153, 153);">Description</th></tr><tr><td style="padding: 4px 12px; vertical-align: top; text-align: left; border: 1px solid rgb(221, 221, 221); background-color: inherit;">Product</td><td style="padding: 4px 12px; vertical-align: top; text-align: left; border: 1px solid rgb(221, 221, 221); background-color: inherit;">myProduct, myProduct_eu, myProduct_eu_fr, j2, sdk</td><td style="padding: 4px 12px; vertical-align: top; text-align: left; border: 1px solid rgb(221, 221, 221); background-color: inherit;"><p style="margin: 0px;">The product layer defines the feature specification of a shipping product such as the modules to build, locales supported, and the configuration for various locales. In other words, this is the name of the overall product. Product-specific variables are defined in product definition Makefiles. A product can inherit from other product definitions, which simplifies maintenance. A common method is to create a base product that contains features that apply for all products, then creating product variants based on that base product. For example, you can have two products that differ only by their radios (CDMA vs GSM) inherit from the same base product that does not define a radio.</p></td></tr><tr><td style="padding: 4px 12px; vertical-align: top; text-align: left; border: 1px solid rgb(221, 221, 221); background-color: inherit;">Board/Device</td><td style="padding: 4px 12px; vertical-align: top; text-align: left; border: 1px solid rgb(221, 221, 221); background-color: inherit;">sardine, trout, goldfish</td><td style="padding: 4px 12px; vertical-align: top; text-align: left; border: 1px solid rgb(221, 221, 221); background-color: inherit;">The device/board layer represents the physical layer of plastic on the device (i.e. the industrial design of the device). For example, North American devices probably include QWERTY keyboards whereas devices sold in France probably include AZERTY keyboards. This layer also represents the bare schematics of a product. These include the peripherals on the board and their configuration. The names used are merely codes for different board/device configurations.</td></tr><tr><td style="padding: 4px 12px; vertical-align: top; text-align: left; border: 1px solid rgb(221, 221, 221); background-color: inherit;">Arch</td><td style="padding: 4px 12px; vertical-align: top; text-align: left; border: 1px solid rgb(221, 221, 221); background-color: inherit;">arm, x86, mips, arm64, x86_64, mips64</td><td style="padding: 4px 12px; vertical-align: top; text-align: left; border: 1px solid rgb(221, 221, 221); background-color: inherit;">The architecture layer describes the processor configuration and ABI (Application Binary Interface) running on the board.</td></tr></tbody></table><h2 style="color: rgb(51, 51, 51); font-size: 26px; margin: 32px 0px 0px; padding: 0px; font-weight: 300;">Use Build Variants</h2><hr style="height: 1px; margin: 5px 0px 20px; border: 0px; background: rgb(204, 204, 204);"/><p style="margin: 0px 0px 15px;">When building for a particular product, it's often useful to have minor variations on what is ultimately the final release build. In a module definition, the module can specify tags with <code style="font-size: 13px; color: rgb(0, 102, 0); font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-family: monospace;">LOCAL_MODULE_TAGS</code>, which can be one or more values of <code style="font-size: 13px; color: rgb(0, 102, 0); font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-family: monospace;">optional</code> (default), <code style="font-size: 13px; color: rgb(0, 102, 0); font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-family: monospace;">debug</code>, <code style="font-size: 13px; color: rgb(0, 102, 0); font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-family: monospace;">eng</code>.</p><p style="margin: 0px 0px 15px;">If a module doesn't specify a tag (by <code style="font-size: 13px; color: rgb(0, 102, 0); font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-family: monospace;">LOCAL_MODULE_TAGS</code>), its tag defaults to <code style="font-size: 13px; color: rgb(0, 102, 0); font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-family: monospace;">optional</code>. An optional module is installed only if it is required by product configuration with <code style="font-size: 13px; color: rgb(0, 102, 0); font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-family: monospace;">PRODUCT_PACKAGES</code>.</p><p style="margin: 0px 0px 15px;">These are the currently-defined build variants:</p><table border="1" style="font-size: 1em; margin: 0.5em 1em 1em 0px; border-collapse: collapse; border-spacing: 0px; border: 0px; width: 699px; background-color: rgb(247, 247, 247);"><tbody><tr><td style="padding: 4px 12px; vertical-align: top; text-align: left; border: 1px solid rgb(221, 221, 221); background-color: inherit;"><code style="font-size: 13px; color: rgb(0, 102, 0); font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-family: monospace; margin-bottom: 0px;">eng</code></td><td style="padding: 4px 12px; vertical-align: top; text-align: left; border: 1px solid rgb(221, 221, 221); background-color: inherit;">This is the default flavor.
<ul style="margin: 0px 0px 0px 18px; padding: 0px;"><li style="margin: 0px 0px 5px;">Installs modules tagged with: <code style="font-size: 13px; color: rgb(0, 102, 0); font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-family: monospace;">eng</code> and/or <code style="font-size: 13px; color: rgb(0, 102, 0); font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-family: monospace; margin-bottom: 0px;">debug</code>.</li><li style="margin: 0px 0px 5px;">Installs modules according to the product definition files, in addition to tagged modules.</li><li style="margin: 0px 0px 5px;"><code style="font-size: 13px; color: rgb(0, 102, 0); font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-family: monospace; margin-bottom: 0px;">ro.secure=0</code></li><li style="margin: 0px 0px 5px;"><code style="font-size: 13px; color: rgb(0, 102, 0); font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-family: monospace; margin-bottom: 0px;">ro.debuggable=1</code></li><li style="margin: 0px 0px 5px;"><code style="font-size: 13px; color: rgb(0, 102, 0); font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-family: monospace; margin-bottom: 0px;">ro.kernel.android.checkjni=1</code></li><li style="margin: 0px;"><code style="font-size: 13px; color: rgb(0, 102, 0); font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-family: monospace; margin-bottom: 0px;">adb</code> is enabled by default.</li></ul></td></tr><tr><td style="padding: 4px 12px; vertical-align: top; text-align: left; border: 1px solid rgb(221, 221, 221); background-color: inherit;"><code style="font-size: 13px; color: rgb(0, 102, 0); font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-family: monospace; margin-bottom: 0px;">user</code></td><td style="padding: 4px 12px; vertical-align: top; text-align: left; border: 1px solid rgb(221, 221, 221); background-color: inherit;">This is the flavor intended to be the final release bits.
<ul style="margin: 0px 0px 0px 18px; padding: 0px;"><li style="margin: 0px 0px 5px;">Installs modules tagged with <code style="font-size: 13px; color: rgb(0, 102, 0); font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-family: monospace; margin-bottom: 0px;">user</code>.</li><li style="margin: 0px 0px 5px;">Installs modules according to the product definition files, in addition to tagged modules.</li><li style="margin: 0px 0px 5px;"><code style="font-size: 13px; color: rgb(0, 102, 0); font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-family: monospace; margin-bottom: 0px;">ro.secure=1</code></li><li style="margin: 0px 0px 5px;"><code style="font-size: 13px; color: rgb(0, 102, 0); font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-family: monospace; margin-bottom: 0px;">ro.debuggable=0</code></li><li style="margin: 0px;"><code style="font-size: 13px; color: rgb(0, 102, 0); font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-family: monospace; margin-bottom: 0px;">adb</code> is disabled by default.</li></ul></td></tr><tr><td style="padding: 4px 12px; vertical-align: top; text-align: left; border: 1px solid rgb(221, 221, 221); background-color: inherit;"><code style="font-size: 13px; color: rgb(0, 102, 0); font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-family: monospace; margin-bottom: 0px;">userdebug</code></td><td style="padding: 4px 12px; vertical-align: top; text-align: left; border: 1px solid rgb(221, 221, 221); background-color: inherit;">The same as <code style="font-size: 13px; color: rgb(0, 102, 0); font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-family: monospace;">user</code>, except:
<ul style="margin: 0px 0px 0px 18px; padding: 0px;"><li style="margin: 0px 0px 5px;">Also installs modules tagged with <code style="font-size: 13px; color: rgb(0, 102, 0); font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-family: monospace; margin-bottom: 0px;">debug</code>.</li><li style="margin: 0px 0px 5px;"><code style="font-size: 13px; color: rgb(0, 102, 0); font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-family: monospace; margin-bottom: 0px;">ro.debuggable=1</code></li><li style="margin: 0px;"><code style="font-size: 13px; color: rgb(0, 102, 0); font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-family: monospace; margin-bottom: 0px;">adb</code> is enabled by default.</li></ul></td></tr></tbody></table><h2 style="color: rgb(51, 51, 51); font-size: 26px; margin: 32px 0px 0px; padding: 0px; font-weight: 300;">Build a Product</h2><hr style="height: 1px; margin: 5px 0px 20px; border: 0px; background: rgb(204, 204, 204);"/><p style="margin: 0px 0px 15px;">There are many ways to organize the source files for your device. We'll briefly go over how the Nexus 6 implementation was organized as an example, but you can organize your source files and build the way you see fit.</p><p style="margin: 0px 0px 15px;">Nexus 6 was implemented with a main device configuration named <code style="font-size: 13px; color: rgb(0, 102, 0); font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-family: monospace;">shamu</code>. From this device configuration, a product is created with a product definition Makefile that declares product-specific information about the device such as the name and model. You can view the <code style="font-size: 13px; color: rgb(0, 102, 0); font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-family: monospace;">device/moto/shamu</code> directory to see how all of this is setup.</p><h3 style="color: rgb(51, 51, 51); font-size: 21px; font-weight: 400; margin: 21px 0px 14px;">Write the Makefiles</h3><p style="margin: 0px 0px 15px;">The following steps describe how to set up product Makefiles in a way similar to that of the Nexus 6 product line:</p><ol style="margin: 0px 0px 15px 18px; padding: 0px;"><li style="margin: 0px 0px 5px;">Create a <code style="font-size: 13px; color: rgb(0, 102, 0); font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-family: monospace;">device/&lt;company_name&gt;/&lt;device_name&gt;</code> directory for your product. For example, <code style="font-size: 13px; color: rgb(0, 102, 0); font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-family: monospace;">device/moto/shamu</code>. This directory will contain source code for your device along with the Makefiles to build them.</li><li style="margin: 0px 0px 5px;">Create a <code style="font-size: 13px; color: rgb(0, 102, 0); font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-family: monospace;">device.mk</code> Makefile that declares the files and modules needed for the device. For an example, see<code style="font-size: 13px; color: rgb(0, 102, 0); font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-family: monospace;">device/moto/shamu/device.mk</code>.</li><li style="margin: 0px 0px 5px;">Create a product definition Makefile to create a specific product based on the device. The following Makefile is taken from <code style="font-size: 13px; color: rgb(0, 102, 0); font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-family: monospace;">device/moto/shamu/aosp_shamu.mk</code> as an example. Notice the product is inheriting from the<code style="font-size: 13px; color: rgb(0, 102, 0); font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-family: monospace;">device/moto/shamu/device.mk</code> and <code style="font-size: 13px; color: rgb(0, 102, 0); font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-family: monospace;">vendor/moto/shamu/device-vendor.mk</code> files via the Makefile while also declaring the product-specific information such as name, brand, and model.
<pre style="font-size: 13px; margin: 5px 0px; color: rgb(0, 102, 0); font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-family: monospace; padding: 1em; overflow: auto; border: 1px solid rgb(221, 221, 221); background: rgb(247, 247, 247);"><span style="color: rgb(136, 0, 0);"># Inherit from the common Open Source product configuration</span><span style="color: rgb(0, 0, 0);"><br/>$</span><span style="color: rgb(102, 102, 0);">(</span><span style="color: rgb(0, 0, 0);">call inherit</span><span style="color: rgb(102, 102, 0);">-</span><span style="color: rgb(0, 0, 0);">product</span><span style="color: rgb(102, 102, 0);">,</span><span style="color: rgb(0, 0, 0);"> $</span><span style="color: rgb(102, 102, 0);">(</span><span style="color: rgb(0, 0, 0);">SRC_TARGET_DIR</span><span style="color: rgb(102, 102, 0);">)/</span><span style="color: rgb(0, 0, 0);">product</span><span style="color: rgb(102, 102, 0);">/</span><span style="color: rgb(0, 0, 0);">aosp_base_telephony</span><span style="color: rgb(102, 102, 0);">.</span><span style="color: rgb(0, 0, 0);">mk</span><span style="color: rgb(102, 102, 0);">)</span><span style="color: rgb(0, 0, 0);"><br/><br/>PRODUCT_NAME </span><span style="color: rgb(102, 102, 0);">:=</span><span style="color: rgb(0, 0, 0);"> aosp_shamu<br/>PRODUCT_DEVICE </span><span style="color: rgb(102, 102, 0);">:=</span><span style="color: rgb(0, 0, 0);"> shamu<br/>PRODUCT_BRAND </span><span style="color: rgb(102, 102, 0);">:=</span><span style="color: rgb(0, 0, 0);"> </span><span style="color: rgb(102, 0, 102);">Android</span><span style="color: rgb(0, 0, 0);"><br/>PRODUCT_MODEL </span><span style="color: rgb(102, 102, 0);">:=</span><span style="color: rgb(0, 0, 0);"> AOSP on </span><span style="color: rgb(102, 0, 102);">Shamu</span><span style="color: rgb(0, 0, 0);"><br/>PRODUCT_MANUFACTURER </span><span style="color: rgb(102, 102, 0);">:=</span><span style="color: rgb(0, 0, 0);"> motorola<br/>PRODUCT_RESTRICT_VENDOR_FILES </span><span style="color: rgb(102, 102, 0);">:=</span><span style="color: rgb(0, 0, 0);"> </span><span style="color: rgb(0, 0, 136);">true</span><span style="color: rgb(0, 0, 0);"><br/><br/>$</span><span style="color: rgb(102, 102, 0);">(</span><span style="color: rgb(0, 0, 0);">call inherit</span><span style="color: rgb(102, 102, 0);">-</span><span style="color: rgb(0, 0, 0);">product</span><span style="color: rgb(102, 102, 0);">,</span><span style="color: rgb(0, 0, 0);"> device</span><span style="color: rgb(102, 102, 0);">/</span><span style="color: rgb(0, 0, 0);">moto</span><span style="color: rgb(102, 102, 0);">/</span><span style="color: rgb(0, 0, 0);">shamu</span><span style="color: rgb(102, 102, 0);">/</span><span style="color: rgb(0, 0, 0);">device</span><span style="color: rgb(102, 102, 0);">.</span><span style="color: rgb(0, 0, 0);">mk</span><span style="color: rgb(102, 102, 0);">)</span><span style="color: rgb(0, 0, 0);"><br/>$</span><span style="color: rgb(102, 102, 0);">(</span><span style="color: rgb(0, 0, 0);">call inherit</span><span style="color: rgb(102, 102, 0);">-</span><span style="color: rgb(0, 0, 0);">product</span><span style="color: rgb(102, 102, 0);">-</span><span style="color: rgb(0, 0, 136);">if</span><span style="color: rgb(102, 102, 0);">-</span><span style="color: rgb(0, 0, 0);">exists</span><span style="color: rgb(102, 102, 0);">,</span><span style="color: rgb(0, 0, 0);"> vendor</span><span style="color: rgb(102, 102, 0);">/</span><span style="color: rgb(0, 0, 0);">moto</span><span style="color: rgb(102, 102, 0);">/</span><span style="color: rgb(0, 0, 0);">shamu</span><span style="color: rgb(102, 102, 0);">/</span><span style="color: rgb(0, 0, 0);">device</span><span style="color: rgb(102, 102, 0);">-</span><span style="color: rgb(0, 0, 0);">vendor</span><span style="color: rgb(102, 102, 0);">.</span><span style="color: rgb(0, 0, 0);">mk</span><span style="color: rgb(102, 102, 0);">)</span><span style="color: rgb(0, 0, 0);"><br/><br/>PRODUCT_NAME </span><span style="color: rgb(102, 102, 0);">:=</span><span style="color: rgb(0, 0, 0);"> aosp_shamu<br/><br/>PRODUCT_PACKAGES </span><span style="color: rgb(102, 102, 0);">+=</span><span style="color: rgb(0, 0, 0);"> </span><span style="color: rgb(102, 102, 0);">\</span><span style="color: rgb(0, 0, 0);"><br/>    </span><span style="color: rgb(102, 0, 102);">Launcher3</span></pre><p style="margin: 5px 0px;">See <a href="http://source.android.com/source/add-device.html#prod-def" style="color: rgb(37, 138, 175); text-decoration: none;">Product Definition Variables</a> for additional product-specific variables you can add to your Makefiles.</p></li><li style="margin: 0px 0px 5px;">Create an <code style="font-size: 13px; color: rgb(0, 102, 0); font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-family: monospace;">AndroidProducts.mk</code> file that points to the product's Makefiles. In this example, only the product definition Makefile is needed. The example below is from <code style="font-size: 13px; color: rgb(0, 102, 0); font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-family: monospace;">device/moto/shamu/AndroidProducts.mk</code>:
<pre style="font-size: 13px; margin: 5px 0px; color: rgb(0, 102, 0); font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-family: monospace; padding: 1em; overflow: auto; border: 1px solid rgb(221, 221, 221); background: rgb(247, 247, 247);"><span style="color: rgb(136, 0, 0);">#</span><span style="color: rgb(0, 0, 0);"><br/></span><span style="color: rgb(136, 0, 0);"># This file should set PRODUCT_MAKEFILES to a list of product makefiles</span><span style="color: rgb(0, 0, 0);"><br/></span><span style="color: rgb(136, 0, 0);"># to expose to the build system.  LOCAL_DIR will already be set to</span><span style="color: rgb(0, 0, 0);"><br/></span><span style="color: rgb(136, 0, 0);"># the directory containing this file.</span><span style="color: rgb(0, 0, 0);"><br/></span><span style="color: rgb(136, 0, 0);">#</span><span style="color: rgb(0, 0, 0);"><br/></span><span style="color: rgb(136, 0, 0);"># This file may not rely on the value of any variable other than</span><span style="color: rgb(0, 0, 0);"><br/></span><span style="color: rgb(136, 0, 0);"># LOCAL_DIR; do not use any conditionals, and do not look up the</span><span style="color: rgb(0, 0, 0);"><br/></span><span style="color: rgb(136, 0, 0);"># value of any variable that isn't set in this file or in a file that</span><span style="color: rgb(0, 0, 0);"><br/></span><span style="color: rgb(136, 0, 0);"># it includes.</span><span style="color: rgb(0, 0, 0);"><br/></span><span style="color: rgb(136, 0, 0);">#</span><span style="color: rgb(0, 0, 0);"><br/><br/>PRODUCT_MAKEFILES </span><span style="color: rgb(102, 102, 0);">:=</span><span style="color: rgb(0, 0, 0);"> </span><span style="color: rgb(102, 102, 0);">\</span><span style="color: rgb(0, 0, 0);"><br/>    $</span><span style="color: rgb(102, 102, 0);">(</span><span style="color: rgb(0, 0, 0);">LOCAL_DIR</span><span style="color: rgb(102, 102, 0);">)/</span><span style="color: rgb(0, 0, 0);">aosp_shamu</span><span style="color: rgb(102, 102, 0);">.</span><span style="color: rgb(0, 0, 0);">mk</span></pre></li><li style="margin: 0px 0px 5px;">Create a <code style="font-size: 13px; color: rgb(0, 102, 0); font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-family: monospace;">BoardConfig.mk</code> Makefile that contains board-specific configurations. For an example, see<code style="font-size: 13px; color: rgb(0, 102, 0); font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-family: monospace;">device/moto/shamu/BoardConfig.mk</code>.</li><li style="margin: 0px 0px 5px;">Create a <code style="font-size: 13px; color: rgb(0, 102, 0); font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-family: monospace;">vendorsetup.sh</code> file to add your product (a &quot;lunch combo&quot;) to the build along with a <a href="http://source.android.com/source/add-device.html#build-variants" style="color: rgb(37, 138, 175); text-decoration: none;">build variant</a>separated by a dash. For example:
<pre style="font-size: 13px; margin: 5px 0px; color: rgb(0, 102, 0); font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-family: monospace; padding: 1em; overflow: auto; border: 1px solid rgb(221, 221, 221); background: rgb(247, 247, 247);"><span style="color: rgb(0, 0, 0);">add_lunch_combo </span><span style="color: rgb(0, 136, 0);">&lt;product_name&gt;</span><span style="color: rgb(102, 102, 0);">-</span><span style="color: rgb(0, 0, 0);">userdebug</span></pre></li><li style="margin: 0px 0px 5px;">At this point, you can create more product variants based on the same device.</li></ol><h3 style="color: rgb(51, 51, 51); font-size: 21px; font-weight: 400; margin: 21px 0px 14px;">Set Product Definition Variables</h3><p style="margin: 0px 0px 15px;">Product-specific variables are defined in the product's Makefile. Variables maintained in a product definition files include:</p><table style="font-size: 1em; margin: 0.5em 1em 1em 0px; border-collapse: collapse; border-spacing: 0px; border: 0px; width: 699px; background-color: rgb(247, 247, 247);"><tbody><tr><th style="padding: 4px 12px; vertical-align: top; text-align: left; color: rgb(255, 255, 255); border: 1px solid rgb(221, 221, 221); font-weight: normal; background-color: rgb(153, 153, 153);">Parameter</th><th style="padding: 4px 12px; vertical-align: top; text-align: left; color: rgb(255, 255, 255); border: 1px solid rgb(221, 221, 221); font-weight: normal; background-color: rgb(153, 153, 153);">Description</th><th style="padding: 4px 12px; vertical-align: top; text-align: left; color: rgb(255, 255, 255); border: 1px solid rgb(221, 221, 221); font-weight: normal; background-color: rgb(153, 153, 153);">Example</th></tr><tr><td style="padding: 4px 12px; vertical-align: top; text-align: left; border: 1px solid rgb(221, 221, 221); background-color: inherit;">PRODUCT_AAPT_CONFIG</td><td style="padding: 4px 12px; vertical-align: top; text-align: left; border: 1px solid rgb(221, 221, 221); background-color: inherit;"><code style="font-size: 13px; color: rgb(0, 102, 0); font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-family: monospace; margin-bottom: 0px;">aapt</code> configurations to use when creating packages</td><td style="padding: 4px 12px; vertical-align: top; text-align: left; border: 1px solid rgb(221, 221, 221); background-color: inherit;"><br/></td></tr><tr><td style="padding: 4px 12px; vertical-align: top; text-align: left; border: 1px solid rgb(221, 221, 221); background-color: inherit;">PRODUCT_BRAND</td><td style="padding: 4px 12px; vertical-align: top; text-align: left; border: 1px solid rgb(221, 221, 221); background-color: inherit;">The brand (e.g., carrier) the software is customized for, if any</td><td style="padding: 4px 12px; vertical-align: top; text-align: left; border: 1px solid rgb(221, 221, 221); background-color: inherit;"><br/></td></tr><tr><td style="padding: 4px 12px; vertical-align: top; text-align: left; border: 1px solid rgb(221, 221, 221); background-color: inherit;">PRODUCT_CHARACTERISTICS</td><td style="padding: 4px 12px; vertical-align: top; text-align: left; border: 1px solid rgb(221, 221, 221); background-color: inherit;"><code style="font-size: 13px; color: rgb(0, 102, 0); font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-family: monospace; margin-bottom: 0px;">aapt</code> characteristics to allow adding variant-specific resources to a package.</td><td style="padding: 4px 12px; vertical-align: top; text-align: left; border: 1px solid rgb(221, 221, 221); background-color: inherit;">tablet,nosdcard</td></tr><tr><td style="padding: 4px 12px; vertical-align: top; text-align: left; border: 1px solid rgb(221, 221, 221); background-color: inherit;">PRODUCT_COPY_FILES</td><td style="padding: 4px 12px; vertical-align: top; text-align: left; border: 1px solid rgb(221, 221, 221); background-color: inherit;">List of words like<code style="font-size: 13px; color: rgb(0, 102, 0); font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-family: monospace; margin-bottom: 0px;">source_path:destination_path</code>. The file at the source path should be copied to the destination path when building this product. The rules for the copy steps are defined in config/Makefile</td><td style="padding: 4px 12px; vertical-align: top; text-align: left; border: 1px solid rgb(221, 221, 221); background-color: inherit;"><br/></td></tr><tr><td style="padding: 4px 12px; vertical-align: top; text-align: left; border: 1px solid rgb(221, 221, 221); background-color: inherit;">PRODUCT_DEVICE</td><td style="padding: 4px 12px; vertical-align: top; text-align: left; border: 1px solid rgb(221, 221, 221); background-color: inherit;">Name of the industrial design. This is also the board name, and the build system uses it to locate the <code style="font-size: 13px; color: rgb(0, 102, 0); font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-family: monospace; margin-bottom: 0px;">BoardConfig.mk.</code></td><td style="padding: 4px 12px; vertical-align: top; text-align: left; border: 1px solid rgb(221, 221, 221); background-color: inherit;"><code style="font-size: 13px; color: rgb(0, 102, 0); font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-family: monospace; margin-bottom: 0px;">tuna</code></td></tr><tr><td style="padding: 4px 12px; vertical-align: top; text-align: left; border: 1px solid rgb(221, 221, 221); background-color: inherit;">PRODUCT_LOCALES</td><td style="padding: 4px 12px; vertical-align: top; text-align: left; border: 1px solid rgb(221, 221, 221); background-color: inherit;">A space-separated list of two-letter language code, two-letter country code pairs that describe several settings for the user, such as the UI language and time, date and currency formatting. The first locale listed in PRODUCT_LOCALES is used as the product's default locale.</td><td style="padding: 4px 12px; vertical-align: top; text-align: left; border: 1px solid rgb(221, 221, 221); background-color: inherit;"><code style="font-size: 13px; color: rgb(0, 102, 0); font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-family: monospace; margin-bottom: 0px;">en_GB de_DE es_ES fr_CA</code></td></tr><tr><td style="padding: 4px 12px; vertical-align: top; text-align: left; border: 1px solid rgb(221, 221, 221); background-color: inherit;">PRODUCT_MANUFACTURER</td><td style="padding: 4px 12px; vertical-align: top; text-align: left; border: 1px solid rgb(221, 221, 221); background-color: inherit;">Name of the manufacturer</td><td style="padding: 4px 12px; vertical-align: top; text-align: left; border: 1px solid rgb(221, 221, 221); background-color: inherit;"><code style="font-size: 13px; color: rgb(0, 102, 0); font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-family: monospace; margin-bottom: 0px;">acme</code></td></tr><tr><td style="padding: 4px 12px; vertical-align: top; text-align: left; border: 1px solid rgb(221, 221, 221); background-color: inherit;">PRODUCT_MODEL</td><td style="padding: 4px 12px; vertical-align: top; text-align: left; border: 1px solid rgb(221, 221, 221); background-color: inherit;">End-user-visible name for the end product</td><td style="padding: 4px 12px; vertical-align: top; text-align: left; border: 1px solid rgb(221, 221, 221); background-color: inherit;"><br/></td></tr><tr><td style="padding: 4px 12px; vertical-align: top; text-align: left; border: 1px solid rgb(221, 221, 221); background-color: inherit;">PRODUCT_NAME</td><td style="padding: 4px 12px; vertical-align: top; text-align: left; border: 1px solid rgb(221, 221, 221); background-color: inherit;">End-user-visible name for the overall product. Appears in the Settings &gt; About screen.</td><td style="padding: 4px 12px; vertical-align: top; text-align: left; border: 1px solid rgb(221, 221, 221); background-color: inherit;"><br/></td></tr><tr><td style="padding: 4px 12px; vertical-align: top; text-align: left; border: 1px solid rgb(221, 221, 221); background-color: inherit;">PRODUCT_OTA_PUBLIC_KEYS</td><td style="padding: 4px 12px; vertical-align: top; text-align: left; border: 1px solid rgb(221, 221, 221); background-color: inherit;">List of Over the Air (OTA) public keys for the product</td><td style="padding: 4px 12px; vertical-align: top; text-align: left; border: 1px solid rgb(221, 221, 221); background-color: inherit;"><br/></td></tr><tr><td style="padding: 4px 12px; vertical-align: top; text-align: left; border: 1px solid rgb(221, 221, 221); background-color: inherit;">PRODUCT_PACKAGES</td><td style="padding: 4px 12px; vertical-align: top; text-align: left; border: 1px solid rgb(221, 221, 221); background-color: inherit;">Lists the APKs and modules to install.</td><td style="padding: 4px 12px; vertical-align: top; text-align: left; border: 1px solid rgb(221, 221, 221); background-color: inherit;"><code style="font-size: 13px; color: rgb(0, 102, 0); font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-family: monospace; margin-bottom: 0px;">Calendar Contacts</code></td></tr><tr><td style="padding: 4px 12px; vertical-align: top; text-align: left; border: 1px solid rgb(221, 221, 221); background-color: inherit;">PRODUCT_PACKAGE_OVERLAYS</td><td style="padding: 4px 12px; vertical-align: top; text-align: left; border: 1px solid rgb(221, 221, 221); background-color: inherit;">Indicate whether to use default resources or add any product specific overlays</td><td style="padding: 4px 12px; vertical-align: top; text-align: left; border: 1px solid rgb(221, 221, 221); background-color: inherit;"><code style="font-size: 13px; color: rgb(0, 102, 0); font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-family: monospace; margin-bottom: 0px;">vendor/acme/overlay</code></td></tr><tr><td style="padding: 4px 12px; vertical-align: top; text-align: left; border: 1px solid rgb(221, 221, 221); background-color: inherit;">PRODUCT_PROPERTY_OVERRIDES</td><td style="padding: 4px 12px; vertical-align: top; text-align: left; border: 1px solid rgb(221, 221, 221); background-color: inherit;">List of system property assignments in the format &quot;key=value&quot;</td><td style="padding: 4px 12px; vertical-align: top; text-align: left; border: 1px solid rgb(221, 221, 221); background-color: inherit;"><br/></td></tr></tbody></table></div><div style="margin: 10px auto 0px; width: auto; clear: both; font-size: 11px; color: rgb(153, 153, 153); padding: 15px 0px;"><div style="margin: 0px 0px 0px 10px; font-size: 14px; float: right !important;"><a href="http://source.android.com/source/add-device.html#" style="border-image-source: initial; border-image-slice: initial; border-image-width: initial; border-image-outset: initial; border-image-repeat: initial; border-radius: 2px; cursor: pointer; display: inline-block; border: 1px solid rgb(57, 144, 171); color: rgb(255, 255, 255); margin-right: 16px; font-weight: 400; min-width: 54px; outline: 0px; padding: 8px 15px; text-align: center; text-decoration: none; background-image: -webkit-linear-gradient(top, rgb(47, 173, 219), rgb(0, 153, 204)); background-color: rgb(0, 153, 204);">Send Feedback</a></div><div>Except as noted, this content is licensed under <a href="http://creativecommons.org/licenses/by/2.5/" style="color: rgb(37, 138, 175); text-decoration: none;">Creative Commons Attribution 2.5</a>. For details and restrictions, see the <a href="http://source.android.com/license.html" style="color: rgb(37, 138, 175); text-decoration: none;">Content License</a>.</div><div style="margin: 0px 0px 15px;"><div><a href="http://source.android.com/source/index.html" style="color: rgb(37, 138, 175); text-decoration: none;">About Android</a>  |  <a href="http://source.android.com/source/community.html" style="color: rgb(37, 138, 175); text-decoration: none;">Community</a>  |  <a href="http://source.android.com/legal.html" style="color: rgb(37, 138, 175); text-decoration: none;">Legal</a>  | </div></div></div></div></div></span>
</div></body></html> 