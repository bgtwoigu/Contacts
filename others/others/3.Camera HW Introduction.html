<html>
<head>
  <title>3.Camera HW Introduction</title>
  <basefont face="Microsoft YaHei" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/301769 (zh-CN); Windows/6.3.9600 (Win64);"/>
  <style>
    body, td {
      font-family: Microsoft YaHei;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="409"/>
<h1>3.Camera HW Introduction</h1>

<div>
<span><div><p style="margin: 0cm 0cm 0pt;"><span style="font-family: 宋体; color: #4c4c4c; font-size: 12pt;">本部分主要介绍平台支持的</span><span style="font-family: 宋体; color: #4c4c4c; font-size: 12pt;">Image Sensor</span><span style="font-family: 宋体; color: #4c4c4c; font-size: 12pt;">类型，硬件接口以及常见基本概念</span></p><p style="margin: 0cm 0cm 0pt;"><span style="font-family: 宋体; color: #4c4c4c; font-size: 12pt;"><span style="font-family: 宋体;">平台通用的注意事项请参考DCC文件:<br clear="none"/>MediaTek DCC &gt; External Document &gt; HW &gt; Common Design Notes &gt; Camera &gt; Common<br clear="none"/>各平台的注意事项请参考各平台Design Notes的camera 章节</span></span></p><p style="margin: 0cm 0cm 0pt 18.75pt;"><strong><span style="color: red; font-size: 12pt;"><span>1，</span></span></strong><strong><span style="color: red; font-size: 12pt;">Image Sensor</span></strong><strong><span style="font-family: 宋体; color: red; font-size: 12pt;">类型</span></strong></p><p style="margin: 0cm 0cm 0pt 36.75pt;"><strong><span style="color: black;"><span>a)     </span></span></strong><strong><span style="color: black;">YUV Sensor</span></strong></p><p style="margin: 0cm 0cm 0pt 36.75pt;"><span style="color: black;">YUV Sensor</span><span style="font-family: 宋体; color: black;">输出的</span><span style="color: black;">Data</span><span style="font-family: 宋体; color: black;">格式为</span><span style="color: black;">YUV</span><span style="font-family: 宋体; color: black;">，图像的效果处理使用</span><span style="color: black;">Sensor</span><span style="font-family: 宋体; color: black;">内部的</span><span style="color: black;">ISP</span><span style="font-family: 宋体; color: black;">，</span><span style="color: black;">BB</span><span style="font-family: 宋体; color: black;">端接收</span><span style="color: black;">YUV</span><span style="font-family: 宋体; color: black;">格式的</span><span style="color: black;">data</span><span style="font-family: 宋体; color: black;">后只进行格式的转换，效果方面不进行处理，由于</span><span style="color: black;">Sensor</span><span style="font-family: 宋体; color: black;">内部的</span><span style="color: black;">ISP</span><span style="font-family: 宋体; color: black;">处理能力有限，且</span><span style="color: black;">YUV Sensor</span><span style="font-family: 宋体; color: black;">的数据量比较大（</span><span style="color: black;">YUV422</span><span style="font-family: 宋体; color: black;">的格式</span><span style="color: black;">1</span><span style="font-family: 宋体; color: black;">个</span><span style="color: black;">pixel2</span><span style="font-family: 宋体; color: black;">个</span><span style="color: black;">byte</span><span style="font-family: 宋体; color: black;">），一般</span><span style="color: black;">Size</span><span style="font-family: 宋体; color: black;">都比较小，常见的YUV sensor都是</span><span style="color: black;">5M以下</span></p><p style="margin: 0cm 0cm 0pt 36.75pt;"><strong><span style="color: black;"><span>b)    </span></span></strong><strong><span style="color: black;">Raw Sensor</span></strong></p><p style="margin: 0cm 0cm 0pt 36.75pt;"><span style="color: black;">Raw Sensor</span><span style="font-family: 宋体; color: black;">输出的</span><span style="color: black;">Data</span><span style="font-family: 宋体; color: black;">格式为</span><span style="color: black;">Raw</span><span style="font-family: 宋体; color: black;">，图像的效果处理使用</span><span style="color: black;">BB</span><span style="font-family: 宋体; color: black;">端的</span><span style="color: black;">ISP</span><span style="font-family: 宋体; color: black;">，</span><span style="color: black;">BB</span><span style="font-family: 宋体; color: black;">端接收</span><span style="color: black;">Raw data</span><span style="font-family: 宋体; color: black;">后进行一系列的图像处理（</span><span style="color: black;">OB</span><span style="font-family: 宋体; color: black;">，</span><span style="color: black;">Shading</span><span style="font-family: 宋体; color: black;">，</span><span style="color: black;">AWB</span><span style="font-family: 宋体; color: black;">，</span><span style="color: black;">Gamma</span><span style="font-family: 宋体; color: black;">，</span><span style="color: black;">EE</span><span style="font-family: 宋体; color: black;">，</span><span style="color: black;">ANR</span><span style="font-family: 宋体; color: black;">等），效果方面由</span><span style="color: black;">BB</span><span style="font-family: 宋体; color: black;">端控制，需要针对不同的模组进行效果调试，</span><span style="color: black;">Raw sensor</span><span style="font-family: 宋体; color: black;">是目前的主流，数据量比YUV Sensor小（RAW10 格式的sensor 1个pixel 10个bit）使用平台ISP处理，能支持较大的size</span></p><p style="margin: 0cm 0cm 0pt 18.75pt;"> </p><p style="margin: 0cm 0cm 0pt 18.75pt;"><strong><span style="color: red; font-size: 12pt;"><span>2，</span></span></strong><strong><span style="font-family: 宋体; color: red; font-size: 12pt;">硬件接口</span></strong></p><p style="margin: 0cm 0cm 0pt;"><span style="font-family: 宋体; color: black;">简单说来，</span><span style="color: black;">Camera</span><span style="font-family: 宋体; color: black;">的接口分为并行和串行两种方式，而目前我们平台主要支持的串行方式为</span><span style="color: black;">mipi</span><span style="font-family: 宋体; color: black;">接口，</span><span style="color: black;">Parallel</span><span style="font-family: 宋体; color: black;">接口和</span><span style="color: black;">mipi</span><span style="font-family: 宋体; color: black;">接口的介绍可以参考下图</span></p><p style="margin: 0cm 0cm 0pt 18.75pt;"> <img src="https://onlinesso.mediatek.com/UploadedPirctures/63531538277546971120443342391new.bmp"></img><img src="https://onlinesso.mediatek.com/UploadedPirctures/6353153837152113373297622322new.bmp"></img></p><p style="margin: 0cm 0cm 0pt 18.75pt;"><strong><span style="color: red; font-size: 12pt;"><span>3，</span></span></strong><strong><span style="font-family: 宋体; color: red; font-size: 12pt;">常见基本概念</span></strong></p><p style="margin: 0cm 0cm 0pt 36.75pt;"><strong><span style="color: black;"><span>a)       </span></span><span style="font-family: 宋体; color: black;">三路电压</span></strong></p><p style="margin: 0cm 0cm 0pt 36.75pt;"><span style="color: black;">camera</span><span style="font-family: 宋体; color: black;">包含的三路电压为模拟电压（</span><span style="color: black;">VCAMA</span><span style="font-family: 宋体; color: black;">），数字电压（</span><span style="color: black;">VCAMD</span><span style="font-family: 宋体; color: black;">），</span><span style="color: black;">IO</span><span style="font-family: 宋体; color: black;">口电压（</span><span style="color: black;">VCAMIO</span><span style="font-family: 宋体; color: black;">）</span></p><p style="margin: 0cm 0cm 0pt 36.75pt;"><strong><span style="color: black;"><span>b)       </span></span><span style="color: black;">I2C</span><span style="font-family: 宋体; color: black;">信号</span></strong></p><p style="margin: 0cm 0cm 0pt 36.75pt;"><span style="color: black;">BB</span><span style="font-family: 宋体; color: black;">与</span><span style="color: black;">Sensor</span><span style="font-family: 宋体; color: black;">端通过</span><span style="color: black;">I2C</span><span style="font-family: 宋体; color: black;">来通信（读写寄存器），包括</span><span style="color: black;">SCL</span><span style="font-family: 宋体; color: black;">（</span><span style="color: black;">I2C Clock</span><span style="font-family: 宋体; color: black;">）</span><span style="color: black;"> SDA</span><span style="font-family: 宋体; color: black;">（</span><span style="color: black;">I2C Data</span><span style="font-family: 宋体; color: black;">）信号</span></p><p style="margin: 0cm 0cm 0pt 36.75pt;"><strong><span style="color: black;"><span>c)       </span></span><span style="color: black;">mipi</span><span style="font-family: 宋体; color: black;">几条</span><span style="color: black;">lane</span></strong></p><p style="margin: 0cm 0cm 0pt 36.75pt;"><span style="color: black;">mipi data</span><span style="font-family: 宋体; color: black;">是成对的差分信号，</span><span style="color: black;">MIPI_RDN</span><span style="font-family: 宋体; color: black;">和</span><span style="color: black;">MIPI_RDP</span><span style="font-family: 宋体; color: black;">，有几对这样的</span><span style="color: black;">pin</span><span style="font-family: 宋体; color: black;">脚，则说明是几条</span><span style="color: black;">lane</span><span style="font-family: 宋体; color: black;">，同一颗</span><span style="color: black;">sensor</span><span style="font-family: 宋体; color: black;">由于</span><span style="color: black;">register setting</span><span style="font-family: 宋体; color: black;">不同，输出的信号有可能是</span><span style="color: black;">2 lane</span><span style="font-family: 宋体; color: black;">或者</span><span style="color: black;">4lane</span><span style="font-family: 宋体; color: black;">等</span></p><p style="margin: 0cm 0cm 0pt 36.75pt;"><strong><span style="color: black;"><span>d)       </span></span><span style="color: black;">parallel</span><span style="font-family: 宋体; color: black;">高低八位</span></strong></p><p style="margin: 0cm 0cm 0pt 36.75pt;"><span style="color: black;">Parallel</span><span style="font-family: 宋体; color: black;">接口一般</span><span style="color: black;">Data</span><span style="font-family: 宋体; color: black;">有</span><span style="color: black;">10</span><span style="font-family: 宋体; color: black;">根</span><span style="color: black;">pin</span><span style="font-family: 宋体; color: black;">，分别叫做</span><span style="color: black;">Data0~Data9</span><span style="font-family: 宋体; color: black;">，</span><span style="color: black;">Parallel sensor</span><span style="font-family: 宋体; color: black;">输出的</span><span style="color: black;">data</span><span style="font-family: 宋体; color: black;">信号是</span><span style="color: black;">8</span><span style="font-family: 宋体; color: black;">根</span><span style="color: black;">pin</span><span style="font-family: 宋体; color: black;">时，这八根</span><span style="color: black;">pin</span><span style="font-family: 宋体; color: black;">接到的是</span><span style="color: black;">Data0~Data7</span><span style="font-family: 宋体; color: black;">还是</span><span style="color: black;">Data2~Data9</span><span style="font-family: 宋体; color: black;">，需要配置正确，叫做接到高八位或者低八位，接错了可能产生如下现象</span></p><p style="margin: 0cm 0cm 0pt 36.75pt;"><span style="font-family: 宋体; color: black;"><img src="https://onlinesso.mediatek.com/UploadedPirctures/63531540259158509614372904543new.bmp"></img><br clear="none"/></span></p><p style="margin: 0cm 0cm 0pt 36.75pt;"><strong><span style="color: black;"><span>e)       </span></span><span style="color: black;">Data Format</span></strong></p><p style="margin: 0cm 0cm 0pt 36.75pt;"><span style="color: black;">Sensor</span><span style="font-family: 宋体; color: black;">输出的数据格式，对于</span><span style="color: black;">YUV Sensor</span><span style="font-family: 宋体; color: black;">来说，</span><span style="color: black;">Data Fomat</span><span style="font-family: 宋体; color: black;">一般有</span><span style="color: black;">YUYV</span><span style="font-family: 宋体; color: black;">，</span><span style="color: black;">YVYU</span><span style="font-family: 宋体; color: black;">，</span><span style="color: black;">UYVY</span><span style="font-family: 宋体; color: black;">等，配置不对可能会导致颜色和亮度错掉，例如下图</span></p><p style="margin: 0cm 0cm 0pt;"><span style="color: black;"><span>              <img src="https://onlinesso.mediatek.com/UploadedPirctures/63531540318864309311673501404new.bmp"></img></span></span></p><p style="margin: 0cm 0cm 0pt 36.75pt;"><span style="font-family: 宋体; color: black;">对于</span><span style="color: black;">Raw Sensor</span><span style="font-family: 宋体; color: black;">来说，</span><span style="color: black;">Data Format</span><span style="font-family: 宋体; color: black;">就是</span><span style="color: black;">First Pixel</span><span style="font-family: 宋体; color: black;">的颜色，分为</span><span style="color: black;">R</span><span style="font-family: 宋体; color: black;">，</span><span style="color: black;">Gr</span><span style="font-family: 宋体; color: black;">，</span><span style="color: black;">Gb</span><span style="font-family: 宋体; color: black;">，</span><span style="color: black;">B</span><span style="font-family: 宋体; color: black;">，配置不对会导致颜色错误</span></p><p style="margin: 0cm 0cm 0pt 36.75pt;"><strong><span style="color: black;"><span>f)        </span></span><span style="color: black;">MCLK</span></strong></p><p style="margin: 0cm 0cm 0pt 36.75pt;"><span style="color: black;">BB</span><span style="font-family: 宋体; color: black;">提供给</span><span style="color: black;">Sensor</span><span style="font-family: 宋体; color: black;">的外部</span><span style="color: black;">clock</span></p><p style="margin: 0cm 0cm 0pt 36.75pt;"><strong><span style="color: black;"><span>g)       </span></span><span style="color: black;">PCLK</span></strong></p><p style="margin: 0cm 0cm 0pt 36.75pt;"><span style="color: black;">Parallel</span><span style="font-family: 宋体; color: black;">接口的</span><span style="color: black;">Sensor</span><span style="font-family: 宋体; color: black;">输出的</span><span style="color: black;">clock</span><span style="font-family: 宋体; color: black;">，该</span><span style="color: black;">clock</span><span style="font-family: 宋体; color: black;">变化一次，</span><span style="color: black;">data</span><span style="font-family: 宋体; color: black;">更新一次</span></p><p style="margin: 0cm 0cm 0pt 36.75pt;"><strong><span style="color: black;"><span>h)       </span></span><span style="color: black;">mipi </span><span style="font-family: 宋体; color: black;">信号</span></strong></p><p style="margin: 0cm 0cm 0pt 36.75pt;"><span style="color: black;">mipi</span><span style="font-family: 宋体; color: black;">信号包括</span><span style="color: black;">mipi clock</span><span style="font-family: 宋体; color: black;">和</span><span style="color: black;">mipi data</span><span style="font-family: 宋体; color: black;">，该信号是高速信号，用来传输</span><span style="color: black;">mipi</span><span style="font-family: 宋体; color: black;">数据包</span></p><br clear="none"/></div></span>
</div></body></html> 